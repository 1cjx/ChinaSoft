(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-facilitydetail-facilitydetail"],{"146a":function(t,i,e){"use strict";e.r(i);var a=e("75cb"),s=e.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(n);i["default"]=s.a},"18a7":function(t,i,e){var a=e("a94d");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=e("4f06").default;s("cc63e706",a,!0,{sourceMap:!1,shadowMode:!1})},2907:function(t,i,e){"use strict";e.d(i,"b",(function(){return s})),e.d(i,"c",(function(){return n})),e.d(i,"a",(function(){return a}));var a={uIcon:e("fd50").default},s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"box"},[e("v-uni-swiper",{staticClass:"headerimg",attrs:{autoplay:!0,circular:!0,interval:2500}},t._l(t.item.imageUrls,(function(t,i){return e("v-uni-swiper-item",{key:i},[e("v-uni-image",{staticClass:"swiperimage",attrs:{src:t,mode:"aspectFill"}})],1)})),1),e("v-uni-view",{staticClass:"DetailsBox"},[e("v-uni-view",{staticClass:"title"},[t._v(t._s(t.item.name))]),e("v-uni-view",{staticClass:"item_row"},[e("v-uni-view",{staticClass:"introtext"},[t._v(t._s(t.item.introduction))])],1),e("v-uni-view",{staticClass:"wait"},[e("u-icon",{attrs:{name:"man-add",color:t.getTextColor(t.item.waittime),size:"28"}}),e("v-uni-view",{staticClass:"waittext"},[t._v("等待时间:"),e("v-uni-view",{style:{color:t.getTextColor(t.item.waittime)}},[t._v(t._s(t.item.waittime))]),t._v("分钟")],1)],1),e("v-uni-view",{staticClass:"item_row"},[e("v-uni-view",{staticClass:"item_title"},[t._v("今日开放时间:")]),e("v-uni-view",{staticClass:"item_text"},[t._v(t._s(t.item.startTime)+"-"+t._s(t.item.endTime))])],1),"catering"===t.type?[e("v-uni-view",{staticClass:"item_row"},[e("v-uni-view",{staticClass:"item_title"},[t._v("餐饮类型")]),e("v-uni-view",{staticClass:"item_text"},[t._v(t._s(t.item.type))])],1)]:t._e(),"amusement"===t.type?[e("v-uni-view",{staticClass:"item_row"},[e("v-uni-view",{staticClass:"item_title"},[t._v("项目类型")]),e("v-uni-view",{staticClass:"item_text"},[t._v(t._s(t.item.type))])],1),e("v-uni-view",{staticClass:"item_row"},[e("v-uni-view",{staticClass:"item_title"},[t._v("适合人群")]),e("v-uni-view",{staticClass:"item_text"},[t._v(t._s(t.item.crowdType))])],1),e("v-uni-view",{staticClass:"item_row"},[e("v-uni-view",{staticClass:"item_title"},[t._v("身高限制")]),e("v-uni-view",{staticClass:"item_text"},[t._v(t._s(t.item.heightLow)+" - "+t._s(t.item.heightUp)+"cm")])],1),e("v-uni-view",{staticClass:"item_row"},[e("v-uni-view",{staticClass:"item_title"},[t._v("游玩须知")]),e("v-uni-view",{staticClass:"item_text"},[t._v(t._s(t.item.instruction))])],1)]:t._e(),e("v-uni-view",{staticClass:"operate"},[e("v-uni-view",{staticClass:"mark",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.changemark.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"item_icon"},[e("u-icon",{attrs:{name:"checkmark-circle",color:t.getMarkColor(t.isVisited),size:"60"}})],1),e("v-uni-view",{staticClass:"item_name",style:{color:t.getMarkColor(t.isVisited)}},[t._v("一键打卡")])],1),e("v-uni-view",{staticClass:"map",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.gomap.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"item_icon"},[e("u-icon",{attrs:{name:"map",color:"#55aaff",size:"60"}})],1),e("v-uni-view",{staticClass:"item_name"},[t._v("地图显示")])],1)],1)],2)],1)},n=[]},"75cb":function(t,i,e){"use strict";e("7a82");var a=e("4ea4").default;Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("99af");var s=a(e("3835")),n={data:function(){return{item:{},type:"",userId:"",isVisited:"",visitId:"",facility:{}}},onLoad:function(t){this.ip=getApp().globalData.ip;var i=uni.getStorageSync("user");this.userId=i.id,this.type=t.type,"amusement"==this.type?this.getAmusementData(t.name):"catering"==this.type?this.getCateringtData(t.name):"base"==this.type&&this.getBaseData(t.name)},methods:{getAmusementData:function(t){var i=this;uni.request({url:"http://"+this.ip+"/filter/amusement",method:"POST",data:{name:t,userId:this.userId,height:null},success:function(t){if(1*t.data.code==200){var e=t.data.data[0];i.item={name:e.name,id:e.id,facilityType:e.facilityType,imageUrls:e.imageUrls,introduction:e.introduction,startTime:i.parseTime(e.startTime),endTime:i.parseTime(e.closeTime),type:e.type,crowdType:e.crowdType,heightLow:e.heightLow,heightUp:e.heightUp,instruction:e.instruction,waittime:e.expectWaitTime,longitude:e.longitude,latitude:e.latitude},i.isVisited=e.isVisited,i.visitId=e.visitId}}})},getCateringtData:function(t){var i=this;uni.request({url:"http://"+this.ip+"/filter/restaurant",method:"POST",data:{name:t,userId:this.userId},success:function(t){var e=t.data.data[0];i.item={id:e.id,name:e.name,longitude:e.longitude,latitude:e.latitude,facilityType:e.facilityType,imageUrls:e.imageUrls,introduction:e.introduction,startTime:i.parseTime(e.startTime),endTime:i.parseTime(e.closeTime),type:e.type,waittime:e.expectWaitTime},i.isVisited=e.isVisited,i.visitId=e.visitId}})},getBaseData:function(t){var i=this;uni.request({url:"http://"+this.ip+"/filter/base",method:"POST",data:{userId:this.userId,name:t},success:function(t){if(1*t.data.code==200){var e=t.data.data[0];i.item={id:e.id,name:e.name,longitude:e.longitude,latitude:e.latitude,facilityType:e.facilityType,imageUrls:e.imageUrls,startTime:i.parseTime(e.startTime),endTime:i.parseTime(e.closeTime),waittime:e.expectWaitTime},i.isVisited=e.isVisited,i.visitId=e.visitId}}})},getTextColor:function(t){return t<=30?"#00aa00":t>30&&t<=60?"#ffa500":"#ff0000"},getMarkColor:function(t){return 0===t?"#55aaff":1===t?"#ffa500":void 0},parseTime:function(t){var i=t.split(":"),e=(0,s.default)(i,3),a=e[0],n=e[1];e[2];return"".concat(a,":").concat(n)},changemark:function(){var t=this;0===this.isVisited?this.mark():1===this.isVisited&&uni.showModal({title:"提示",content:"是否取消打卡",success:function(i){i.confirm?t.cancelmark():i.cancel}})},mark:function(){var t=this;uni.request({url:"http://"+this.ip+"/visit/add",method:"POST",data:{userId:this.userId,facility:{facilityId:this.item.id,facilityType:this.item.facilityType}},success:function(i){if(1*i.data.code==200)t.isVisited=1,t.visitId=i.data.data.id,t.$u.toast("恭喜您打卡成功");else if(1*i.data.code==4e4){var e=i.data.message;t.$u.toast(e)}},fail:function(t){uni.showToast({title:"请求失败，请检查您的网络",icon:"none"})}})},cancelmark:function(){var t=this;uni.request({url:"http://"+this.ip+"/visit/delete",method:"POST",data:{id:this.visitId},success:function(i){if(1*i.data.code==200){var e=i.data.data;!0===e&&(t.$u.toast("您已取消打卡"),t.isVisited=0)}},fail:function(t){uni.showToast({title:"请求失败，请检查您的网络",icon:"none"})}})},gomap:function(){this.facility.id=this.item.id,this.facility.name=this.item.name,this.facility.longitude=this.item.longitude,this.facility.latitude=this.item.latitude,this.facility.waittime=this.item.waittime,this.facility.starttime=this.item.startTime,this.facility.closetime=this.item.endTime,this.facility.imageurl=this.item.imageUrls[0],this.facility.facilityType=this.item.facilityType,uni.setStorageSync("facility",this.facility),uni.switchTab({url:"/pages/map/map"})}}};i.default=n},"81f9":function(t,i,e){"use strict";var a=e("18a7"),s=e.n(a);s.a},a94d:function(t,i,e){var a=e("24fb");i=a(!1),i.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\r\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \r\n */.box[data-v-30ecddce]{display:flex;flex-direction:column;justify-content:center;align-items:center}.DetailsBox[data-v-30ecddce]{background-color:#fff;margin-top:%?-50?%;margin-bottom:%?50?%;padding-top:%?30?%;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:2;border-radius:%?70?%}.headerimg[data-v-30ecddce]{width:100%;height:%?400?%}.swiperimage[data-v-30ecddce]{width:100%}.title[data-v-30ecddce]{margin-top:%?30?%;height:%?90?%;display:flex;justify-content:center;align-items:center;border-radius:%?50?%;width:%?300?%;font-weight:600;font-size:18px}.titleimg[data-v-30ecddce]{padding:%?0?% %?20?%;width:%?100?%;height:%?100?%}.introtext[data-v-30ecddce]{margin-top:%?20?%;width:%?600?%;text-indent:2em;font-size:14px}.wait[data-v-30ecddce]{margin-top:%?20?%;display:flex;justify-content:center;align-items:center}.waittext[data-v-30ecddce]{font-size:16px;font-weight:700;text-align:center;display:flex;justify-content:center;align-items:center}.item_row[data-v-30ecddce]{width:80%;margin:%?10?% %?0?%;padding:%?18?% %?10?%;border-radius:%?50?%}.item_title[data-v-30ecddce]{font-size:14px;color:#717171;text-align:center}.item_text[data-v-30ecddce]{margin-top:%?10?%;font-size:16px;font-weight:700;text-align:center}.operate[data-v-30ecddce]{margin-top:%?30?%;width:%?600?%;display:flex;justify-content:center;align-items:center}.mark[data-v-30ecddce],\r\n.map[data-v-30ecddce]{color:#5af;margin:auto;width:25%;display:flex;flex-direction:column;justify-content:center;align-items:center}',""]),t.exports=i},fd4a:function(t,i,e){"use strict";e.r(i);var a=e("2907"),s=e("146a");for(var n in s)["default"].indexOf(n)<0&&function(t){e.d(i,t,(function(){return s[t]}))}(n);e("81f9");var c=e("f0c5"),d=Object(c["a"])(s["default"],a["b"],a["c"],!1,null,"30ecddce",null,!1,a["a"],void 0);i["default"]=d.exports}}]);