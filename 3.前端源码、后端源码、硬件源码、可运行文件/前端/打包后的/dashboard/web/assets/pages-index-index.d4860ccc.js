import{o as e,c as t,w as i,r as a,a as n,b as s,d as o,t as r,n as l,e as c,i as h,f as d,g as u,h as p,j as f,F as g,k as m,P as x,l as y,m as b,p as _,q as S,s as w,u as T,v,x as k,y as D,I as A,z as C,A as P,B as M,C as I,D as F,E as L,G as R,H as O,J as E,K as N,L as B,M as z,N as U,O as W,Q as $,R as V,S as j,T as H,U as q,V as G,W as K,X as J,Y,Z as X,_ as Q,$ as Z,a0 as ee,a1 as te,a2 as ie,a3 as ae,a4 as ne,a5 as se}from"./index-8982a86c.js";const oe=(e,t)=>{const i=e.__vccOpts||e;for(const[a,n]of t)i[a]=n;return i};const re=oe({name:"UniCard",emits:["click"],props:{title:{type:String,default:""},subTitle:{type:String,default:""},padding:{type:String,default:"10px"},margin:{type:String,default:"15px"},spacing:{type:String,default:"0 10px"},extra:{type:String,default:""},cover:{type:String,default:""},thumbnail:{type:String,default:""},isFull:{type:Boolean,default:!1},isShadow:{type:Boolean,default:!0},shadow:{type:String,default:"0px 0px 3px 1px rgba(0, 0, 0, 0.08)"},border:{type:Boolean,default:!0}},methods:{onClick(e){this.$emit("click",e)}}},[["render",function(p,f,g,m,x,y){const b=h,_=d,S=u;return e(),t(_,{class:c(["uni-card",{"uni-card--full":g.isFull,"uni-card--shadow":g.isShadow,"uni-card--border":g.border}]),style:l({margin:g.isFull?0:g.margin,padding:g.spacing,"box-shadow":g.isShadow?g.shadow:""})},{default:i((()=>[a(p.$slots,"cover",{},(()=>[g.cover?(e(),t(_,{key:0,class:"uni-card__cover"},{default:i((()=>[n(b,{class:"uni-card__cover-image",mode:"widthFix",onClick:f[0]||(f[0]=e=>y.onClick("cover")),src:g.cover},null,8,["src"])])),_:1})):s("",!0)]),!0),a(p.$slots,"title",{},(()=>[g.title||g.extra?(e(),t(_,{key:0,class:"uni-card__header"},{default:i((()=>[n(_,{class:"uni-card__header-box",onClick:f[1]||(f[1]=e=>y.onClick("title"))},{default:i((()=>[g.thumbnail?(e(),t(_,{key:0,class:"uni-card__header-avatar"},{default:i((()=>[n(b,{class:"uni-card__header-avatar-image",src:g.thumbnail,mode:"aspectFit"},null,8,["src"])])),_:1})):s("",!0),n(_,{class:"uni-card__header-content"},{default:i((()=>[n(S,{class:"uni-card__header-content-title uni-ellipsis"},{default:i((()=>[o(r(g.title),1)])),_:1}),g.title&&g.subTitle?(e(),t(S,{key:0,class:"uni-card__header-content-subtitle uni-ellipsis"},{default:i((()=>[o(r(g.subTitle),1)])),_:1})):s("",!0)])),_:1})])),_:1}),n(_,{class:"uni-card__header-extra",onClick:f[2]||(f[2]=e=>y.onClick("extra"))},{default:i((()=>[n(S,{class:"uni-card__header-extra-text"},{default:i((()=>[o(r(g.extra),1)])),_:1})])),_:1})])),_:1})):s("",!0)]),!0),n(_,{class:"uni-card__content",style:l({padding:g.padding}),onClick:f[3]||(f[3]=e=>y.onClick("content"))},{default:i((()=>[a(p.$slots,"default",{},void 0,!0)])),_:3},8,["style"]),n(_,{class:"uni-card__actions",onClick:f[4]||(f[4]=e=>y.onClick("actions"))},{default:i((()=>[a(p.$slots,"actions",{},void 0,!0)])),_:3})])),_:3},8,["class","style"])}],["__scopeId","data-v-b4135a35"]]);function le(e,t){return"string"==typeof e?t:e}const ce=[{font_class:"arrow-down",unicode:""},{font_class:"arrow-left",unicode:""},{font_class:"arrow-right",unicode:""},{font_class:"arrow-up",unicode:""},{font_class:"auth",unicode:""},{font_class:"auth-filled",unicode:""},{font_class:"back",unicode:""},{font_class:"bars",unicode:""},{font_class:"calendar",unicode:""},{font_class:"calendar-filled",unicode:""},{font_class:"camera",unicode:""},{font_class:"camera-filled",unicode:""},{font_class:"cart",unicode:""},{font_class:"cart-filled",unicode:""},{font_class:"chat",unicode:""},{font_class:"chat-filled",unicode:""},{font_class:"chatboxes",unicode:""},{font_class:"chatboxes-filled",unicode:""},{font_class:"chatbubble",unicode:""},{font_class:"chatbubble-filled",unicode:""},{font_class:"checkbox",unicode:""},{font_class:"checkbox-filled",unicode:""},{font_class:"checkmarkempty",unicode:""},{font_class:"circle",unicode:""},{font_class:"circle-filled",unicode:""},{font_class:"clear",unicode:""},{font_class:"close",unicode:""},{font_class:"closeempty",unicode:""},{font_class:"cloud-download",unicode:""},{font_class:"cloud-download-filled",unicode:""},{font_class:"cloud-upload",unicode:""},{font_class:"cloud-upload-filled",unicode:""},{font_class:"color",unicode:""},{font_class:"color-filled",unicode:""},{font_class:"compose",unicode:""},{font_class:"contact",unicode:""},{font_class:"contact-filled",unicode:""},{font_class:"down",unicode:""},{font_class:"bottom",unicode:""},{font_class:"download",unicode:""},{font_class:"download-filled",unicode:""},{font_class:"email",unicode:""},{font_class:"email-filled",unicode:""},{font_class:"eye",unicode:""},{font_class:"eye-filled",unicode:""},{font_class:"eye-slash",unicode:""},{font_class:"eye-slash-filled",unicode:""},{font_class:"fire",unicode:""},{font_class:"fire-filled",unicode:""},{font_class:"flag",unicode:""},{font_class:"flag-filled",unicode:""},{font_class:"folder-add",unicode:""},{font_class:"folder-add-filled",unicode:""},{font_class:"font",unicode:""},{font_class:"forward",unicode:""},{font_class:"gear",unicode:""},{font_class:"gear-filled",unicode:""},{font_class:"gift",unicode:""},{font_class:"gift-filled",unicode:""},{font_class:"hand-down",unicode:""},{font_class:"hand-down-filled",unicode:""},{font_class:"hand-up",unicode:""},{font_class:"hand-up-filled",unicode:""},{font_class:"headphones",unicode:""},{font_class:"heart",unicode:""},{font_class:"heart-filled",unicode:""},{font_class:"help",unicode:""},{font_class:"help-filled",unicode:""},{font_class:"home",unicode:""},{font_class:"home-filled",unicode:""},{font_class:"image",unicode:""},{font_class:"image-filled",unicode:""},{font_class:"images",unicode:""},{font_class:"images-filled",unicode:""},{font_class:"info",unicode:""},{font_class:"info-filled",unicode:""},{font_class:"left",unicode:""},{font_class:"link",unicode:""},{font_class:"list",unicode:""},{font_class:"location",unicode:""},{font_class:"location-filled",unicode:""},{font_class:"locked",unicode:""},{font_class:"locked-filled",unicode:""},{font_class:"loop",unicode:""},{font_class:"mail-open",unicode:""},{font_class:"mail-open-filled",unicode:""},{font_class:"map",unicode:""},{font_class:"map-filled",unicode:""},{font_class:"map-pin",unicode:""},{font_class:"map-pin-ellipse",unicode:""},{font_class:"medal",unicode:""},{font_class:"medal-filled",unicode:""},{font_class:"mic",unicode:""},{font_class:"mic-filled",unicode:""},{font_class:"micoff",unicode:""},{font_class:"micoff-filled",unicode:""},{font_class:"minus",unicode:""},{font_class:"minus-filled",unicode:""},{font_class:"more",unicode:""},{font_class:"more-filled",unicode:""},{font_class:"navigate",unicode:""},{font_class:"navigate-filled",unicode:""},{font_class:"notification",unicode:""},{font_class:"notification-filled",unicode:""},{font_class:"paperclip",unicode:""},{font_class:"paperplane",unicode:""},{font_class:"paperplane-filled",unicode:""},{font_class:"person",unicode:""},{font_class:"person-filled",unicode:""},{font_class:"personadd",unicode:""},{font_class:"personadd-filled",unicode:""},{font_class:"personadd-filled-copy",unicode:""},{font_class:"phone",unicode:""},{font_class:"phone-filled",unicode:""},{font_class:"plus",unicode:""},{font_class:"plus-filled",unicode:""},{font_class:"plusempty",unicode:""},{font_class:"pulldown",unicode:""},{font_class:"pyq",unicode:""},{font_class:"qq",unicode:""},{font_class:"redo",unicode:""},{font_class:"redo-filled",unicode:""},{font_class:"refresh",unicode:""},{font_class:"refresh-filled",unicode:""},{font_class:"refreshempty",unicode:""},{font_class:"reload",unicode:""},{font_class:"right",unicode:""},{font_class:"scan",unicode:""},{font_class:"search",unicode:""},{font_class:"settings",unicode:""},{font_class:"settings-filled",unicode:""},{font_class:"shop",unicode:""},{font_class:"shop-filled",unicode:""},{font_class:"smallcircle",unicode:""},{font_class:"smallcircle-filled",unicode:""},{font_class:"sound",unicode:""},{font_class:"sound-filled",unicode:""},{font_class:"spinner-cycle",unicode:""},{font_class:"staff",unicode:""},{font_class:"staff-filled",unicode:""},{font_class:"star",unicode:""},{font_class:"star-filled",unicode:""},{font_class:"starhalf",unicode:""},{font_class:"trash",unicode:""},{font_class:"trash-filled",unicode:""},{font_class:"tune",unicode:""},{font_class:"tune-filled",unicode:""},{font_class:"undo",unicode:""},{font_class:"undo-filled",unicode:""},{font_class:"up",unicode:""},{font_class:"top",unicode:""},{font_class:"upload",unicode:""},{font_class:"upload-filled",unicode:""},{font_class:"videocam",unicode:""},{font_class:"videocam-filled",unicode:""},{font_class:"vip",unicode:""},{font_class:"vip-filled",unicode:""},{font_class:"wallet",unicode:""},{font_class:"wallet-filled",unicode:""},{font_class:"weibo",unicode:""},{font_class:"weixin",unicode:""}];const he=oe({name:"UniIcons",emits:["click"],props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:16},customPrefix:{type:String,default:""},fontFamily:{type:String,default:""}},data:()=>({icons:ce}),computed:{unicode(){let e=this.icons.find((e=>e.font_class===this.type));return e?e.unicode:""},iconSize(){return"number"==typeof(e=this.size)||/^[0-9]*$/g.test(e)?e+"px":e;var e},styleObj(){return""!==this.fontFamily?`color: ${this.color}; font-size: ${this.iconSize}; font-family: ${this.fontFamily};`:`color: ${this.color}; font-size: ${this.iconSize};`}},methods:{_onClick(){this.$emit("click")}}},[["render",function(n,s,o,r,h,d){const p=u;return e(),t(p,{style:l(d.styleObj),class:c(["uni-icons",["uniui-"+o.type,o.customPrefix,o.customPrefix?o.type:""]]),onClick:d._onClick},{default:i((()=>[a(n.$slots,"default",{},void 0,!0)])),_:3},8,["style","class","onClick"])}],["__scopeId","data-v-5610c8db"]]);function de(e,t){return`${ue(e)} ${pe(e,t)}`}function ue(e){e=be(e);const t=(e=new Date(e)).getFullYear(),i=e.getMonth()+1,a=e.getDate();return`${t}-${fe(i)}-${fe(a)}`}function pe(e,t){e=be(e);const i=(e=new Date(e)).getHours(),a=e.getMinutes(),n=e.getSeconds();return t?`${fe(i)}:${fe(a)}`:`${fe(i)}:${fe(a)}:${fe(n)}`}function fe(e){return e<10&&(e=`0${e}`),e}function ge(e){return e?"00:00":"00:00:00"}function me(e,t){return(e=new Date(be(e)))<=(t=new Date(be(t)))}function xe(e){return e.match(/((19|20)\d{2})(-|\/)\d{1,2}(-|\/)\d{1,2}/g)}const ye=/^\d{4}-(0?[1-9]|1[012])-(0?[1-9]|[12][0-9]|3[01])( [0-5]?[0-9]:[0-5]?[0-9](:[0-5]?[0-9])?)?$/;function be(e){return"string"==typeof e&&ye.test(e)&&(e=e.replace(/-/g,"/")),e}const _e=oe({props:{weeks:{type:Object,default:()=>({})},calendar:{type:Object,default:()=>({})},selected:{type:Array,default:()=>[]},checkHover:{type:Boolean,default:!1}},methods:{choiceDate(e){this.$emit("change",e)},handleMousemove(e){this.$emit("handleMouse",e)}}},[["render",function(a,l,h,p,f,g){const m=u,x=d;return e(),t(x,{class:c(["uni-calendar-item__weeks-box",{"uni-calendar-item--disable":h.weeks.disable,"uni-calendar-item--before-checked-x":h.weeks.beforeMultiple,"uni-calendar-item--multiple":h.weeks.multiple,"uni-calendar-item--after-checked-x":h.weeks.afterMultiple}]),onClick:l[0]||(l[0]=e=>g.choiceDate(h.weeks)),onMouseenter:l[1]||(l[1]=e=>g.handleMousemove(h.weeks))},{default:i((()=>[n(x,{class:c(["uni-calendar-item__weeks-box-item",{"uni-calendar-item--checked":h.calendar.fullDate===h.weeks.fullDate&&(h.calendar.userChecked||!h.checkHover),"uni-calendar-item--checked-range-text":h.checkHover,"uni-calendar-item--before-checked":h.weeks.beforeMultiple,"uni-calendar-item--multiple":h.weeks.multiple,"uni-calendar-item--after-checked":h.weeks.afterMultiple,"uni-calendar-item--disable":h.weeks.disable}])},{default:i((()=>[h.selected&&h.weeks.extraInfo?(e(),t(m,{key:0,class:"uni-calendar-item__weeks-box-circle"})):s("",!0),n(m,{class:"uni-calendar-item__weeks-box-text uni-calendar-item__weeks-box-text-disable uni-calendar-item--checked-text"},{default:i((()=>[o(r(h.weeks.date),1)])),_:1})])),_:1},8,["class"]),n(x,{class:c({"uni-calendar-item--today":h.weeks.isToday})},null,8,["class"])])),_:1},8,["class"])}],["__scopeId","data-v-33ef2289"]]),Se={en:{"uni-datetime-picker.selectDate":"select date","uni-datetime-picker.selectTime":"select time","uni-datetime-picker.selectDateTime":"select date and time","uni-datetime-picker.startDate":"start date","uni-datetime-picker.endDate":"end date","uni-datetime-picker.startTime":"start time","uni-datetime-picker.endTime":"end time","uni-datetime-picker.ok":"ok","uni-datetime-picker.clear":"clear","uni-datetime-picker.cancel":"cancel","uni-datetime-picker.year":"-","uni-datetime-picker.month":"","uni-calender.MON":"MON","uni-calender.TUE":"TUE","uni-calender.WED":"WED","uni-calender.THU":"THU","uni-calender.FRI":"FRI","uni-calender.SAT":"SAT","uni-calender.SUN":"SUN","uni-calender.confirm":"confirm"},"zh-Hans":{"uni-datetime-picker.selectDate":"选择日期","uni-datetime-picker.selectTime":"选择时间","uni-datetime-picker.selectDateTime":"选择日期时间","uni-datetime-picker.startDate":"开始日期","uni-datetime-picker.endDate":"结束日期","uni-datetime-picker.startTime":"开始时间","uni-datetime-picker.endTime":"结束时间","uni-datetime-picker.ok":"确定","uni-datetime-picker.clear":"清除","uni-datetime-picker.cancel":"取消","uni-datetime-picker.year":"年","uni-datetime-picker.month":"月","uni-calender.SUN":"日","uni-calender.MON":"一","uni-calender.TUE":"二","uni-calender.WED":"三","uni-calender.THU":"四","uni-calender.FRI":"五","uni-calender.SAT":"六","uni-calender.confirm":"确认"},"zh-Hant":{"uni-datetime-picker.selectDate":"選擇日期","uni-datetime-picker.selectTime":"選擇時間","uni-datetime-picker.selectDateTime":"選擇日期時間","uni-datetime-picker.startDate":"開始日期","uni-datetime-picker.endDate":"結束日期","uni-datetime-picker.startTime":"開始时间","uni-datetime-picker.endTime":"結束时间","uni-datetime-picker.ok":"確定","uni-datetime-picker.clear":"清除","uni-datetime-picker.cancel":"取消","uni-datetime-picker.year":"年","uni-datetime-picker.month":"月","uni-calender.SUN":"日","uni-calender.MON":"一","uni-calender.TUE":"二","uni-calender.WED":"三","uni-calender.THU":"四","uni-calender.FRI":"五","uni-calender.SAT":"六","uni-calender.confirm":"確認"}},{t:we}=p(Se),Te={name:"UniDatetimePicker",data:()=>({indicatorStyle:"height: 50px;",visible:!1,fixNvueBug:{},dateShow:!0,timeShow:!0,title:"日期和时间",time:"",year:1920,month:0,day:0,hour:0,minute:0,second:0,startYear:1920,startMonth:1,startDay:1,startHour:0,startMinute:0,startSecond:0,endYear:2120,endMonth:12,endDay:31,endHour:23,endMinute:59,endSecond:59}),props:{type:{type:String,default:"datetime"},value:{type:[String,Number],default:""},modelValue:{type:[String,Number],default:""},start:{type:[Number,String],default:""},end:{type:[Number,String],default:""},returnType:{type:String,default:"string"},disabled:{type:[Boolean,String],default:!1},border:{type:[Boolean,String],default:!0},hideSecond:{type:[Boolean,String],default:!1}},watch:{modelValue:{handler(e){e?(this.parseValue(be(e)),this.initTime(!1)):(this.time="",this.parseValue(Date.now()))},immediate:!0},type:{handler(e){"date"===e?(this.dateShow=!0,this.timeShow=!1,this.title="日期"):"time"===e?(this.dateShow=!1,this.timeShow=!0,this.title="时间"):(this.dateShow=!0,this.timeShow=!0,this.title="日期和时间")},immediate:!0},start:{handler(e){this.parseDatetimeRange(be(e),"start")},immediate:!0},end:{handler(e){this.parseDatetimeRange(be(e),"end")},immediate:!0},months(e){this.checkValue("month",this.month,e)},days(e){this.checkValue("day",this.day,e)},hours(e){this.checkValue("hour",this.hour,e)},minutes(e){this.checkValue("minute",this.minute,e)},seconds(e){this.checkValue("second",this.second,e)}},computed:{years(){return this.getCurrentRange("year")},months(){return this.getCurrentRange("month")},days(){return this.getCurrentRange("day")},hours(){return this.getCurrentRange("hour")},minutes(){return this.getCurrentRange("minute")},seconds(){return this.getCurrentRange("second")},ymd(){return[this.year-this.minYear,this.month-this.minMonth,this.day-this.minDay]},hms(){return[this.hour-this.minHour,this.minute-this.minMinute,this.second-this.minSecond]},currentDateIsStart(){return this.year===this.startYear&&this.month===this.startMonth&&this.day===this.startDay},currentDateIsEnd(){return this.year===this.endYear&&this.month===this.endMonth&&this.day===this.endDay},minYear(){return this.startYear},maxYear(){return this.endYear},minMonth(){return this.year===this.startYear?this.startMonth:1},maxMonth(){return this.year===this.endYear?this.endMonth:12},minDay(){return this.year===this.startYear&&this.month===this.startMonth?this.startDay:1},maxDay(){return this.year===this.endYear&&this.month===this.endMonth?this.endDay:this.daysInMonth(this.year,this.month)},minHour(){return"datetime"===this.type?this.currentDateIsStart?this.startHour:0:"time"===this.type?this.startHour:void 0},maxHour(){return"datetime"===this.type?this.currentDateIsEnd?this.endHour:23:"time"===this.type?this.endHour:void 0},minMinute(){return"datetime"===this.type?this.currentDateIsStart&&this.hour===this.startHour?this.startMinute:0:"time"===this.type?this.hour===this.startHour?this.startMinute:0:void 0},maxMinute(){return"datetime"===this.type?this.currentDateIsEnd&&this.hour===this.endHour?this.endMinute:59:"time"===this.type?this.hour===this.endHour?this.endMinute:59:void 0},minSecond(){return"datetime"===this.type?this.currentDateIsStart&&this.hour===this.startHour&&this.minute===this.startMinute?this.startSecond:0:"time"===this.type?this.hour===this.startHour&&this.minute===this.startMinute?this.startSecond:0:void 0},maxSecond(){return"datetime"===this.type?this.currentDateIsEnd&&this.hour===this.endHour&&this.minute===this.endMinute?this.endSecond:59:"time"===this.type?this.hour===this.endHour&&this.minute===this.endMinute?this.endSecond:59:void 0},selectTimeText:()=>we("uni-datetime-picker.selectTime"),okText:()=>we("uni-datetime-picker.ok"),clearText:()=>we("uni-datetime-picker.clear"),cancelText:()=>we("uni-datetime-picker.cancel")},mounted(){},methods:{lessThanTen:e=>e<10?"0"+e:e,parseTimeType(e){if(e){let t=e.split(":");this.hour=Number(t[0]),this.minute=Number(t[1]),this.second=Number(t[2])}},initPickerValue(e){let t=null;e?t=this.compareValueWithStartAndEnd(e,this.start,this.end):(t=Date.now(),t=this.compareValueWithStartAndEnd(t,this.start,this.end)),this.parseValue(t)},compareValueWithStartAndEnd(e,t,i){let a=null;return e=this.superTimeStamp(e),t=this.superTimeStamp(t),i=this.superTimeStamp(i),a=t&&i?e<t?new Date(t):e>i?new Date(i):new Date(e):t&&!i?t<=e?new Date(e):new Date(t):!t&&i?e<=i?new Date(e):new Date(i):new Date(e),a},superTimeStamp(e){let t="";if("time"===this.type&&e&&"string"==typeof e){const e=new Date;t=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+" "}return Number(e)&&(e=parseInt(e),t=0),this.createTimeStamp(t+e)},parseValue(e){if(e){if("time"===this.type&&"string"==typeof e)this.parseTimeType(e);else{let t=null;t=new Date(e),"time"!==this.type&&(this.year=t.getFullYear(),this.month=t.getMonth()+1,this.day=t.getDate()),"date"!==this.type&&(this.hour=t.getHours(),this.minute=t.getMinutes(),this.second=t.getSeconds())}this.hideSecond&&(this.second=0)}},parseDatetimeRange(e,t){if(!e)return"start"===t&&(this.startYear=1920,this.startMonth=1,this.startDay=1,this.startHour=0,this.startMinute=0,this.startSecond=0),void("end"===t&&(this.endYear=2120,this.endMonth=12,this.endDay=31,this.endHour=23,this.endMinute=59,this.endSecond=59));if("time"===this.type){const i=e.split(":");this[t+"Hour"]=Number(i[0]),this[t+"Minute"]=Number(i[1]),this[t+"Second"]=Number(i[2])}else{if(!e)return void("start"===t?this.startYear=this.year-60:this.endYear=this.year+60);Number(e)&&(e=parseInt(e));const i=/[0-9]:[0-9]/;"datetime"!==this.type||"end"!==t||"string"!=typeof e||i.test(e)||(e+=" 23:59:59");const a=new Date(e);this[t+"Year"]=a.getFullYear(),this[t+"Month"]=a.getMonth()+1,this[t+"Day"]=a.getDate(),"datetime"===this.type&&(this[t+"Hour"]=a.getHours(),this[t+"Minute"]=a.getMinutes(),this[t+"Second"]=a.getSeconds())}},getCurrentRange(e){const t=[];for(let i=this["min"+this.capitalize(e)];i<=this["max"+this.capitalize(e)];i++)t.push(i);return t},capitalize:e=>e.charAt(0).toUpperCase()+e.slice(1),checkValue(e,t,i){-1===i.indexOf(t)&&(this[e]=i[0])},daysInMonth:(e,t)=>new Date(e,t,0).getDate(),createTimeStamp(e){if(e)return"number"==typeof e?e:(e=e.replace(/-/g,"/"),"date"===this.type&&(e+=" 00:00:00"),Date.parse(e))},createDomSting(){const e=this.year+"-"+this.lessThanTen(this.month)+"-"+this.lessThanTen(this.day);let t=this.lessThanTen(this.hour)+":"+this.lessThanTen(this.minute);return this.hideSecond||(t=t+":"+this.lessThanTen(this.second)),"date"===this.type?e:"time"===this.type?t:e+" "+t},initTime(e=!0){this.time=this.createDomSting(),e&&("timestamp"===this.returnType&&"time"!==this.type?(this.$emit("change",this.createTimeStamp(this.time)),this.$emit("input",this.createTimeStamp(this.time)),this.$emit("update:modelValue",this.createTimeStamp(this.time))):(this.$emit("change",this.time),this.$emit("input",this.time),this.$emit("update:modelValue",this.time)))},bindDateChange(e){const t=e.detail.value;this.year=this.years[t[0]],this.month=this.months[t[1]],this.day=this.days[t[2]]},bindTimeChange(e){const t=e.detail.value;this.hour=this.hours[t[0]],this.minute=this.minutes[t[1]],this.second=this.seconds[t[2]]},initTimePicker(){if(this.disabled)return;const e=be(this.time);this.initPickerValue(e),this.visible=!this.visible},tiggerTimePicker(e){this.visible=!this.visible},clearTime(){this.time="",this.$emit("change",this.time),this.$emit("input",this.time),this.$emit("update:modelValue",this.time),this.tiggerTimePicker()},setTime(){this.initTime(),this.tiggerTimePicker()}}};const ve=oe(Te,[["render",function(h,p,b,_,S,w){const T=u,v=d,k=x,D=y;return e(),t(v,{class:"uni-datetime-picker"},{default:i((()=>[n(v,{onClick:w.initTimePicker},{default:i((()=>[a(h.$slots,"default",{},(()=>[n(v,{class:c(["uni-datetime-picker-timebox-pointer",{"uni-datetime-picker-disabled":b.disabled,"uni-datetime-picker-timebox":b.border}])},{default:i((()=>[n(T,{class:"uni-datetime-picker-text"},{default:i((()=>[o(r(S.time),1)])),_:1}),S.time?s("",!0):(e(),t(v,{key:0,class:"uni-datetime-picker-time"},{default:i((()=>[n(T,{class:"uni-datetime-picker-text"},{default:i((()=>[o(r(w.selectTimeText),1)])),_:1})])),_:1}))])),_:1},8,["class"])]),!0)])),_:3},8,["onClick"]),S.visible?(e(),t(v,{key:0,id:"mask",class:"uni-datetime-picker-mask",onClick:w.tiggerTimePicker},null,8,["onClick"])):s("",!0),S.visible?(e(),t(v,{key:1,class:c(["uni-datetime-picker-popup",[S.dateShow&&S.timeShow?"":"fix-nvue-height"]]),style:l(S.fixNvueBug)},{default:i((()=>[n(v,{class:"uni-title"},{default:i((()=>[n(T,{class:"uni-datetime-picker-text"},{default:i((()=>[o(r(w.selectTimeText),1)])),_:1})])),_:1}),S.dateShow?(e(),t(v,{key:0,class:"uni-datetime-picker__container-box"},{default:i((()=>[n(D,{class:"uni-datetime-picker-view","indicator-style":S.indicatorStyle,value:w.ymd,onChange:w.bindDateChange},{default:i((()=>[n(k,null,{default:i((()=>[(e(!0),f(g,null,m(w.years,((a,s)=>(e(),t(v,{class:"uni-datetime-picker-item",key:s},{default:i((()=>[n(T,{class:"uni-datetime-picker-item"},{default:i((()=>[o(r(w.lessThanTen(a)),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),n(k,null,{default:i((()=>[(e(!0),f(g,null,m(w.months,((a,s)=>(e(),t(v,{class:"uni-datetime-picker-item",key:s},{default:i((()=>[n(T,{class:"uni-datetime-picker-item"},{default:i((()=>[o(r(w.lessThanTen(a)),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),n(k,null,{default:i((()=>[(e(!0),f(g,null,m(w.days,((a,s)=>(e(),t(v,{class:"uni-datetime-picker-item",key:s},{default:i((()=>[n(T,{class:"uni-datetime-picker-item"},{default:i((()=>[o(r(w.lessThanTen(a)),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1},8,["indicator-style","value","onChange"]),n(T,{class:"uni-datetime-picker-sign sign-left"},{default:i((()=>[o("-")])),_:1}),n(T,{class:"uni-datetime-picker-sign sign-right"},{default:i((()=>[o("-")])),_:1})])),_:1})):s("",!0),S.timeShow?(e(),t(v,{key:1,class:"uni-datetime-picker__container-box"},{default:i((()=>[n(D,{class:c(["uni-datetime-picker-view",[b.hideSecond?"time-hide-second":""]]),"indicator-style":S.indicatorStyle,value:w.hms,onChange:w.bindTimeChange},{default:i((()=>[n(k,null,{default:i((()=>[(e(!0),f(g,null,m(w.hours,((a,s)=>(e(),t(v,{class:"uni-datetime-picker-item",key:s},{default:i((()=>[n(T,{class:"uni-datetime-picker-item"},{default:i((()=>[o(r(w.lessThanTen(a)),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),n(k,null,{default:i((()=>[(e(!0),f(g,null,m(w.minutes,((a,s)=>(e(),t(v,{class:"uni-datetime-picker-item",key:s},{default:i((()=>[n(T,{class:"uni-datetime-picker-item"},{default:i((()=>[o(r(w.lessThanTen(a)),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),b.hideSecond?s("",!0):(e(),t(k,{key:0},{default:i((()=>[(e(!0),f(g,null,m(w.seconds,((a,s)=>(e(),t(v,{class:"uni-datetime-picker-item",key:s},{default:i((()=>[n(T,{class:"uni-datetime-picker-item"},{default:i((()=>[o(r(w.lessThanTen(a)),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1}))])),_:1},8,["class","indicator-style","value","onChange"]),n(T,{class:c(["uni-datetime-picker-sign",[b.hideSecond?"sign-center":"sign-left"]])},{default:i((()=>[o(":")])),_:1},8,["class"]),b.hideSecond?s("",!0):(e(),t(T,{key:0,class:"uni-datetime-picker-sign sign-right"},{default:i((()=>[o(":")])),_:1}))])),_:1})):s("",!0),n(v,{class:"uni-datetime-picker-btn"},{default:i((()=>[n(v,{onClick:w.clearTime},{default:i((()=>[n(T,{class:"uni-datetime-picker-btn-text"},{default:i((()=>[o(r(w.clearText),1)])),_:1})])),_:1},8,["onClick"]),n(v,{class:"uni-datetime-picker-btn-group"},{default:i((()=>[n(v,{class:"uni-datetime-picker-cancel",onClick:w.tiggerTimePicker},{default:i((()=>[n(T,{class:"uni-datetime-picker-btn-text"},{default:i((()=>[o(r(w.cancelText),1)])),_:1})])),_:1},8,["onClick"]),n(v,{onClick:w.setTime},{default:i((()=>[n(T,{class:"uni-datetime-picker-btn-text"},{default:i((()=>[o(r(w.okText),1)])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["class","style"])):s("",!0)])),_:3})}],["__scopeId","data-v-c7b0802e"]]),{t:ke}=p(Se),De={components:{calendarItem:_e,timePicker:ve},props:{date:{type:String,default:""},defTime:{type:[String,Object],default:""},selectableTimes:{type:[Object],default:()=>({})},selected:{type:Array,default:()=>[]},startDate:{type:String,default:""},endDate:{type:String,default:""},startPlaceholder:{type:String,default:""},endPlaceholder:{type:String,default:""},range:{type:Boolean,default:!1},hasTime:{type:Boolean,default:!1},insert:{type:Boolean,default:!0},showMonth:{type:Boolean,default:!0},clearDate:{type:Boolean,default:!0},checkHover:{type:Boolean,default:!0},hideSecond:{type:[Boolean],default:!1},pleStatus:{type:Object,default:()=>({before:"",after:"",data:[],fulldate:""})},defaultValue:{type:[String,Object,Array],default:""}},data:()=>({show:!1,weeks:[],calendar:{},nowDate:{},aniMaskShow:!1,firstEnter:!0,time:"",timeRange:{startTime:"",endTime:""},tempSingleDate:"",tempRange:{before:"",after:""}}),watch:{date:{immediate:!0,handler(e){this.range||(this.tempSingleDate=e,setTimeout((()=>{this.init(e)}),100))}},defTime:{immediate:!0,handler(e){this.range?(this.timeRange.startTime=e.start,this.timeRange.endTime=e.end):this.time=e}},startDate(e){this.cale&&(this.cale.setStartDate(e),this.cale.setDate(this.nowDate.fullDate),this.weeks=this.cale.weeks)},endDate(e){this.cale&&(this.cale.setEndDate(e),this.cale.setDate(this.nowDate.fullDate),this.weeks=this.cale.weeks)},selected(e){this.cale&&(this.cale.setSelectInfo(this.nowDate.fullDate,e),this.weeks=this.cale.weeks)},pleStatus:{immediate:!0,handler(e){const{before:t,after:i,fulldate:a,which:n}=e;this.tempRange.before=t,this.tempRange.after=i,setTimeout((()=>{if(a)if(this.cale.setHoverMultiple(a),t&&i){if(this.cale.lastHover=!0,this.rangeWithinMonth(i,t))return;this.setDate(t)}else this.cale.setMultiple(a),this.setDate(this.nowDate.fullDate),this.calendar.fullDate="",this.cale.lastHover=!1;else{if(!this.cale)return;this.cale.setDefaultMultiple(t,i),"left"===n&&t?(this.setDate(t),this.weeks=this.cale.weeks):i&&(this.setDate(i),this.weeks=this.cale.weeks),this.cale.lastHover=!0}}),16)}}},computed:{timepickerStartTime(){return(this.range?this.tempRange.before:this.calendar.fullDate)===this.startDate?this.selectableTimes.start:""},timepickerEndTime(){return(this.range?this.tempRange.after:this.calendar.fullDate)===this.endDate?this.selectableTimes.end:""},selectDateText:()=>ke("uni-datetime-picker.selectDate"),startDateText(){return this.startPlaceholder||ke("uni-datetime-picker.startDate")},endDateText(){return this.endPlaceholder||ke("uni-datetime-picker.endDate")},okText:()=>ke("uni-datetime-picker.ok"),yearText:()=>ke("uni-datetime-picker.year"),monthText:()=>ke("uni-datetime-picker.month"),MONText:()=>ke("uni-calender.MON"),TUEText:()=>ke("uni-calender.TUE"),WEDText:()=>ke("uni-calender.WED"),THUText:()=>ke("uni-calender.THU"),FRIText:()=>ke("uni-calender.FRI"),SATText:()=>ke("uni-calender.SAT"),SUNText:()=>ke("uni-calender.SUN"),confirmText:()=>ke("uni-calender.confirm")},created(){this.cale=new class{constructor({selected:e,startDate:t,endDate:i,range:a}={}){this.date=this.getDateObj(new Date),this.selected=e||[],this.startDate=t,this.endDate=i,this.range=a,this.cleanMultipleStatus(),this.weeks={},this.lastHover=!1}setDate(e){const t=this.getDateObj(e);this.getWeeks(t.fullDate)}cleanMultipleStatus(){this.multipleStatus={before:"",after:"",data:[]}}setStartDate(e){this.startDate=e}setEndDate(e){this.endDate=e}getPreMonthObj(e){e=be(e);const t=(e=new Date(e)).getMonth();e.setMonth(t-1);const i=e.getMonth();return 0!==t&&i-t==0&&e.setMonth(i-1),this.getDateObj(e)}getNextMonthObj(e){e=be(e);const t=(e=new Date(e)).getMonth();e.setMonth(t+1);const i=e.getMonth();return i-t>1&&e.setMonth(i-1),this.getDateObj(e)}getDateObj(e){return e=be(e),{fullDate:ue(e=new Date(e)),year:e.getFullYear(),month:fe(e.getMonth()+1),date:fe(e.getDate()),day:e.getDay()}}getPreMonthDays(e,t){const i=[];for(let a=e-1;a>=0;a--){const e=t.month-1;i.push({date:new Date(t.year,e,-a).getDate(),month:e,disable:!0})}return i}getCurrentMonthDays(e,t){const i=[],a=this.date.fullDate;for(let n=1;n<=e;n++){const e=`${t.year}-${t.month}-${fe(n)}`,s=a===e,o=this.selected&&this.selected.find((t=>{if(this.dateEqual(e,t.date))return t}));this.startDate&&me(this.startDate,e),this.endDate&&me(e,this.endDate);let r=this.multipleStatus.data,l=-1;this.range&&r&&(l=r.findIndex((t=>this.dateEqual(t,e))));const c=-1!==l;i.push({fullDate:e,year:t.year,date:n,multiple:!!this.range&&c,beforeMultiple:this.isLogicBefore(e,this.multipleStatus.before,this.multipleStatus.after),afterMultiple:this.isLogicAfter(e,this.multipleStatus.before,this.multipleStatus.after),month:t.month,disable:this.startDate&&!me(this.startDate,e)||this.endDate&&!me(e,this.endDate),isToday:s,userChecked:!1,extraInfo:o})}return i}_getNextMonthDays(e,t){const i=[],a=t.month+1;for(let n=1;n<=e;n++)i.push({date:n,month:a,disable:!0});return i}getInfo(e){return e||(e=new Date),this.calendar.find((t=>t.fullDate===this.getDateObj(e).fullDate))}dateEqual(e,t){return e=new Date(be(e)),t=new Date(be(t)),e.valueOf()===t.valueOf()}isLogicBefore(e,t,i){let a=t;return t&&i&&(a=me(t,i)?t:i),this.dateEqual(a,e)}isLogicAfter(e,t,i){let a=i;return t&&i&&(a=me(t,i)?i:t),this.dateEqual(a,e)}geDateAll(e,t){var i=[],a=e.split("-"),n=t.split("-"),s=new Date;s.setFullYear(a[0],a[1]-1,a[2]);var o=new Date;o.setFullYear(n[0],n[1]-1,n[2]);for(var r=s.getTime()-864e5,l=o.getTime()-864e5,c=r;c<=l;)c+=864e5,i.push(this.getDateObj(new Date(parseInt(c))).fullDate);return i}setMultiple(e){if(!this.range)return;let{before:t,after:i}=this.multipleStatus;if(t&&i){if(!this.lastHover)return void(this.lastHover=!0);this.multipleStatus.before=e,this.multipleStatus.after="",this.multipleStatus.data=[],this.multipleStatus.fulldate="",this.lastHover=!1}else t?(this.multipleStatus.after=e,me(this.multipleStatus.before,this.multipleStatus.after)?this.multipleStatus.data=this.geDateAll(this.multipleStatus.before,this.multipleStatus.after):this.multipleStatus.data=this.geDateAll(this.multipleStatus.after,this.multipleStatus.before),this.lastHover=!0):(this.multipleStatus.before=e,this.multipleStatus.after=void 0,this.lastHover=!1);this.getWeeks(e)}setHoverMultiple(e){if(!this.range||this.lastHover)return;const{before:t}=this.multipleStatus;t?(this.multipleStatus.after=e,me(this.multipleStatus.before,this.multipleStatus.after)?this.multipleStatus.data=this.geDateAll(this.multipleStatus.before,this.multipleStatus.after):this.multipleStatus.data=this.geDateAll(this.multipleStatus.after,this.multipleStatus.before)):this.multipleStatus.before=e,this.getWeeks(e)}setDefaultMultiple(e,t){this.multipleStatus.before=e,this.multipleStatus.after=t,e&&t&&(me(e,t)?(this.multipleStatus.data=this.geDateAll(e,t),this.getWeeks(t)):(this.multipleStatus.data=this.geDateAll(t,e),this.getWeeks(e)))}getWeeks(e){const{year:t,month:i}=this.getDateObj(e),a=new Date(t,i-1,1).getDay(),n=this.getPreMonthDays(a,this.getDateObj(e)),s=new Date(t,i,0).getDate(),o=42-a-s,r=[...n,...this.getCurrentMonthDays(s,this.getDateObj(e)),...this._getNextMonthDays(o,this.getDateObj(e))],l=new Array(6);for(let c=0;c<r.length;c++){const e=Math.floor(c/7);l[e]||(l[e]=new Array(7)),l[e][c%7]=r[c]}this.calendar=r,this.weeks=l}}({selected:this.selected,startDate:this.startDate,endDate:this.endDate,range:this.range}),this.init(this.date)},methods:{leaveCale(){this.firstEnter=!0},handleMouse(e){if(e.disable)return;if(this.cale.lastHover)return;let{before:t,after:i}=this.cale.multipleStatus;t&&(this.calendar=e,this.cale.setHoverMultiple(this.calendar.fullDate),this.weeks=this.cale.weeks,this.firstEnter&&(this.$emit("firstEnterCale",this.cale.multipleStatus),this.firstEnter=!1))},rangeWithinMonth(e,t){const[i,a]=e.split("-"),[n,s]=t.split("-");return i===n&&a===s},maskClick(){this.close(),this.$emit("maskClose")},clearCalender(){this.range?(this.timeRange.startTime="",this.timeRange.endTime="",this.tempRange.before="",this.tempRange.after="",this.cale.multipleStatus.before="",this.cale.multipleStatus.after="",this.cale.multipleStatus.data=[],this.cale.lastHover=!1):(this.time="",this.tempSingleDate=""),this.calendar.fullDate="",this.setDate(new Date)},bindDateChange(e){const t=e.detail.value+"-1";this.setDate(t)},init(e){if(this.cale&&(this.cale.setDate(e||new Date),this.weeks=this.cale.weeks,this.nowDate=this.cale.getInfo(e),this.calendar={...this.nowDate},!e&&(this.calendar.fullDate="",this.defaultValue&&!this.range))){const e=new Date(this.defaultValue),t=ue(e),i=e.getFullYear(),a=e.getMonth()+1,n=e.getDate(),s=e.getDay();this.calendar={fullDate:t,year:i,month:a,date:n,day:s},this.tempSingleDate=t,this.time=pe(e,this.hideSecond)}},open(){this.clearDate&&!this.insert&&(this.cale.cleanMultipleStatus(),this.init(this.date)),this.show=!0,this.$nextTick((()=>{setTimeout((()=>{this.aniMaskShow=!0}),50)}))},close(){this.aniMaskShow=!1,this.$nextTick((()=>{setTimeout((()=>{this.show=!1,this.$emit("close")}),300)}))},confirm(){this.setEmit("confirm"),this.close()},change(){this.insert&&this.setEmit("change")},monthSwitch(){let{year:e,month:t}=this.nowDate;this.$emit("monthSwitch",{year:e,month:Number(t)})},setEmit(e){this.range||(this.calendar.fullDate||(this.calendar=this.cale.getInfo(new Date),this.tempSingleDate=this.calendar.fullDate),this.hasTime&&!this.time&&(this.time=pe(new Date,this.hideSecond)));let{year:t,month:i,date:a,fullDate:n,extraInfo:s}=this.calendar;this.$emit(e,{range:this.cale.multipleStatus,year:t,month:i,date:a,time:this.time,timeRange:this.timeRange,fulldate:n,extraInfo:s||{}})},choiceDate(e){if(e.disable)return;this.calendar=e,this.calendar.userChecked=!0,this.cale.setMultiple(this.calendar.fullDate,!0),this.weeks=this.cale.weeks,this.tempSingleDate=this.calendar.fullDate;const t=new Date(this.cale.multipleStatus.before).getTime(),i=new Date(this.cale.multipleStatus.after).getTime();t>i&&i?(this.tempRange.before=this.cale.multipleStatus.after,this.tempRange.after=this.cale.multipleStatus.before):(this.tempRange.before=this.cale.multipleStatus.before,this.tempRange.after=this.cale.multipleStatus.after),this.change()},changeMonth(e){let t;"pre"===e?t=this.cale.getPreMonthObj(this.nowDate.fullDate).fullDate:"next"===e&&(t=this.cale.getNextMonthObj(this.nowDate.fullDate).fullDate),this.setDate(t),this.monthSwitch()},setDate(e){this.cale.setDate(e),this.weeks=this.cale.weeks,this.nowDate=this.cale.getInfo(e)}}};const Ae={name:"UniDatetimePicker",options:{virtualHost:!0},components:{Calendar:oe(De,[["render",function(a,l,h,p,x,y){const T=d,v=u,k=w,D=b("calendar-item"),A=b("time-picker"),C=le(_("uni-icons"),he);return e(),t(T,{class:"uni-calendar",onMouseleave:y.leaveCale},{default:i((()=>[!h.insert&&x.show?(e(),t(T,{key:0,class:c(["uni-calendar__mask",{"uni-calendar--mask-show":x.aniMaskShow}]),onClick:y.maskClick},null,8,["class","onClick"])):s("",!0),h.insert||x.show?(e(),t(T,{key:1,class:c(["uni-calendar__content",{"uni-calendar--fixed":!h.insert,"uni-calendar--ani-show":x.aniMaskShow,"uni-calendar__content-mobile":x.aniMaskShow}])},{default:i((()=>[n(T,{class:c(["uni-calendar__header",{"uni-calendar__header-mobile":!h.insert}])},{default:i((()=>[n(T,{class:"uni-calendar__header-btn-box",onClick:l[0]||(l[0]=S((e=>y.changeMonth("pre")),["stop"]))},{default:i((()=>[n(T,{class:"uni-calendar__header-btn uni-calendar--left"})])),_:1}),n(k,{mode:"date",value:h.date,fields:"month",onChange:y.bindDateChange},{default:i((()=>[n(v,{class:"uni-calendar__header-text"},{default:i((()=>[o(r((x.nowDate.year||"")+y.yearText+(x.nowDate.month||"")+y.monthText),1)])),_:1})])),_:1},8,["value","onChange"]),n(T,{class:"uni-calendar__header-btn-box",onClick:l[1]||(l[1]=S((e=>y.changeMonth("next")),["stop"]))},{default:i((()=>[n(T,{class:"uni-calendar__header-btn uni-calendar--right"})])),_:1}),h.insert?s("",!0):(e(),t(T,{key:0,class:"dialog-close",onClick:y.maskClick},{default:i((()=>[n(T,{class:"dialog-close-plus","data-id":"close"}),n(T,{class:"dialog-close-plus dialog-close-rotate","data-id":"close"})])),_:1},8,["onClick"]))])),_:1},8,["class"]),n(T,{class:"uni-calendar__box"},{default:i((()=>[h.showMonth?(e(),t(T,{key:0,class:"uni-calendar__box-bg"},{default:i((()=>[n(v,{class:"uni-calendar__box-bg-text"},{default:i((()=>[o(r(x.nowDate.month),1)])),_:1})])),_:1})):s("",!0),n(T,{class:"uni-calendar__weeks",style:{"padding-bottom":"7px"}},{default:i((()=>[n(T,{class:"uni-calendar__weeks-day"},{default:i((()=>[n(v,{class:"uni-calendar__weeks-day-text"},{default:i((()=>[o(r(y.SUNText),1)])),_:1})])),_:1}),n(T,{class:"uni-calendar__weeks-day"},{default:i((()=>[n(v,{class:"uni-calendar__weeks-day-text"},{default:i((()=>[o(r(y.MONText),1)])),_:1})])),_:1}),n(T,{class:"uni-calendar__weeks-day"},{default:i((()=>[n(v,{class:"uni-calendar__weeks-day-text"},{default:i((()=>[o(r(y.TUEText),1)])),_:1})])),_:1}),n(T,{class:"uni-calendar__weeks-day"},{default:i((()=>[n(v,{class:"uni-calendar__weeks-day-text"},{default:i((()=>[o(r(y.WEDText),1)])),_:1})])),_:1}),n(T,{class:"uni-calendar__weeks-day"},{default:i((()=>[n(v,{class:"uni-calendar__weeks-day-text"},{default:i((()=>[o(r(y.THUText),1)])),_:1})])),_:1}),n(T,{class:"uni-calendar__weeks-day"},{default:i((()=>[n(v,{class:"uni-calendar__weeks-day-text"},{default:i((()=>[o(r(y.FRIText),1)])),_:1})])),_:1}),n(T,{class:"uni-calendar__weeks-day"},{default:i((()=>[n(v,{class:"uni-calendar__weeks-day-text"},{default:i((()=>[o(r(y.SATText),1)])),_:1})])),_:1})])),_:1}),(e(!0),f(g,null,m(x.weeks,((a,s)=>(e(),t(T,{class:"uni-calendar__weeks",key:s},{default:i((()=>[(e(!0),f(g,null,m(a,((a,s)=>(e(),t(T,{class:"uni-calendar__weeks-item",key:s},{default:i((()=>[n(D,{class:"uni-calendar-item--hook",weeks:a,calendar:x.calendar,selected:h.selected,checkHover:h.range,onChange:y.choiceDate,onHandleMouse:y.handleMouse},null,8,["weeks","calendar","selected","checkHover","onChange","onHandleMouse"])])),_:2},1024)))),128))])),_:2},1024)))),128))])),_:1}),h.insert||h.range||!h.hasTime?s("",!0):(e(),t(T,{key:0,class:"uni-date-changed uni-calendar--fixed-top",style:{padding:"0 80px"}},{default:i((()=>[n(T,{class:"uni-date-changed--time-date"},{default:i((()=>[o(r(x.tempSingleDate?x.tempSingleDate:y.selectDateText),1)])),_:1}),n(A,{type:"time",start:y.timepickerStartTime,end:y.timepickerEndTime,modelValue:x.time,"onUpdate:modelValue":l[2]||(l[2]=e=>x.time=e),disabled:!x.tempSingleDate,border:!1,"hide-second":h.hideSecond,class:"time-picker-style"},null,8,["start","end","modelValue","disabled","hide-second"])])),_:1})),!h.insert&&h.range&&h.hasTime?(e(),t(T,{key:1,class:"uni-date-changed uni-calendar--fixed-top"},{default:i((()=>[n(T,{class:"uni-date-changed--time-start"},{default:i((()=>[n(T,{class:"uni-date-changed--time-date"},{default:i((()=>[o(r(x.tempRange.before?x.tempRange.before:y.startDateText),1)])),_:1}),n(A,{type:"time",start:y.timepickerStartTime,modelValue:x.timeRange.startTime,"onUpdate:modelValue":l[3]||(l[3]=e=>x.timeRange.startTime=e),border:!1,"hide-second":h.hideSecond,disabled:!x.tempRange.before,class:"time-picker-style"},null,8,["start","modelValue","hide-second","disabled"])])),_:1}),n(T,{style:{"line-height":"50px"}},{default:i((()=>[n(C,{type:"arrowthinright",color:"#999"})])),_:1}),n(T,{class:"uni-date-changed--time-end"},{default:i((()=>[n(T,{class:"uni-date-changed--time-date"},{default:i((()=>[o(r(x.tempRange.after?x.tempRange.after:y.endDateText),1)])),_:1}),n(A,{type:"time",end:y.timepickerEndTime,modelValue:x.timeRange.endTime,"onUpdate:modelValue":l[4]||(l[4]=e=>x.timeRange.endTime=e),border:!1,"hide-second":h.hideSecond,disabled:!x.tempRange.after,class:"time-picker-style"},null,8,["end","modelValue","hide-second","disabled"])])),_:1})])),_:1})):s("",!0),h.insert?s("",!0):(e(),t(T,{key:2,class:"uni-date-changed uni-date-btn--ok"},{default:i((()=>[n(T,{class:"uni-datetime-picker--btn",onClick:y.confirm},{default:i((()=>[o(r(y.confirmText),1)])),_:1},8,["onClick"])])),_:1}))])),_:1},8,["class"])):s("",!0)])),_:1},8,["onMouseleave"])}],["__scopeId","data-v-f03ac212"]]),TimePicker:ve},data:()=>({isRange:!1,hasTime:!1,displayValue:"",inputDate:"",calendarDate:"",pickerTime:"",calendarRange:{startDate:"",startTime:"",endDate:"",endTime:""},displayRangeValue:{startDate:"",endDate:""},tempRange:{startDate:"",startTime:"",endDate:"",endTime:""},startMultipleStatus:{before:"",after:"",data:[],fulldate:""},endMultipleStatus:{before:"",after:"",data:[],fulldate:""},pickerVisible:!1,pickerPositionStyle:null,isEmitValue:!1,isPhone:!1,isFirstShow:!0,i18nT:()=>{}}),props:{type:{type:String,default:"datetime"},value:{type:[String,Number,Array,Date],default:""},modelValue:{type:[String,Number,Array,Date],default:""},start:{type:[Number,String],default:""},end:{type:[Number,String],default:""},returnType:{type:String,default:"string"},placeholder:{type:String,default:""},startPlaceholder:{type:String,default:""},endPlaceholder:{type:String,default:""},rangeSeparator:{type:String,default:"-"},border:{type:[Boolean],default:!0},disabled:{type:[Boolean],default:!1},clearIcon:{type:[Boolean],default:!0},hideSecond:{type:[Boolean],default:!1},defaultValue:{type:[String,Object,Array],default:""}},watch:{type:{immediate:!0,handler(e){this.hasTime=-1!==e.indexOf("time"),this.isRange=-1!==e.indexOf("range")}},modelValue:{immediate:!0,handler(e){this.isEmitValue?this.isEmitValue=!1:this.initPicker(e)}},start:{immediate:!0,handler(e){e&&(this.calendarRange.startDate=ue(e),this.hasTime&&(this.calendarRange.startTime=pe(e)))}},end:{immediate:!0,handler(e){e&&(this.calendarRange.endDate=ue(e),this.hasTime&&(this.calendarRange.endTime=pe(e,this.hideSecond)))}}},computed:{timepickerStartTime(){return(this.isRange?this.tempRange.startDate:this.inputDate)===this.calendarRange.startDate?this.calendarRange.startTime:""},timepickerEndTime(){return(this.isRange?this.tempRange.endDate:this.inputDate)===this.calendarRange.endDate?this.calendarRange.endTime:""},mobileCalendarTime(){const e={start:this.tempRange.startTime,end:this.tempRange.endTime};return this.isRange?e:this.pickerTime},mobSelectableTime(){return{start:this.calendarRange.startTime,end:this.calendarRange.endTime}},datePopupWidth(){return this.isRange?653:301},singlePlaceholderText(){return this.placeholder||("date"===this.type?this.selectDateText:this.selectDateTimeText)},startPlaceholderText(){return this.startPlaceholder||this.startDateText},endPlaceholderText(){return this.endPlaceholder||this.endDateText},selectDateText(){return this.i18nT("uni-datetime-picker.selectDate")},selectDateTimeText(){return this.i18nT("uni-datetime-picker.selectDateTime")},selectTimeText(){return this.i18nT("uni-datetime-picker.selectTime")},startDateText(){return this.startPlaceholder||this.i18nT("uni-datetime-picker.startDate")},startTimeText(){return this.i18nT("uni-datetime-picker.startTime")},endDateText(){return this.endPlaceholder||this.i18nT("uni-datetime-picker.endDate")},endTimeText(){return this.i18nT("uni-datetime-picker.endTime")},okText(){return this.i18nT("uni-datetime-picker.ok")},clearText(){return this.i18nT("uni-datetime-picker.clear")},showClearIcon(){return this.clearIcon&&!this.disabled&&(this.displayValue||this.displayRangeValue.startDate&&this.displayRangeValue.endDate)}},created(){this.initI18nT(),this.platform()},methods:{initI18nT(){const e=p(Se);this.i18nT=e.t},initPicker(e){if(!e&&!this.defaultValue||Array.isArray(e)&&!e.length)this.$nextTick((()=>{this.clear(!1)}));else if(Array.isArray(e)||this.isRange){const[t,i]=e;if(!t&&!i)return;const a=ue(t),n=pe(t,this.hideSecond),s=ue(i),o=pe(i,this.hideSecond),r=a,l=s;this.displayRangeValue.startDate=this.tempRange.startDate=r,this.displayRangeValue.endDate=this.tempRange.endDate=l,this.hasTime&&(this.displayRangeValue.startDate=`${a} ${n}`,this.displayRangeValue.endDate=`${s} ${o}`,this.tempRange.startTime=n,this.tempRange.endTime=o);const c={before:a,after:s};this.startMultipleStatus=Object.assign({},this.startMultipleStatus,c,{which:"right"}),this.endMultipleStatus=Object.assign({},this.endMultipleStatus,c,{which:"left"})}else e?(this.displayValue=this.inputDate=this.calendarDate=ue(e),this.hasTime&&(this.pickerTime=pe(e,this.hideSecond),this.displayValue=`${this.displayValue} ${this.pickerTime}`)):this.defaultValue&&(this.inputDate=this.calendarDate=ue(this.defaultValue),this.hasTime&&(this.pickerTime=pe(this.defaultValue,this.hideSecond)))},updateLeftCale(e){const t=this.$refs.left;t.cale.setHoverMultiple(e.after),t.setDate(this.$refs.left.nowDate.fullDate)},updateRightCale(e){const t=this.$refs.right;t.cale.setHoverMultiple(e.after),t.setDate(this.$refs.right.nowDate.fullDate)},platform(){if("undefined"!=typeof navigator)return void(this.isPhone=-1!==navigator.userAgent.toLowerCase().indexOf("mobile"));const{windowWidth:e}=T();this.isPhone=e<=500,this.windowWidth=e},show(){if(this.$emit("show"),this.disabled)return;if(this.platform(),this.isPhone)return void setTimeout((()=>{this.$refs.mobile.open()}),0);this.pickerPositionStyle={top:"10px"};v().in(this).select(".uni-date-editor").boundingClientRect((e=>{this.windowWidth-e.left<this.datePopupWidth&&(this.pickerPositionStyle.right=0)})).exec(),setTimeout((()=>{if(this.pickerVisible=!this.pickerVisible,!this.isPhone&&this.isRange&&this.isFirstShow){this.isFirstShow=!1;const{startDate:e,endDate:t}=this.calendarRange;e&&t?this.diffDate(e,t)<30&&this.$refs.right.changeMonth("pre"):this.isPhone&&(this.$refs.right.cale.lastHover=!1)}}),50)},close(){setTimeout((()=>{this.pickerVisible=!1,this.$emit("maskClick",this.value),this.$refs.mobile&&this.$refs.mobile.close()}),20)},setEmit(e){"timestamp"!==this.returnType&&"date"!==this.returnType||(Array.isArray(e)?(this.hasTime||(e[0]=e[0]+" 00:00:00",e[1]=e[1]+" 00:00:00"),e[0]=this.createTimestamp(e[0]),e[1]=this.createTimestamp(e[1]),"date"===this.returnType&&(e[0]=new Date(e[0]),e[1]=new Date(e[1]))):(this.hasTime||(e+=" 00:00:00"),e=this.createTimestamp(e),"date"===this.returnType&&(e=new Date(e)))),this.$emit("update:modelValue",e),this.$emit("input",e),this.$emit("change",e),this.isEmitValue=!0},createTimestamp:e=>(e=be(e),Date.parse(new Date(e))),singleChange(e){this.calendarDate=this.inputDate=e.fulldate,this.hasTime||this.confirmSingleChange()},confirmSingleChange(){if(!xe(this.inputDate)){const e=new Date;this.calendarDate=this.inputDate=ue(e),this.pickerTime=pe(e,this.hideSecond)}let e,t,i=!1;if(this.start){let a=this.start;"number"==typeof this.start&&(a=de(this.start,this.hideSecond)),[e,t]=a.split(" "),this.start&&!me(e,this.inputDate)&&(i=!0,this.inputDate=e)}let a,n,s=!1;if(this.end){let e=this.end;"number"==typeof this.end&&(e=de(this.end,this.hideSecond)),[a,n]=e.split(" "),this.end&&!me(this.inputDate,a)&&(s=!0,this.inputDate=a)}this.hasTime?(i&&(this.pickerTime=t||ge(this.hideSecond)),s&&(this.pickerTime=n||ge(this.hideSecond)),this.pickerTime||(this.pickerTime=pe(Date.now(),this.hideSecond)),this.displayValue=`${this.inputDate} ${this.pickerTime}`):this.displayValue=this.inputDate,this.setEmit(this.displayValue),this.pickerVisible=!1},leftChange(e){const{before:t,after:i}=e.range;this.rangeChange(t,i);const a={before:e.range.before,after:e.range.after,data:e.range.data,fulldate:e.fulldate};this.startMultipleStatus=Object.assign({},this.startMultipleStatus,a)},rightChange(e){const{before:t,after:i}=e.range;this.rangeChange(t,i);const a={before:e.range.before,after:e.range.after,data:e.range.data,fulldate:e.fulldate};this.endMultipleStatus=Object.assign({},this.endMultipleStatus,a)},mobileChange(e){if(this.isRange){const{before:t,after:i}=e.range;if(!t)return;if(this.handleStartAndEnd(t,i,!0),this.hasTime){const{startTime:t,endTime:i}=e.timeRange;this.tempRange.startTime=t,this.tempRange.endTime=i}this.confirmRangeChange()}else this.hasTime?this.displayValue=e.fulldate+" "+e.time:this.displayValue=e.fulldate,this.setEmit(this.displayValue);this.$refs.mobile.close()},rangeChange(e,t){e&&t&&(this.handleStartAndEnd(e,t,!0),this.hasTime||this.confirmRangeChange())},confirmRangeChange(){if(!this.tempRange.startDate||!this.tempRange.endDate)return void(this.pickerVisible=!1);let e,t;xe(this.tempRange.startDate)||(this.tempRange.startDate=ue(Date.now())),xe(this.tempRange.endDate)||(this.tempRange.endDate=ue(Date.now()));let i,a,n=!1,s=!1;if(this.start){let e=this.start;"number"==typeof this.start&&(e=de(this.start,this.hideSecond)),[i,a]=e.split(" "),this.start&&!me(this.start,this.tempRange.startDate)&&(n=!0,this.tempRange.startDate=i),this.start&&!me(this.start,this.tempRange.endDate)&&(s=!0,this.tempRange.endDate=i)}let o,r,l=!1,c=!1;if(this.end){let e=this.end;"number"==typeof this.end&&(e=de(this.end,this.hideSecond)),[o,r]=e.split(" "),this.end&&!me(this.tempRange.startDate,this.end)&&(l=!0,this.tempRange.startDate=o),this.end&&!me(this.tempRange.endDate,this.end)&&(c=!0,this.tempRange.endDate=o)}this.hasTime?(n?this.tempRange.startTime=a||ge(this.hideSecond):l&&(this.tempRange.startTime=r||ge(this.hideSecond)),this.tempRange.startTime||(this.tempRange.startTime=pe(Date.now(),this.hideSecond)),s?this.tempRange.endTime=a||ge(this.hideSecond):c&&(this.tempRange.endTime=r||ge(this.hideSecond)),this.tempRange.endTime||(this.tempRange.endTime=pe(Date.now(),this.hideSecond)),e=this.displayRangeValue.startDate=`${this.tempRange.startDate} ${this.tempRange.startTime}`,t=this.displayRangeValue.endDate=`${this.tempRange.endDate} ${this.tempRange.endTime}`):(e=this.displayRangeValue.startDate=this.tempRange.startDate,t=this.displayRangeValue.endDate=this.tempRange.endDate),me(e,t)||([e,t]=[t,e]),this.displayRangeValue.startDate=e,this.displayRangeValue.endDate=t;const h=[e,t];this.setEmit(h),this.pickerVisible=!1},handleStartAndEnd(e,t,i=!1){if(!e)return;t||(t=e);const a=i?"tempRange":"range",n=me(e,t);this[a].startDate=n?e:t,this[a].endDate=n?t:e},dateCompare:(e,t)=>(e=new Date(e.replace("-","/").replace("-","/")))<=(t=new Date(t.replace("-","/").replace("-","/"))),diffDate(e,t){e=new Date(e.replace("-","/").replace("-","/"));const i=((t=new Date(t.replace("-","/").replace("-","/")))-e)/864e5;return Math.abs(i)},clear(e=!0){this.isRange?(this.displayRangeValue.startDate="",this.displayRangeValue.endDate="",this.tempRange.startDate="",this.tempRange.startTime="",this.tempRange.endDate="",this.tempRange.endTime="",this.isPhone?this.$refs.mobile&&this.$refs.mobile.clearCalender():(this.$refs.left&&this.$refs.left.clearCalender(),this.$refs.right&&this.$refs.right.clearCalender(),this.$refs.right&&this.$refs.right.changeMonth("next")),e&&(this.$emit("change",[]),this.$emit("input",[]),this.$emit("update:modelValue",[]))):(this.displayValue="",this.inputDate="",this.pickerTime="",this.isPhone?this.$refs.mobile&&this.$refs.mobile.clearCalender():this.$refs.pcSingle&&this.$refs.pcSingle.clearCalender(),e&&(this.$emit("change",""),this.$emit("input",""),this.$emit("update:modelValue","")))}}};const Ce=oe(Ae,[["render",function(h,p,f,g,m,x){const y=le(_("uni-icons"),he),w=d,T=A,v=b("time-picker"),C=b("Calendar"),P=u;return e(),t(w,{class:"uni-date"},{default:i((()=>[n(w,{class:"uni-date-editor",onClick:x.show},{default:i((()=>[a(h.$slots,"default",{},(()=>[n(w,{class:c(["uni-date-editor--x",{"uni-date-editor--x__disabled":f.disabled,"uni-date-x--border":f.border}])},{default:i((()=>[m.isRange?(e(),t(w,{key:1,class:"uni-date-x uni-date-range"},{default:i((()=>[n(y,{class:"icon-calendar",type:"calendar",color:"#c0c4cc",size:"22"}),n(w,{class:"uni-date__x-input text-center"},{default:i((()=>[o(r(m.displayRangeValue.startDate||x.startPlaceholderText),1)])),_:1}),n(w,{class:"range-separator"},{default:i((()=>[o(r(f.rangeSeparator),1)])),_:1}),n(w,{class:"uni-date__x-input text-center"},{default:i((()=>[o(r(m.displayRangeValue.endDate||x.endPlaceholderText),1)])),_:1})])),_:1})):(e(),t(w,{key:0,class:"uni-date-x uni-date-single"},{default:i((()=>[n(y,{class:"icon-calendar",type:"calendar",color:"#c0c4cc",size:"22"}),n(w,{class:"uni-date__x-input"},{default:i((()=>[o(r(m.displayValue||x.singlePlaceholderText),1)])),_:1})])),_:1})),x.showClearIcon?(e(),t(w,{key:2,class:"uni-date__icon-clear",onClick:S(x.clear,["stop"])},{default:i((()=>[n(y,{type:"clear",color:"#c0c4cc",size:"22"})])),_:1},8,["onClick"])):s("",!0)])),_:1},8,["class"])]),!0)])),_:3},8,["onClick"]),k(n(w,{class:"uni-date-mask--pc",onClick:x.close},null,8,["onClick"]),[[D,m.pickerVisible]]),m.isPhone?s("",!0):k((e(),t(w,{key:0,ref:"datePicker",class:"uni-date-picker__container"},{default:i((()=>[m.isRange?(e(),t(w,{key:1,class:"uni-date-range--x",style:l(m.pickerPositionStyle)},{default:i((()=>[n(w,{class:"uni-popper__arrow"}),m.hasTime?(e(),t(w,{key:0,class:"popup-x-header uni-date-changed"},{default:i((()=>[n(w,{class:"popup-x-header--datetime"},{default:i((()=>[n(T,{class:"uni-date__input uni-date-range__input",type:"text",modelValue:m.tempRange.startDate,"onUpdate:modelValue":p[3]||(p[3]=e=>m.tempRange.startDate=e),placeholder:x.startDateText},null,8,["modelValue","placeholder"]),n(v,{type:"time",modelValue:m.tempRange.startTime,"onUpdate:modelValue":p[5]||(p[5]=e=>m.tempRange.startTime=e),start:x.timepickerStartTime,border:!1,disabled:!m.tempRange.startDate,hideSecond:f.hideSecond},{default:i((()=>[n(T,{class:"uni-date__input uni-date-range__input",type:"text",modelValue:m.tempRange.startTime,"onUpdate:modelValue":p[4]||(p[4]=e=>m.tempRange.startTime=e),placeholder:x.startTimeText,disabled:!m.tempRange.startDate},null,8,["modelValue","placeholder","disabled"])])),_:1},8,["modelValue","start","disabled","hideSecond"])])),_:1}),n(y,{type:"arrowthinright",color:"#999",style:{"line-height":"40px"}}),n(w,{class:"popup-x-header--datetime"},{default:i((()=>[n(T,{class:"uni-date__input uni-date-range__input",type:"text",modelValue:m.tempRange.endDate,"onUpdate:modelValue":p[6]||(p[6]=e=>m.tempRange.endDate=e),placeholder:x.endDateText},null,8,["modelValue","placeholder"]),n(v,{type:"time",modelValue:m.tempRange.endTime,"onUpdate:modelValue":p[8]||(p[8]=e=>m.tempRange.endTime=e),end:x.timepickerEndTime,border:!1,disabled:!m.tempRange.endDate,hideSecond:f.hideSecond},{default:i((()=>[n(T,{class:"uni-date__input uni-date-range__input",type:"text",modelValue:m.tempRange.endTime,"onUpdate:modelValue":p[7]||(p[7]=e=>m.tempRange.endTime=e),placeholder:x.endTimeText,disabled:!m.tempRange.endDate},null,8,["modelValue","placeholder","disabled"])])),_:1},8,["modelValue","end","disabled","hideSecond"])])),_:1})])),_:1})):s("",!0),n(w,{class:"popup-x-body"},{default:i((()=>[n(C,{ref:"left",showMonth:!1,"start-date":m.calendarRange.startDate,"end-date":m.calendarRange.endDate,range:!0,pleStatus:m.endMultipleStatus,onChange:x.leftChange,onFirstEnterCale:x.updateRightCale,style:{padding:"0 8px"}},null,8,["start-date","end-date","pleStatus","onChange","onFirstEnterCale"]),n(C,{ref:"right",showMonth:!1,"start-date":m.calendarRange.startDate,"end-date":m.calendarRange.endDate,range:!0,onChange:x.rightChange,pleStatus:m.startMultipleStatus,onFirstEnterCale:x.updateLeftCale,style:{padding:"0 8px","border-left":"1px solid #F1F1F1"}},null,8,["start-date","end-date","onChange","pleStatus","onFirstEnterCale"])])),_:1}),m.hasTime?(e(),t(w,{key:1,class:"popup-x-footer"},{default:i((()=>[n(P,{onClick:x.clear},{default:i((()=>[o(r(x.clearText),1)])),_:1},8,["onClick"]),n(P,{class:"confirm-text",onClick:x.confirmRangeChange},{default:i((()=>[o(r(x.okText),1)])),_:1},8,["onClick"])])),_:1})):s("",!0)])),_:1},8,["style"])):(e(),t(w,{key:0,class:"uni-date-single--x",style:l(m.pickerPositionStyle)},{default:i((()=>[n(w,{class:"uni-popper__arrow"}),m.hasTime?(e(),t(w,{key:0,class:"uni-date-changed popup-x-header"},{default:i((()=>[n(T,{class:"uni-date__input text-center",type:"text",modelValue:m.inputDate,"onUpdate:modelValue":p[0]||(p[0]=e=>m.inputDate=e),placeholder:x.selectDateText},null,8,["modelValue","placeholder"]),n(v,{type:"time",modelValue:m.pickerTime,"onUpdate:modelValue":p[2]||(p[2]=e=>m.pickerTime=e),border:!1,disabled:!m.inputDate,start:x.timepickerStartTime,end:x.timepickerEndTime,hideSecond:f.hideSecond,style:{width:"100%"}},{default:i((()=>[n(T,{class:"uni-date__input text-center",type:"text",modelValue:m.pickerTime,"onUpdate:modelValue":p[1]||(p[1]=e=>m.pickerTime=e),placeholder:x.selectTimeText,disabled:!m.inputDate},null,8,["modelValue","placeholder","disabled"])])),_:1},8,["modelValue","disabled","start","end","hideSecond"])])),_:1})):s("",!0),n(C,{ref:"pcSingle",showMonth:!1,"start-date":m.calendarRange.startDate,"end-date":m.calendarRange.endDate,date:m.calendarDate,onChange:x.singleChange,"default-value":f.defaultValue,style:{padding:"0 8px"}},null,8,["start-date","end-date","date","onChange","default-value"]),m.hasTime?(e(),t(w,{key:1,class:"popup-x-footer"},{default:i((()=>[n(P,{class:"confirm-text",onClick:x.confirmSingleChange},{default:i((()=>[o(r(x.okText),1)])),_:1},8,["onClick"])])),_:1})):s("",!0)])),_:1},8,["style"]))])),_:1},512)),[[D,m.pickerVisible]]),m.isPhone?(e(),t(C,{key:1,ref:"mobile",clearDate:!1,date:m.calendarDate,defTime:x.mobileCalendarTime,"start-date":m.calendarRange.startDate,"end-date":m.calendarRange.endDate,selectableTimes:x.mobSelectableTime,startPlaceholder:f.startPlaceholder,endPlaceholder:f.endPlaceholder,"default-value":f.defaultValue,pleStatus:m.endMultipleStatus,showMonth:!1,range:m.isRange,hasTime:m.hasTime,insert:!1,hideSecond:f.hideSecond,onConfirm:x.mobileChange,onMaskClose:x.close},null,8,["date","defTime","start-date","end-date","selectableTimes","startPlaceholder","endPlaceholder","default-value","pleStatus","range","hasTime","hideSecond","onConfirm","onMaskClose"])):s("",!0)])),_:3})}],["__scopeId","data-v-f349373b"]]);const Pe=oe({name:"TableCheckbox",emits:["checkboxSelected"],props:{indeterminate:{type:Boolean,default:!1},checked:{type:[Boolean,String],default:!1},disabled:{type:Boolean,default:!1},index:{type:Number,default:-1},cellData:{type:Object,default:()=>({})}},watch:{checked(e){"boolean"==typeof this.checked?this.isChecked=e:this.isChecked=!0},indeterminate(e){this.isIndeterminate=e}},data:()=>({isChecked:!1,isDisabled:!1,isIndeterminate:!1}),created(){"boolean"==typeof this.checked&&(this.isChecked=this.checked),this.isDisabled=this.disabled},methods:{selected(){this.isDisabled||(this.isIndeterminate=!1,this.isChecked=!this.isChecked,this.$emit("checkboxSelected",{checked:this.isChecked,data:this.cellData}))}}},[["render",function(a,s,o,r,l,h){const u=d;return e(),t(u,{class:"uni-table-checkbox",onClick:h.selected},{default:i((()=>[o.indeterminate?(e(),t(u,{key:1,class:"checkbox__inner checkbox--indeterminate"},{default:i((()=>[n(u,{class:"checkbox__inner-icon"})])),_:1})):(e(),t(u,{key:0,class:c(["checkbox__inner",{"is-checked":l.isChecked,"is-disable":l.isDisabled}])},{default:i((()=>[n(u,{class:"checkbox__inner-icon"})])),_:1},8,["class"]))])),_:1},8,["onClick"])}],["__scopeId","data-v-ff0fdce7"]]),Me={reset:"重置",search:"搜索",submit:"确定",filter:"筛选",gt:"大于等于",lt:"小于等于",date:"日期范围"},Ie="select",Fe="search",Le="range",Re="date",Oe="timestamp",Ee={name:"FilterDropdown",emits:["change"],components:{checkBox:Pe},options:{virtualHost:!0},props:{filterType:{type:String,default:Ie},filterData:{type:Array,default:()=>[]},mode:{type:String,default:"default"},map:{type:Object,default:()=>({text:"text",value:"value"})},filterDefaultValue:{type:[Array,String],default:()=>""}},computed:{canReset(){return this.isSearch?this.filterValue.length>0:this.isSelect?this.checkedValues.length>0:this.isRange?this.gtValue.length>0&&this.ltValue.length>0:!!this.isDate&&this.dateSelect.length>0},isSelect(){return this.filterType===Ie},isSearch(){return this.filterType===Fe},isRange(){return this.filterType===Le},isDate(){return this.filterType===Re||this.filterType===Oe}},watch:{filterData(e){this._copyFilters()},indeterminate(e){this.isIndeterminate=e}},data(){return{resource:Me,enabled:!0,isOpened:!1,dataList:[],filterValue:this.filterDefaultValue,checkedValues:[],gtValue:"",ltValue:"",dateRange:[],dateSelect:[]}},created(){this._copyFilters()},methods:{_copyFilters(){let e=JSON.parse(JSON.stringify(this.filterData));for(let t=0;t<e.length;t++)void 0===e[t].checked&&(e[t].checked=!1);this.dataList=e},openPopup(){this.isOpened=!0,this.isDate&&this.$nextTick((()=>{this.dateRange.length||this.resetDate(),this.$refs.datetimepicker.show()}))},closePopup(){this.isOpened=!1},handleClose(e){this.closePopup()},resetDate(){let e=(new Date).toISOString().split("T")[0];this.dateRange=[e+" 0:00:00",e+" 23:59:59"]},onDropdown(e){this.openPopup()},onItemClick(e,t){let i=this.dataList,a=i[t];void 0===a.checked?i[t].checked=!0:i[t].checked=!a.checked;let n=[];for(let s=0;s<i.length;s++){const e=i[s];e.checked&&n.push(e.value)}this.checkedValues=n},datetimechange(e){this.closePopup(),this.dateRange=e,this.dateSelect=e,this.$emit("change",{filterType:this.filterType,filter:e})},timepickerclose(e){this.closePopup()},handleSelectSubmit(){this.closePopup(),this.$emit("change",{filterType:this.filterType,filter:this.checkedValues})},handleSelectReset(){if(this.canReset){var e=this.dataList;for(let t=0;t<e.length;t++){let i=e[t];this.$set(i,"checked",!1)}this.checkedValues=[],this.handleSelectSubmit()}},handleSearchSubmit(){this.closePopup(),this.$emit("change",{filterType:this.filterType,filter:this.filterValue})},handleSearchReset(){this.canReset&&(this.filterValue="",this.handleSearchSubmit())},handleRangeSubmit(e){this.closePopup(),this.$emit("change",{filterType:this.filterType,filter:!0===e?[]:[parseInt(this.gtValue),parseInt(this.ltValue)]})},handleRangeReset(){this.canReset&&(this.gtValue="",this.ltValue="",this.handleRangeSubmit(!0))}}};const Ne={name:"uniTh",options:{virtualHost:!0},components:{dropdown:oe(Ee,[["render",function(a,h,p,x,y,w){const T=d,v=b("check-box"),k=u,D=C,P=A,M=le(_("uni-datetime-picker"),Ce);return e(),t(T,{class:"uni-filter-dropdown"},{default:i((()=>[n(T,{class:"dropdown-btn",onClick:w.onDropdown},{default:i((()=>[w.isSelect||w.isRange?(e(),t(T,{key:0,class:c(["icon-select",{active:w.canReset}])},null,8,["class"])):s("",!0),w.isSearch?(e(),t(T,{key:1,class:c(["icon-search",{active:w.canReset}])},{default:i((()=>[n(T,{class:"icon-search-0"}),n(T,{class:"icon-search-1"})])),_:1},8,["class"])):s("",!0),w.isDate?(e(),t(T,{key:2,class:c(["icon-calendar",{active:w.canReset}])},{default:i((()=>[n(T,{class:"icon-calendar-0"}),n(T,{class:"icon-calendar-1"})])),_:1},8,["class"])):s("",!0)])),_:1},8,["onClick"]),y.isOpened?(e(),t(T,{key:0,class:"uni-dropdown-cover",onClick:w.handleClose},null,8,["onClick"])):s("",!0),y.isOpened?(e(),t(T,{key:1,class:"dropdown-popup dropdown-popup-right",onClick:h[3]||(h[3]=S((()=>{}),["stop"]))},{default:i((()=>[w.isSelect?(e(),t(T,{key:0,class:"list"},{default:i((()=>[(e(!0),f(g,null,m(y.dataList,((a,s)=>(e(),t(D,{class:"flex-r a-i-c list-item",key:s,onClick:e=>w.onItemClick(e,s)},{default:i((()=>[n(v,{class:"check",checked:a.checked},null,8,["checked"]),n(T,{class:"checklist-content"},{default:i((()=>[n(k,{class:"checklist-text",style:l(a.styleIconText)},{default:i((()=>[o(r(a[p.map.text]),1)])),_:2},1032,["style"])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):s("",!0),w.isSelect?(e(),t(T,{key:1,class:"flex-r opera-area"},{default:i((()=>[n(T,{class:c(["flex-f btn btn-default",{disable:!w.canReset}]),onClick:w.handleSelectReset},{default:i((()=>[o(r(y.resource.reset),1)])),_:1},8,["class","onClick"]),n(T,{class:"flex-f btn btn-submit",onClick:w.handleSelectSubmit},{default:i((()=>[o(r(y.resource.submit),1)])),_:1},8,["onClick"])])),_:1})):s("",!0),w.isSearch?(e(),t(T,{key:2,class:"search-area"},{default:i((()=>[n(P,{class:"search-input",modelValue:y.filterValue,"onUpdate:modelValue":h[0]||(h[0]=e=>y.filterValue=e)},null,8,["modelValue"])])),_:1})):s("",!0),w.isSearch?(e(),t(T,{key:3,class:"flex-r opera-area"},{default:i((()=>[n(T,{class:"flex-f btn btn-submit",onClick:w.handleSearchSubmit},{default:i((()=>[o(r(y.resource.search),1)])),_:1},8,["onClick"]),n(T,{class:c(["flex-f btn btn-default",{disable:!w.canReset}]),onClick:w.handleSearchReset},{default:i((()=>[o(r(y.resource.reset),1)])),_:1},8,["class","onClick"])])),_:1})):s("",!0),w.isRange?(e(),t(T,{key:4},{default:i((()=>[n(T,{class:"input-label"},{default:i((()=>[o(r(y.resource.gt),1)])),_:1}),n(P,{class:"input",modelValue:y.gtValue,"onUpdate:modelValue":h[1]||(h[1]=e=>y.gtValue=e)},null,8,["modelValue"]),n(T,{class:"input-label"},{default:i((()=>[o(r(y.resource.lt),1)])),_:1}),n(P,{class:"input",modelValue:y.ltValue,"onUpdate:modelValue":h[2]||(h[2]=e=>y.ltValue=e)},null,8,["modelValue"])])),_:1})):s("",!0),w.isRange?(e(),t(T,{key:5,class:"flex-r opera-area"},{default:i((()=>[n(T,{class:c(["flex-f btn btn-default",{disable:!w.canReset}]),onClick:w.handleRangeReset},{default:i((()=>[o(r(y.resource.reset),1)])),_:1},8,["class","onClick"]),n(T,{class:"flex-f btn btn-submit",onClick:w.handleRangeSubmit},{default:i((()=>[o(r(y.resource.submit),1)])),_:1},8,["onClick"])])),_:1})):s("",!0),w.isDate?(e(),t(T,{key:6},{default:i((()=>[n(M,{ref:"datetimepicker",value:y.dateRange,type:"datetimerange","return-type":"timestamp",onChange:w.datetimechange,onMaskClick:w.timepickerclose},{default:i((()=>[n(T)])),_:1},8,["value","onChange","onMaskClick"])])),_:1})):s("",!0)])),_:1})):s("",!0)])),_:1})}],["__scopeId","data-v-eeb1dcc7"]])},emits:["sort-change","filter-change"],props:{width:{type:[String,Number],default:""},align:{type:String,default:"left"},rowspan:{type:[Number,String],default:1},colspan:{type:[Number,String],default:1},sortable:{type:Boolean,default:!1},filterType:{type:String,default:""},filterData:{type:Array,default:()=>[]},filterDefaultValue:{type:[Array,String],default:()=>""}},data:()=>({border:!1,ascending:!1,descending:!1}),computed:{customWidth(){if("number"==typeof this.width)return this.width;if("string"==typeof this.width){let e=new RegExp(/^[1-9][0-9]*px$/g),t=new RegExp(/^[1-9][0-9]*rpx$/g),i=new RegExp(/^[1-9][0-9]*$/g);if(null!==this.width.match(e))return this.width.replace("px","");if(null!==this.width.match(t)){let e=Number(this.width.replace("rpx","")),t=T().screenWidth/750;return Math.round(e*t)}return null!==this.width.match(i)?this.width:""}return""},contentAlign(){let e="left";switch(this.align){case"left":e="flex-start";break;case"center":e="center";break;case"right":e="flex-end"}return e}},created(){this.root=this.getTable("uniTable"),this.rootTr=this.getTable("uniTr"),this.rootTr.minWidthUpdate(this.customWidth?this.customWidth:140),this.border=this.root.border,this.root.thChildren.push(this)},methods:{sort(){if(this.sortable)return this.clearOther(),this.ascending||this.descending?this.ascending&&!this.descending?(this.ascending=!1,this.descending=!0,void this.$emit("sort-change",{order:"descending"})):void(!this.ascending&&this.descending&&(this.ascending=!1,this.descending=!1,this.$emit("sort-change",{order:null}))):(this.ascending=!0,void this.$emit("sort-change",{order:"ascending"}))},ascendingFn(){this.clearOther(),this.ascending=!this.ascending,this.descending=!1,this.$emit("sort-change",{order:this.ascending?"ascending":null})},descendingFn(){this.clearOther(),this.descending=!this.descending,this.ascending=!1,this.$emit("sort-change",{order:this.descending?"descending":null})},clearOther(){this.root.thChildren.map((e=>(e!==this&&(e.ascending=!1,e.descending=!1),e)))},ondropdown(e){this.$emit("filter-change",e)},getTable(e){let t=this.$parent,i=t.$options.name;for(;i!==e;){if(t=t.$parent,!t)return!1;i=t.$options.name}return t}}};const Be=oe(Ne,[["render",function(o,r,h,p,g,m){const x=u,y=d,_=b("dropdown");return e(),f("th",{rowspan:h.rowspan,colspan:h.colspan,class:c(["uni-table-th",{"table--border":g.border}]),style:l({width:m.customWidth+"px","text-align":h.align})},[n(y,{class:"uni-table-th-row"},{default:i((()=>[n(y,{class:"uni-table-th-content",style:l({"justify-content":m.contentAlign}),onClick:m.sort},{default:i((()=>[a(o.$slots,"default",{},void 0,!0),h.sortable?(e(),t(y,{key:0,class:"arrow-box"},{default:i((()=>[n(x,{class:c(["arrow up",{active:g.ascending}]),onClick:S(m.ascendingFn,["stop"])},null,8,["class","onClick"]),n(x,{class:c(["arrow down",{active:g.descending}]),onClick:S(m.descendingFn,["stop"])},null,8,["class","onClick"])])),_:1})):s("",!0)])),_:3},8,["style","onClick"]),h.filterType||h.filterData.length?(e(),t(_,{key:0,filterDefaultValue:h.filterDefaultValue,filterData:h.filterData,filterType:h.filterType,onChange:m.ondropdown},null,8,["filterDefaultValue","filterData","filterType","onChange"])):s("",!0)])),_:3})],14,["rowspan","colspan"])}],["__scopeId","data-v-46096bb8"]]),ze={name:"uniTr",components:{tableCheckbox:Pe},props:{disabled:{type:Boolean,default:!1},keyValue:{type:[String,Number],default:""}},options:{virtualHost:!0},data:()=>({value:!1,border:!1,selection:!1,widthThArr:[],ishead:!0,checked:!1,indeterminate:!1}),created(){this.root=this.getTable(),this.head=this.getTable("uniThead"),this.head&&(this.ishead=!1,this.head.init(this)),this.border=this.root.border,this.selection=this.root.type,this.root.trChildren.push(this);const e=this.root.data.find((e=>e[this.root.rowKey]===this.keyValue));e&&(this.rowData=e),this.root.isNodata()},mounted(){if(this.widthThArr.length>0){const e="selection"===this.selection?50:0;this.root.minWidth=Number(this.widthThArr.reduce(((e,t)=>Number(e)+Number(t))))+e}},unmounted(){const e=this.root.trChildren.findIndex((e=>e===this));this.root.trChildren.splice(e,1),this.root.isNodata()},methods:{minWidthUpdate(e){if(this.widthThArr.push(e),this.widthThArr.length>0){const e="selection"===this.selection?50:0;this.root.minWidth=Number(this.widthThArr.reduce(((e,t)=>Number(e)+Number(t))))+e}},checkboxSelected(e){let t=this.root.data.find((e=>e[this.root.rowKey]===this.keyValue));this.checked=e.checked,this.root.check(t||this,e.checked,t?this.keyValue:null)},change(e){this.root.trChildren.forEach((t=>{t===this&&this.root.check(this,e.detail.value.length>0)}))},getTable(e="uniTable"){let t=this.$parent,i=t.$options.name;for(;i!==e;){if(t=t.$parent,!t)return!1;i=t.$options.name}return t}}};const Ue=oe(ze,[["render",function(t,i,o,r,l,h){const d=b("table-checkbox");return e(),f("tr",{class:"uni-table-tr"},["selection"===l.selection&&l.ishead?(e(),f("th",{key:0,class:c(["checkbox",{"tr-table--border":l.border}])},[n(d,{checked:l.checked,indeterminate:l.indeterminate,disabled:o.disabled,onCheckboxSelected:h.checkboxSelected},null,8,["checked","indeterminate","disabled","onCheckboxSelected"])],2)):s("",!0),a(t.$slots,"default",{},void 0,!0)])}],["__scopeId","data-v-3d918083"]]);const We=oe({name:"uniTd",options:{virtualHost:!0},props:{width:{type:[String,Number],default:""},align:{type:String,default:"left"},rowspan:{type:[Number,String],default:1},colspan:{type:[Number,String],default:1}},data:()=>({border:!1}),created(){this.root=this.getTable(),this.border=this.root.border},methods:{getTable(){let e=this.$parent,t=e.$options.name;for(;"uniTable"!==t;){if(e=e.$parent,!e)return!1;t=e.$options.name}return e}}},[["render",function(t,i,n,s,o,r){return e(),f("td",{class:c(["uni-table-td",{"table--border":o.border}]),rowspan:n.rowspan,colspan:n.colspan,style:l({width:n.width+"px","text-align":n.align})},[a(t.$slots,"default",{},void 0,!0)],14,["rowspan","colspan"])}],["__scopeId","data-v-aef02679"]]);const $e=oe({name:"uniTable",options:{virtualHost:!0},emits:["selection-change"],props:{data:{type:Array,default:()=>[]},border:{type:Boolean,default:!1},stripe:{type:Boolean,default:!1},type:{type:String,default:""},emptyText:{type:String,default:"没有更多数据"},loading:{type:Boolean,default:!1},rowKey:{type:String,default:""}},data:()=>({noData:!0,minWidth:0,multiTableHeads:[]}),watch:{loading(e){},data(e){this.theadChildren,this.theadChildren&&this.theadChildren.rowspan,this.noData=!1}},created(){this.trChildren=[],this.thChildren=[],this.theadChildren=null,this.backData=[],this.backIndexData=[]},methods:{isNodata(){this.theadChildren;let e=1;this.theadChildren&&(e=this.theadChildren.rowspan),this.noData=this.trChildren.length-e<=0},selectionAll(){let e=1,t=this.theadChildren;this.theadChildren?e=t.rowspan-1:t=this.trChildren[0];let i=this.data&&this.data.length>0;t.checked=!0,t.indeterminate=!1,this.trChildren.forEach(((t,a)=>{if(!t.disabled){if(t.checked=!0,i&&t.keyValue){const e=this.data.find((e=>e[this.rowKey]===t.keyValue));this.backData.find((t=>t[this.rowKey]===e[this.rowKey]))||this.backData.push(e)}a>e-1&&-1===this.backIndexData.indexOf(a-e)&&this.backIndexData.push(a-e)}})),this.$emit("selection-change",{detail:{value:this.backData,index:this.backIndexData}})},toggleRowSelection(e,t){e=[].concat(e),this.trChildren.forEach(((i,a)=>{const n=e.findIndex((e=>"number"==typeof e?e===a-1:e[this.rowKey]===i.keyValue));let s=i.checked;-1!==n&&(i.checked="boolean"==typeof t?t:!i.checked,s!==i.checked&&this.check(i.rowData||i,i.checked,i.rowData?i.keyValue:null,!0))})),this.$emit("selection-change",{detail:{value:this.backData,index:this.backIndexData}})},clearSelection(){let e=this.theadChildren;this.theadChildren||(e=this.trChildren[0]),e.checked=!1,e.indeterminate=!1,this.trChildren.forEach((e=>{e.checked=!1})),this.backData=[],this.backIndexData=[],this.$emit("selection-change",{detail:{value:[],index:[]}})},toggleAllSelection(){let e=[],t=1,i=this.theadChildren;this.theadChildren?t=i.rowspan-1:i=this.trChildren[0],this.trChildren.forEach(((i,a)=>{i.disabled||a>t-1&&e.push(a-t)})),this.toggleRowSelection(e)},check(e,t,i,a){let n=this.theadChildren;this.theadChildren||(n=this.trChildren[0]);let s=this.trChildren.findIndex(((t,i)=>e===t));if(s<0&&(s=this.data.findIndex((e=>e[this.rowKey]===i))+1),this.trChildren.filter((e=>!e.disabled&&e.keyValue)).length,0===s)return void(t?this.selectionAll():this.clearSelection());if(t)i&&this.backData.push(e),this.backIndexData.push(s-1);else{const e=this.backData.findIndex((e=>e[this.rowKey]===i)),t=this.backIndexData.findIndex((e=>e===s-1));i&&this.backData.splice(e,1),this.backIndexData.splice(t,1)}this.trChildren.find(((e,t)=>t>0&&!e.checked&&!e.disabled))?(n.indeterminate=!0,n.checked=!1):(n.indeterminate=!1,n.checked=!0),0===this.backIndexData.length&&(n.indeterminate=!1),a||this.$emit("selection-change",{detail:{value:this.backData,index:this.backIndexData}})}}},[["render",function(n,o,h,u,p,g){const m=d;return e(),t(m,{class:c(["uni-table-scroll",{"table--border":h.border,"border-none":!p.noData}])},{default:i((()=>[P("table",{class:c(["uni-table",{"table--stripe":h.stripe}]),border:"0",cellpadding:"0",cellspacing:"0",style:l({"min-width":p.minWidth+"px"})},[a(n.$slots,"default",{},void 0,!0),p.noData?(e(),f("tr",{key:0,class:"uni-table-loading"},[P("td",{class:c(["uni-table-text",{"empty-border":h.border}])},r(h.emptyText),3)])):s("",!0),h.loading?(e(),t(m,{key:1,class:c(["uni-table-mask",{"empty-border":h.border}])},{default:i((()=>[P("div",{class:"uni-table--loader"})])),_:1},8,["class"])):s("",!0)],6)])),_:3},8,["class"])}],["__scopeId","data-v-82f3199e"]]),Ve={pages:[{path:"pages/index/index",style:{navigationBarTitleText:"index",navigationStyle:"custom","app-plus":{titleView:!1}}}],globalStyle:{navigationBarTextStyle:"black",navigationBarTitleText:"uni-app",navigationBarBackgroundColor:"#F8F8F8",backgroundColor:"#F8F8F8"},uniIdRouter:{}};function je(e,t,i){return e(i={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&i.path)}},i.exports),i.exports}var He=je((function(e,t){var i;e.exports=(i=i||function(e,t){var i=Object.create||function(){function e(){}return function(t){var i;return e.prototype=t,i=new e,e.prototype=null,i}}(),a={},n=a.lib={},s=n.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=n.WordArray=s.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,i=e.words,a=this.sigBytes,n=e.sigBytes;if(this.clamp(),a%4)for(var s=0;s<n;s++){var o=i[s>>>2]>>>24-s%4*8&255;t[a+s>>>2]|=o<<24-(a+s)%4*8}else for(s=0;s<n;s+=4)t[a+s>>>2]=i[s>>>2];return this.sigBytes+=n,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i,a=[],n=function(t){var i=987654321,a=4294967295;return function(){var n=((i=36969*(65535&i)+(i>>16)&a)<<16)+(t=18e3*(65535&t)+(t>>16)&a)&a;return n/=4294967296,(n+=.5)*(e.random()>.5?1:-1)}},s=0;s<t;s+=4){var r=n(4294967296*(i||e.random()));i=987654071*r(),a.push(4294967296*r()|0)}return new o.init(a,t)}}),r=a.enc={},l=r.Hex={stringify:function(e){for(var t=e.words,i=e.sigBytes,a=[],n=0;n<i;n++){var s=t[n>>>2]>>>24-n%4*8&255;a.push((s>>>4).toString(16)),a.push((15&s).toString(16))}return a.join("")},parse:function(e){for(var t=e.length,i=[],a=0;a<t;a+=2)i[a>>>3]|=parseInt(e.substr(a,2),16)<<24-a%8*4;return new o.init(i,t/2)}},c=r.Latin1={stringify:function(e){for(var t=e.words,i=e.sigBytes,a=[],n=0;n<i;n++){var s=t[n>>>2]>>>24-n%4*8&255;a.push(String.fromCharCode(s))}return a.join("")},parse:function(e){for(var t=e.length,i=[],a=0;a<t;a++)i[a>>>2]|=(255&e.charCodeAt(a))<<24-a%4*8;return new o.init(i,t)}},h=r.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},d=n.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,a=i.words,n=i.sigBytes,s=this.blockSize,r=n/(4*s),l=(r=t?e.ceil(r):e.max((0|r)-this._minBufferSize,0))*s,c=e.min(4*l,n);if(l){for(var h=0;h<l;h+=s)this._doProcessBlock(a,h);var d=a.splice(0,l);i.sigBytes-=c}return new o.init(d,c)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=d.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new u.HMAC.init(e,i).finalize(t)}}});var u=a.algo={};return a}(Math),i)})),qe=He,Ge=(je((function(e,t){var i;e.exports=(i=qe,function(e){var t=i,a=t.lib,n=a.WordArray,s=a.Hasher,o=t.algo,r=[];!function(){for(var t=0;t<64;t++)r[t]=4294967296*e.abs(e.sin(t+1))|0}();var l=o.MD5=s.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var a=t+i,n=e[a];e[a]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var s=this._hash.words,o=e[t+0],l=e[t+1],p=e[t+2],f=e[t+3],g=e[t+4],m=e[t+5],x=e[t+6],y=e[t+7],b=e[t+8],_=e[t+9],S=e[t+10],w=e[t+11],T=e[t+12],v=e[t+13],k=e[t+14],D=e[t+15],A=s[0],C=s[1],P=s[2],M=s[3];A=c(A,C,P,M,o,7,r[0]),M=c(M,A,C,P,l,12,r[1]),P=c(P,M,A,C,p,17,r[2]),C=c(C,P,M,A,f,22,r[3]),A=c(A,C,P,M,g,7,r[4]),M=c(M,A,C,P,m,12,r[5]),P=c(P,M,A,C,x,17,r[6]),C=c(C,P,M,A,y,22,r[7]),A=c(A,C,P,M,b,7,r[8]),M=c(M,A,C,P,_,12,r[9]),P=c(P,M,A,C,S,17,r[10]),C=c(C,P,M,A,w,22,r[11]),A=c(A,C,P,M,T,7,r[12]),M=c(M,A,C,P,v,12,r[13]),P=c(P,M,A,C,k,17,r[14]),A=h(A,C=c(C,P,M,A,D,22,r[15]),P,M,l,5,r[16]),M=h(M,A,C,P,x,9,r[17]),P=h(P,M,A,C,w,14,r[18]),C=h(C,P,M,A,o,20,r[19]),A=h(A,C,P,M,m,5,r[20]),M=h(M,A,C,P,S,9,r[21]),P=h(P,M,A,C,D,14,r[22]),C=h(C,P,M,A,g,20,r[23]),A=h(A,C,P,M,_,5,r[24]),M=h(M,A,C,P,k,9,r[25]),P=h(P,M,A,C,f,14,r[26]),C=h(C,P,M,A,b,20,r[27]),A=h(A,C,P,M,v,5,r[28]),M=h(M,A,C,P,p,9,r[29]),P=h(P,M,A,C,y,14,r[30]),A=d(A,C=h(C,P,M,A,T,20,r[31]),P,M,m,4,r[32]),M=d(M,A,C,P,b,11,r[33]),P=d(P,M,A,C,w,16,r[34]),C=d(C,P,M,A,k,23,r[35]),A=d(A,C,P,M,l,4,r[36]),M=d(M,A,C,P,g,11,r[37]),P=d(P,M,A,C,y,16,r[38]),C=d(C,P,M,A,S,23,r[39]),A=d(A,C,P,M,v,4,r[40]),M=d(M,A,C,P,o,11,r[41]),P=d(P,M,A,C,f,16,r[42]),C=d(C,P,M,A,x,23,r[43]),A=d(A,C,P,M,_,4,r[44]),M=d(M,A,C,P,T,11,r[45]),P=d(P,M,A,C,D,16,r[46]),A=u(A,C=d(C,P,M,A,p,23,r[47]),P,M,o,6,r[48]),M=u(M,A,C,P,y,10,r[49]),P=u(P,M,A,C,k,15,r[50]),C=u(C,P,M,A,m,21,r[51]),A=u(A,C,P,M,T,6,r[52]),M=u(M,A,C,P,f,10,r[53]),P=u(P,M,A,C,S,15,r[54]),C=u(C,P,M,A,l,21,r[55]),A=u(A,C,P,M,b,6,r[56]),M=u(M,A,C,P,D,10,r[57]),P=u(P,M,A,C,x,15,r[58]),C=u(C,P,M,A,v,21,r[59]),A=u(A,C,P,M,g,6,r[60]),M=u(M,A,C,P,w,10,r[61]),P=u(P,M,A,C,p,15,r[62]),C=u(C,P,M,A,_,21,r[63]),s[0]=s[0]+A|0,s[1]=s[1]+C|0,s[2]=s[2]+P|0,s[3]=s[3]+M|0},_doFinalize:function(){var t=this._data,i=t.words,a=8*this._nDataBytes,n=8*t.sigBytes;i[n>>>5]|=128<<24-n%32;var s=e.floor(a/4294967296),o=a;i[15+(n+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),i[14+(n+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t.sigBytes=4*(i.length+1),this._process();for(var r=this._hash,l=r.words,c=0;c<4;c++){var h=l[c];l[c]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8)}return r},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,i,a,n,s,o){var r=e+(t&i|~t&a)+n+o;return(r<<s|r>>>32-s)+t}function h(e,t,i,a,n,s,o){var r=e+(t&a|i&~a)+n+o;return(r<<s|r>>>32-s)+t}function d(e,t,i,a,n,s,o){var r=e+(t^i^a)+n+o;return(r<<s|r>>>32-s)+t}function u(e,t,i,a,n,s,o){var r=e+(i^(t|~a))+n+o;return(r<<s|r>>>32-s)+t}t.MD5=s._createHelper(l),t.HmacMD5=s._createHmacHelper(l)}(Math),i.MD5)})),je((function(e,t){var i,a,n;e.exports=(a=(i=qe).lib.Base,n=i.enc.Utf8,void(i.algo.HMAC=a.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var i=e.blockSize,a=4*i;t.sigBytes>a&&(t=e.finalize(t)),t.clamp();for(var s=this._oKey=t.clone(),o=this._iKey=t.clone(),r=s.words,l=o.words,c=0;c<i;c++)r[c]^=1549556828,l[c]^=909522486;s.sigBytes=o.sigBytes=a,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,i=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(i))}})))})),je((function(e,t){e.exports=qe.HmacMD5}))),Ke=je((function(e,t){e.exports=qe.enc.Utf8})),Je=je((function(e,t){var i,a,n;e.exports=(n=(a=i=qe).lib.WordArray,a.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,a=this._map;e.clamp();for(var n=[],s=0;s<i;s+=3)for(var o=(t[s>>>2]>>>24-s%4*8&255)<<16|(t[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|t[s+2>>>2]>>>24-(s+2)%4*8&255,r=0;r<4&&s+.75*r<i;r++)n.push(a.charAt(o>>>6*(3-r)&63));var l=a.charAt(64);if(l)for(;n.length%4;)n.push(l);return n.join("")},parse:function(e){var t=e.length,i=this._map,a=this._reverseMap;if(!a){a=this._reverseMap=[];for(var s=0;s<i.length;s++)a[i.charCodeAt(s)]=s}var o=i.charAt(64);if(o){var r=e.indexOf(o);-1!==r&&(t=r)}return function(e,t,i){for(var a=[],s=0,o=0;o<t;o++)if(o%4){var r=i[e.charCodeAt(o-1)]<<o%4*2,l=i[e.charCodeAt(o)]>>>6-o%4*2;a[s>>>2]|=(r|l)<<24-s%4*8,s++}return n.create(a,s)}(e,t,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},i.enc.Base64)}));const Ye="FUNCTION",Xe="pending",Qe="rejected";function Ze(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function et(e){return"object"===Ze(e)}function tt(e){return"function"==typeof e}function it(e){return function(){try{return e.apply(e,arguments)}catch(t){console.error(t)}}}const at="REJECTED",nt="NOT_PENDING";class st{constructor({createPromise:e,retryRule:t=at}={}){this.createPromise=e,this.status=null,this.promise=null,this.retryRule=t}get needRetry(){if(!this.status)return!0;switch(this.retryRule){case at:return this.status===Qe;case nt:return this.status!==Xe}}exec(){return this.needRetry?(this.status=Xe,this.promise=this.createPromise().then((e=>(this.status="fulfilled",Promise.resolve(e))),(e=>(this.status=Qe,Promise.reject(e)))),this.promise):this.promise}}function ot(e){return e&&"string"==typeof e?JSON.parse(e):e}const rt=ot([]);ot("");const lt=ot("[]")||[];let ct="";try{ct="__UNI__E890BBE"}catch(Xt){}let ht={};function dt(e,t={}){var i,a;return i=ht,a=e,Object.prototype.hasOwnProperty.call(i,a)||(ht[e]=t),ht[e]}const ut=["invoke","success","fail","complete"],pt=dt("_globalUniCloudInterceptor");function ft(e,t){pt[e]||(pt[e]={}),et(t)&&Object.keys(t).forEach((i=>{ut.indexOf(i)>-1&&function(e,t,i){let a=pt[e][t];a||(a=pt[e][t]=[]),-1===a.indexOf(i)&&tt(i)&&a.push(i)}(e,i,t[i])}))}function gt(e,t){pt[e]||(pt[e]={}),et(t)?Object.keys(t).forEach((i=>{ut.indexOf(i)>-1&&function(e,t,i){const a=pt[e][t];if(!a)return;const n=a.indexOf(i);n>-1&&a.splice(n,1)}(e,i,t[i])})):delete pt[e]}function mt(e,t){return e&&0!==e.length?e.reduce(((e,i)=>e.then((()=>i(t)))),Promise.resolve()):Promise.resolve()}function xt(e,t){return pt[e]&&pt[e][t]||[]}function yt(e){ft("callObject",e)}const bt=dt("_globalUniCloudListener"),_t="response",St="needLogin",wt="refreshToken",Tt="clientdb",vt="cloudfunction",kt="cloudobject";function Dt(e){return bt[e]||(bt[e]=[]),bt[e]}function At(e,t){const i=Dt(e);i.includes(t)||i.push(t)}function Ct(e,t){const i=Dt(e),a=i.indexOf(t);-1!==a&&i.splice(a,1)}function Pt(e,t){const i=Dt(e);for(let a=0;a<i.length;a++)(0,i[a])(t)}let Mt,It=!1;function Ft(){return Mt||(Mt=new Promise((e=>{It&&e(),function t(){if("function"==typeof F){const t=F();t&&t[0]&&(It=!0,e())}It||setTimeout((()=>{t()}),30)}()})),Mt)}function Lt(e){const t={};for(const i in e){const a=e[i];tt(a)&&(t[i]=it(a))}return t}class Rt extends Error{constructor(e){super(e.message),this.errMsg=e.message||e.errMsg||"unknown system error",this.code=this.errCode=e.code||e.errCode||"SYSTEM_ERROR",this.errSubject=this.subject=e.subject||e.errSubject,this.cause=e.cause,this.requestId=e.requestId}toJson(e=0){if(!(e>=10))return e++,{errCode:this.errCode,errMsg:this.errMsg,errSubject:this.errSubject,cause:this.cause&&this.cause.toJson?this.cause.toJson(e):this.cause}}}var Ot={request:e=>W(e),uploadFile:e=>$(e),setStorageSync:(e,t)=>V(e,t),getStorageSync:e=>j(e),removeStorageSync:e=>H(e),clearStorageSync:()=>q()};function Et(e){return e&&Et(e.__v_raw)||e}function Nt(){return{token:Ot.getStorageSync("uni_id_token")||Ot.getStorageSync("uniIdToken"),tokenExpired:Ot.getStorageSync("uni_id_token_expired")}}function Bt({token:e,tokenExpired:t}={}){e&&Ot.setStorageSync("uni_id_token",e),t&&Ot.setStorageSync("uni_id_token_expired",t)}let zt,Ut;function Wt(){return zt||(zt=T()),zt}function $t(){let e,t;try{if(ee){if(ee.toString().indexOf("not yet implemented")>-1)return;const{scene:i,channel:a}=ee();e=a,t=i}}catch(i){}return{channel:e,scene:t}}function Vt(){const e=Z&&Z()||"en";if(Ut)return{...Ut,locale:e,LOCALE:e};const t=Wt(),{deviceId:i,osName:a,uniPlatform:n,appId:s}=t,o=["pixelRatio","brand","model","system","language","version","platform","host","SDKVersion","swanNativeVersion","app","AppPlatform","fontSizeSetting"];for(let r=0;r<o.length;r++)delete t[o[r]];return Ut={PLATFORM:n,OS:a,APPID:s,DEVICEID:i,...$t(),...t},{...Ut,locale:e,LOCALE:e}}var jt=function(e,t){let i="";return Object.keys(e).sort().forEach((function(t){e[t]&&(i=i+"&"+t+"="+e[t])})),i=i.slice(1),Ge(i,t).toString()},Ht=function(e,t){return new Promise(((i,a)=>{t(Object.assign(e,{complete(e){e||(e={});const t=e.data&&e.data.header&&e.data.header["x-serverless-request-id"]||e.header&&e.header["request-id"];if(!e.statusCode||e.statusCode>=400)return a(new Rt({code:"SYS_ERR",message:e.errMsg||"request:fail",requestId:t}));const n=e.data;if(n.error)return a(new Rt({code:n.error.code,message:n.error.message,requestId:t}));n.result=n.data,n.requestId=t,delete n.data,i(n)}}))}))},qt=function(e){return Je.stringify(Ke.parse(e))},Gt=class{constructor(e){["spaceId","clientSecret"].forEach((t=>{if(!Object.prototype.hasOwnProperty.call(e,t))throw new Error(`${t} required`)})),this.config=Object.assign({},{endpoint:0===e.spaceId.indexOf("mp-")?"https://api.next.bspapp.com":"https://api.bspapp.com"},e),this.config.provider="aliyun",this.config.requestUrl=this.config.endpoint+"/client",this.config.envType=this.config.envType||"public",this.config.accessTokenKey="access_token_"+this.config.spaceId,this.adapter=Ot,this._getAccessTokenPromiseHub=new st({createPromise:()=>this.requestAuth(this.setupRequest({method:"serverless.auth.user.anonymousAuthorize",params:"{}"},"auth")).then((e=>{if(!e.result||!e.result.accessToken)throw new Rt({code:"AUTH_FAILED",message:"获取accessToken失败"});this.setAccessToken(e.result.accessToken)})),retryRule:nt})}get hasAccessToken(){return!!this.accessToken}setAccessToken(e){this.accessToken=e}requestWrapped(e){return Ht(e,this.adapter.request)}requestAuth(e){return this.requestWrapped(e)}request(e,t){return Promise.resolve().then((()=>this.hasAccessToken?t?this.requestWrapped(e):this.requestWrapped(e).catch((t=>new Promise(((e,i)=>{!t||"GATEWAY_INVALID_TOKEN"!==t.code&&"InvalidParameter.InvalidToken"!==t.code?i(t):e()})).then((()=>this.getAccessToken())).then((()=>{const t=this.rebuildRequest(e);return this.request(t,!0)})))):this.getAccessToken().then((()=>{const t=this.rebuildRequest(e);return this.request(t,!0)}))))}rebuildRequest(e){const t=Object.assign({},e);return t.data.token=this.accessToken,t.header["x-basement-token"]=this.accessToken,t.header["x-serverless-sign"]=jt(t.data,this.config.clientSecret),t}setupRequest(e,t){const i=Object.assign({},e,{spaceId:this.config.spaceId,timestamp:Date.now()}),a={"Content-Type":"application/json"};return"auth"!==t&&(i.token=this.accessToken,a["x-basement-token"]=this.accessToken),a["x-serverless-sign"]=jt(i,this.config.clientSecret),{url:this.config.requestUrl,method:"POST",data:i,dataType:"json",header:a}}getAccessToken(){return this._getAccessTokenPromiseHub.exec()}async authorize(){await this.getAccessToken()}callFunction(e){const t={method:"serverless.function.runtime.invoke",params:JSON.stringify({functionTarget:e.name,functionArgs:e.data||{}})};return this.request(this.setupRequest(t))}getOSSUploadOptionsFromPath(e){const t={method:"serverless.file.resource.generateProximalSign",params:JSON.stringify(e)};return this.request(this.setupRequest(t))}uploadFileToOSS({url:e,formData:t,name:i,filePath:a,fileType:n,onUploadProgress:s}){return new Promise(((o,r)=>{const l=this.adapter.uploadFile({url:e,formData:t,name:i,filePath:a,fileType:n,header:{"X-OSS-server-side-encrpytion":"AES256"},success(e){e&&e.statusCode<400?o(e):r(new Rt({code:"UPLOAD_FAILED",message:"文件上传失败"}))},fail(e){r(new Rt({code:e.code||"UPLOAD_FAILED",message:e.message||e.errMsg||"文件上传失败"}))}});"function"==typeof s&&l&&"function"==typeof l.onProgressUpdate&&l.onProgressUpdate((e=>{s({loaded:e.totalBytesSent,total:e.totalBytesExpectedToSend})}))}))}reportOSSUpload(e){const t={method:"serverless.file.resource.report",params:JSON.stringify(e)};return this.request(this.setupRequest(t))}async uploadFile({filePath:e,cloudPath:t,fileType:i="image",cloudPathAsRealPath:a=!1,onUploadProgress:n,config:s}){if("string"!==Ze(t))throw new Rt({code:"INVALID_PARAM",message:"cloudPath必须为字符串类型"});if(!(t=t.trim()))throw new Rt({code:"INVALID_PARAM",message:"cloudPath不可为空"});if(/:\/\//.test(t))throw new Rt({code:"INVALID_PARAM",message:"cloudPath不合法"});const o=s&&s.envType||this.config.envType;if(a&&("/"!==t[0]&&(t="/"+t),t.indexOf("\\")>-1))throw new Rt({code:"INVALID_PARAM",message:"使用cloudPath作为路径时，cloudPath不可包含“\\”"});const r=(await this.getOSSUploadOptionsFromPath({env:o,filename:a?t.split("/").pop():t,fileId:a?t:void 0})).result,l="https://"+r.cdnDomain+"/"+r.ossPath,{securityToken:c,accessKeyId:h,signature:d,host:u,ossPath:p,id:f,policy:g,ossCallbackUrl:m}=r,x={"Cache-Control":"max-age=2592000","Content-Disposition":"attachment",OSSAccessKeyId:h,Signature:d,host:u,id:f,key:p,policy:g,success_action_status:200};if(c&&(x["x-oss-security-token"]=c),m){const e=JSON.stringify({callbackUrl:m,callbackBody:JSON.stringify({fileId:f,spaceId:this.config.spaceId}),callbackBodyType:"application/json"});x.callback=qt(e)}const y={url:"https://"+r.host,formData:x,fileName:"file",name:"file",filePath:e,fileType:i};if(await this.uploadFileToOSS(Object.assign({},y,{onUploadProgress:n})),m)return{success:!0,filePath:e,fileID:l};if((await this.reportOSSUpload({id:f})).success)return{success:!0,filePath:e,fileID:l};throw new Rt({code:"UPLOAD_FAILED",message:"文件上传失败"})}getTempFileURL({fileList:e}={}){return new Promise(((t,i)=>{Array.isArray(e)&&0!==e.length||i(new Rt({code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"})),t({fileList:e.map((e=>({fileID:e,tempFileURL:e})))})}))}async getFileInfo({fileList:e}={}){if(!Array.isArray(e)||0===e.length)throw new Rt({code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"});const t={method:"serverless.file.resource.info",params:JSON.stringify({id:e.map((e=>e.split("?")[0])).join(",")})};return{fileList:(await this.request(this.setupRequest(t))).result}}},Kt={init(e){const t=new Gt(e),i={signInAnonymously:function(){return t.authorize()},getLoginState:function(){return Promise.resolve(!1)}};return t.auth=function(){return i},t.customAuth=t.auth,t}};const Jt="undefined"!=typeof location&&"http:"===location.protocol?"http:":"https:";var Yt,Xt;(Xt=Yt||(Yt={})).local="local",Xt.none="none",Xt.session="session";var Qt=function(){},Zt=je((function(e,t){var i;e.exports=(i=qe,function(e){var t=i,a=t.lib,n=a.WordArray,s=a.Hasher,o=t.algo,r=[],l=[];!function(){function t(t){for(var i=e.sqrt(t),a=2;a<=i;a++)if(!(t%a))return!1;return!0}function i(e){return 4294967296*(e-(0|e))|0}for(var a=2,n=0;n<64;)t(a)&&(n<8&&(r[n]=i(e.pow(a,.5))),l[n]=i(e.pow(a,1/3)),n++),a++}();var c=[],h=o.SHA256=s.extend({_doReset:function(){this._hash=new n.init(r.slice(0))},_doProcessBlock:function(e,t){for(var i=this._hash.words,a=i[0],n=i[1],s=i[2],o=i[3],r=i[4],h=i[5],d=i[6],u=i[7],p=0;p<64;p++){if(p<16)c[p]=0|e[t+p];else{var f=c[p-15],g=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,m=c[p-2],x=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;c[p]=g+c[p-7]+x+c[p-16]}var y=a&n^a&s^n&s,b=(a<<30|a>>>2)^(a<<19|a>>>13)^(a<<10|a>>>22),_=u+((r<<26|r>>>6)^(r<<21|r>>>11)^(r<<7|r>>>25))+(r&h^~r&d)+l[p]+c[p];u=d,d=h,h=r,r=o+_|0,o=s,s=n,n=a,a=_+(b+y)|0}i[0]=i[0]+a|0,i[1]=i[1]+n|0,i[2]=i[2]+s|0,i[3]=i[3]+o|0,i[4]=i[4]+r|0,i[5]=i[5]+h|0,i[6]=i[6]+d|0,i[7]=i[7]+u|0},_doFinalize:function(){var t=this._data,i=t.words,a=8*this._nDataBytes,n=8*t.sigBytes;return i[n>>>5]|=128<<24-n%32,i[14+(n+64>>>9<<4)]=e.floor(a/4294967296),i[15+(n+64>>>9<<4)]=a,t.sigBytes=4*i.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=s._createHelper(h),t.HmacSHA256=s._createHmacHelper(h)}(Math),i.SHA256)})),ei=Zt,ti=je((function(e,t){e.exports=qe.HmacSHA256}));const ii=()=>{let e;if(!Promise){e=()=>{},e.promise={};const t=()=>{throw new Rt({message:'Your Node runtime does support ES6 Promises. Set "global.Promise" to your preferred implementation of promises.'})};return Object.defineProperty(e.promise,"then",{get:t}),Object.defineProperty(e.promise,"catch",{get:t}),e}const t=new Promise(((t,i)=>{e=(e,a)=>e?i(e):t(a)}));return e.promise=t,e};function ai(e){return void 0===e}function ni(e){return"[object Null]"===Object.prototype.toString.call(e)}var si;!function(e){e.WEB="web",e.WX_MP="wx_mp"}(si||(si={}));const oi={adapter:null,runtime:void 0},ri=["anonymousUuidKey"];class li extends Qt{constructor(){super(),oi.adapter.root.tcbObject||(oi.adapter.root.tcbObject={})}setItem(e,t){oi.adapter.root.tcbObject[e]=t}getItem(e){return oi.adapter.root.tcbObject[e]}removeItem(e){delete oi.adapter.root.tcbObject[e]}clear(){delete oi.adapter.root.tcbObject}}function ci(e,t){switch(e){case"local":return t.localStorage||new li;case"none":return new li;default:return t.sessionStorage||new li}}class hi{constructor(e){if(!this._storage){this._persistence=oi.adapter.primaryStorage||e.persistence,this._storage=ci(this._persistence,oi.adapter);const t=`access_token_${e.env}`,i=`access_token_expire_${e.env}`,a=`refresh_token_${e.env}`,n=`anonymous_uuid_${e.env}`,s=`login_type_${e.env}`,o=`user_info_${e.env}`;this.keys={accessTokenKey:t,accessTokenExpireKey:i,refreshTokenKey:a,anonymousUuidKey:n,loginTypeKey:s,userInfoKey:o}}}updatePersistence(e){if(e===this._persistence)return;const t="local"===this._persistence;this._persistence=e;const i=ci(e,oi.adapter);for(const a in this.keys){const e=this.keys[a];if(t&&ri.includes(a))continue;const n=this._storage.getItem(e);ai(n)||ni(n)||(i.setItem(e,n),this._storage.removeItem(e))}this._storage=i}setStore(e,t,i){if(!this._storage)return;const a={version:i||"localCachev1",content:t},n=JSON.stringify(a);try{this._storage.setItem(e,n)}catch(s){throw s}}getStore(e,t){try{if(!this._storage)return}catch(a){return""}t=t||"localCachev1";const i=this._storage.getItem(e);return i&&i.indexOf(t)>=0?JSON.parse(i).content:""}removeStore(e){this._storage.removeItem(e)}}const di={},ui={};function pi(e){return di[e]}class fi{constructor(e,t){this.data=t||null,this.name=e}}class gi extends fi{constructor(e,t){super("error",{error:e,data:t}),this.error=e}}const mi=new class{constructor(){this._listeners={}}on(e,t){return i=e,a=t,(n=this._listeners)[i]=n[i]||[],n[i].push(a),this;var i,a,n}off(e,t){return function(e,t,i){if(i&&i[e]){const a=i[e].indexOf(t);-1!==a&&i[e].splice(a,1)}}(e,t,this._listeners),this}fire(e,t){if(e instanceof gi)return console.error(e.error),this;const i="string"==typeof e?new fi(e,t||{}):e,a=i.name;if(this._listens(a)){i.target=this;const e=this._listeners[a]?[...this._listeners[a]]:[];for(const t of e)t.call(this,i)}return this}_listens(e){return this._listeners[e]&&this._listeners[e].length>0}};function xi(e,t){mi.on(e,t)}function yi(e,t={}){mi.fire(e,t)}function bi(e,t){mi.off(e,t)}const _i="loginStateChanged",Si="loginStateExpire",wi="loginTypeChanged",Ti="anonymousConverted",vi="refreshAccessToken";var ki;!function(e){e.ANONYMOUS="ANONYMOUS",e.WECHAT="WECHAT",e.WECHAT_PUBLIC="WECHAT-PUBLIC",e.WECHAT_OPEN="WECHAT-OPEN",e.CUSTOM="CUSTOM",e.EMAIL="EMAIL",e.USERNAME="USERNAME",e.NULL="NULL"}(ki||(ki={}));const Di=["auth.getJwt","auth.logout","auth.signInWithTicket","auth.signInAnonymously","auth.signIn","auth.fetchAccessTokenWithRefreshToken","auth.signUpWithEmailAndPassword","auth.activateEndUserMail","auth.sendPasswordResetEmail","auth.resetPasswordWithToken","auth.isUsernameRegistered"],Ai={"X-SDK-Version":"1.3.5"};function Ci(e,t,i){const a=e[t];e[t]=function(t){const n={},s={};i.forEach((i=>{const{data:a,headers:o}=i.call(e,t);Object.assign(n,a),Object.assign(s,o)}));const o=t.data;return o&&(()=>{var e;if(e=o,"[object FormData]"!==Object.prototype.toString.call(e))t.data={...o,...n};else for(const t in n)o.append(t,n[t])})(),t.headers={...t.headers||{},...s},a.call(e,t)}}function Pi(){const e=Math.random().toString(16).slice(2);return{data:{seqId:e},headers:{...Ai,"x-seqid":e}}}class Mi{constructor(e={}){var t;this.config=e,this._reqClass=new oi.adapter.reqClass({timeout:this.config.timeout,timeoutMsg:`请求在${this.config.timeout/1e3}s内未完成，已中断`,restrictedMethods:["post"]}),this._cache=pi(this.config.env),this._localCache=(t=this.config.env,ui[t]),Ci(this._reqClass,"post",[Pi]),Ci(this._reqClass,"upload",[Pi]),Ci(this._reqClass,"download",[Pi])}async post(e){return await this._reqClass.post(e)}async upload(e){return await this._reqClass.upload(e)}async download(e){return await this._reqClass.download(e)}async refreshAccessToken(){let e,t;this._refreshAccessTokenPromise||(this._refreshAccessTokenPromise=this._refreshAccessToken());try{e=await this._refreshAccessTokenPromise}catch(i){t=i}if(this._refreshAccessTokenPromise=null,this._shouldRefreshAccessTokenHook=null,t)throw t;return e}async _refreshAccessToken(){const{accessTokenKey:e,accessTokenExpireKey:t,refreshTokenKey:i,loginTypeKey:a,anonymousUuidKey:n}=this._cache.keys;this._cache.removeStore(e),this._cache.removeStore(t);let s=this._cache.getStore(i);if(!s)throw new Rt({message:"未登录CloudBase"});const o={refresh_token:s},r=await this.request("auth.fetchAccessTokenWithRefreshToken",o);if(r.data.code){const{code:e}=r.data;if("SIGN_PARAM_INVALID"===e||"REFRESH_TOKEN_EXPIRED"===e||"INVALID_REFRESH_TOKEN"===e){if(this._cache.getStore(a)===ki.ANONYMOUS&&"INVALID_REFRESH_TOKEN"===e){const e=this._cache.getStore(n),t=this._cache.getStore(i),a=await this.send("auth.signInAnonymously",{anonymous_uuid:e,refresh_token:t});return this.setRefreshToken(a.refresh_token),this._refreshAccessToken()}yi(Si),this._cache.removeStore(i)}throw new Rt({code:r.data.code,message:`刷新access token失败：${r.data.code}`})}if(r.data.access_token)return yi(vi),this._cache.setStore(e,r.data.access_token),this._cache.setStore(t,r.data.access_token_expire+Date.now()),{accessToken:r.data.access_token,accessTokenExpire:r.data.access_token_expire};r.data.refresh_token&&(this._cache.removeStore(i),this._cache.setStore(i,r.data.refresh_token),this._refreshAccessToken())}async getAccessToken(){const{accessTokenKey:e,accessTokenExpireKey:t,refreshTokenKey:i}=this._cache.keys;if(!this._cache.getStore(i))throw new Rt({message:"refresh token不存在，登录状态异常"});let a=this._cache.getStore(e),n=this._cache.getStore(t),s=!0;return this._shouldRefreshAccessTokenHook&&!(await this._shouldRefreshAccessTokenHook(a,n))&&(s=!1),(!a||!n||n<Date.now())&&s?this.refreshAccessToken():{accessToken:a,accessTokenExpire:n}}async request(e,t,i){const a=`x-tcb-trace_${this.config.env}`;let n="application/x-www-form-urlencoded";const s={action:e,env:this.config.env,dataVersion:"2019-08-16",...t};if(-1===Di.indexOf(e)){const{refreshTokenKey:e}=this._cache.keys;this._cache.getStore(e)&&(s.access_token=(await this.getAccessToken()).accessToken)}let o;if("storage.uploadFile"===e){o=new FormData;for(let e in o)o.hasOwnProperty(e)&&void 0!==o[e]&&o.append(e,s[e]);n="multipart/form-data"}else{n="application/json",o={};for(let e in s)void 0!==s[e]&&(o[e]=s[e])}let r={headers:{"content-type":n}};i&&i.onUploadProgress&&(r.onUploadProgress=i.onUploadProgress);const l=this._localCache.getStore(a);l&&(r.headers["X-TCB-Trace"]=l);const{parse:c,inQuery:h,search:d}=t;let u={env:this.config.env};c&&(u.parse=!0),h&&(u={...h,...u});let p=function(e,t,i={}){const a=/\?/.test(t);let n="";for(let s in i)""===n?!a&&(t+="?"):n+="&",n+=`${s}=${encodeURIComponent(i[s])}`;return/^http(s)?\:\/\//.test(t+=n)?t:`${e}${t}`}(Jt,"//tcb-api.tencentcloudapi.com/web",u);d&&(p+=d);const f=await this.post({url:p,data:o,...r}),g=f.header&&f.header["x-tcb-trace"];if(g&&this._localCache.setStore(a,g),200!==Number(f.status)&&200!==Number(f.statusCode)||!f.data)throw new Rt({code:"NETWORK_ERROR",message:"network request error"});return f}async send(e,t={}){const i=await this.request(e,t,{onUploadProgress:t.onUploadProgress});if("ACCESS_TOKEN_EXPIRED"===i.data.code&&-1===Di.indexOf(e)){await this.refreshAccessToken();const i=await this.request(e,t,{onUploadProgress:t.onUploadProgress});if(i.data.code)throw new Rt({code:i.data.code,message:i.data.message});return i.data}if(i.data.code)throw new Rt({code:i.data.code,message:i.data.message});return i.data}setRefreshToken(e){const{accessTokenKey:t,accessTokenExpireKey:i,refreshTokenKey:a}=this._cache.keys;this._cache.removeStore(t),this._cache.removeStore(i),this._cache.setStore(a,e)}}const Ii={};function Fi(e){return Ii[e]}class Li{constructor(e){this.config=e,this._cache=pi(e.env),this._request=Fi(e.env)}setRefreshToken(e){const{accessTokenKey:t,accessTokenExpireKey:i,refreshTokenKey:a}=this._cache.keys;this._cache.removeStore(t),this._cache.removeStore(i),this._cache.setStore(a,e)}setAccessToken(e,t){const{accessTokenKey:i,accessTokenExpireKey:a}=this._cache.keys;this._cache.setStore(i,e),this._cache.setStore(a,t)}async refreshUserInfo(){const{data:e}=await this._request.send("auth.getUserInfo",{});return this.setLocalUserInfo(e),e}setLocalUserInfo(e){const{userInfoKey:t}=this._cache.keys;this._cache.setStore(t,e)}}class Ri{constructor(e){if(!e)throw new Rt({code:"PARAM_ERROR",message:"envId is not defined"});this._envId=e,this._cache=pi(this._envId),this._request=Fi(this._envId),this.setUserInfo()}linkWithTicket(e){if("string"!=typeof e)throw new Rt({code:"PARAM_ERROR",message:"ticket must be string"});return this._request.send("auth.linkWithTicket",{ticket:e})}linkWithRedirect(e){e.signInWithRedirect()}updatePassword(e,t){return this._request.send("auth.updatePassword",{oldPassword:t,newPassword:e})}updateEmail(e){return this._request.send("auth.updateEmail",{newEmail:e})}updateUsername(e){if("string"!=typeof e)throw new Rt({code:"PARAM_ERROR",message:"username must be a string"});return this._request.send("auth.updateUsername",{username:e})}async getLinkedUidList(){const{data:e}=await this._request.send("auth.getLinkedUidList",{});let t=!1;const{users:i}=e;return i.forEach((e=>{e.wxOpenId&&e.wxPublicId&&(t=!0)})),{users:i,hasPrimaryUid:t}}setPrimaryUid(e){return this._request.send("auth.setPrimaryUid",{uid:e})}unlink(e){return this._request.send("auth.unlink",{platform:e})}async update(e){const{nickName:t,gender:i,avatarUrl:a,province:n,country:s,city:o}=e,{data:r}=await this._request.send("auth.updateUserInfo",{nickName:t,gender:i,avatarUrl:a,province:n,country:s,city:o});this.setLocalUserInfo(r)}async refresh(){const{data:e}=await this._request.send("auth.getUserInfo",{});return this.setLocalUserInfo(e),e}setUserInfo(){const{userInfoKey:e}=this._cache.keys,t=this._cache.getStore(e);["uid","loginType","openid","wxOpenId","wxPublicId","unionId","qqMiniOpenId","email","hasPassword","customUserId","nickName","gender","avatarUrl"].forEach((e=>{this[e]=t[e]})),this.location={country:t.country,province:t.province,city:t.city}}setLocalUserInfo(e){const{userInfoKey:t}=this._cache.keys;this._cache.setStore(t,e),this.setUserInfo()}}class Oi{constructor(e){if(!e)throw new Rt({code:"PARAM_ERROR",message:"envId is not defined"});this._cache=pi(e);const{refreshTokenKey:t,accessTokenKey:i,accessTokenExpireKey:a}=this._cache.keys,n=this._cache.getStore(t),s=this._cache.getStore(i),o=this._cache.getStore(a);this.credential={refreshToken:n,accessToken:s,accessTokenExpire:o},this.user=new Ri(e)}get isAnonymousAuth(){return this.loginType===ki.ANONYMOUS}get isCustomAuth(){return this.loginType===ki.CUSTOM}get isWeixinAuth(){return this.loginType===ki.WECHAT||this.loginType===ki.WECHAT_OPEN||this.loginType===ki.WECHAT_PUBLIC}get loginType(){return this._cache.getStore(this._cache.keys.loginTypeKey)}}class Ei extends Li{async signIn(){this._cache.updatePersistence("local");const{anonymousUuidKey:e,refreshTokenKey:t}=this._cache.keys,i=this._cache.getStore(e)||void 0,a=this._cache.getStore(t)||void 0,n=await this._request.send("auth.signInAnonymously",{anonymous_uuid:i,refresh_token:a});if(n.uuid&&n.refresh_token){this._setAnonymousUUID(n.uuid),this.setRefreshToken(n.refresh_token),await this._request.refreshAccessToken(),yi(_i),yi(wi,{env:this.config.env,loginType:ki.ANONYMOUS,persistence:"local"});const e=new Oi(this.config.env);return await e.user.refresh(),e}throw new Rt({message:"匿名登录失败"})}async linkAndRetrieveDataWithTicket(e){const{anonymousUuidKey:t,refreshTokenKey:i}=this._cache.keys,a=this._cache.getStore(t),n=this._cache.getStore(i),s=await this._request.send("auth.linkAndRetrieveDataWithTicket",{anonymous_uuid:a,refresh_token:n,ticket:e});if(s.refresh_token)return this._clearAnonymousUUID(),this.setRefreshToken(s.refresh_token),await this._request.refreshAccessToken(),yi(Ti,{env:this.config.env}),yi(wi,{loginType:ki.CUSTOM,persistence:"local"}),{credential:{refreshToken:s.refresh_token}};throw new Rt({message:"匿名转化失败"})}_setAnonymousUUID(e){const{anonymousUuidKey:t,loginTypeKey:i}=this._cache.keys;this._cache.removeStore(t),this._cache.setStore(t,e),this._cache.setStore(i,ki.ANONYMOUS)}_clearAnonymousUUID(){this._cache.removeStore(this._cache.keys.anonymousUuidKey)}}class Ni extends Li{async signIn(e){if("string"!=typeof e)throw new Rt({code:"PARAM_ERROR",message:"ticket must be a string"});const{refreshTokenKey:t}=this._cache.keys,i=await this._request.send("auth.signInWithTicket",{ticket:e,refresh_token:this._cache.getStore(t)||""});if(i.refresh_token)return this.setRefreshToken(i.refresh_token),await this._request.refreshAccessToken(),yi(_i),yi(wi,{env:this.config.env,loginType:ki.CUSTOM,persistence:this.config.persistence}),await this.refreshUserInfo(),new Oi(this.config.env);throw new Rt({message:"自定义登录失败"})}}class Bi extends Li{async signIn(e,t){if("string"!=typeof e)throw new Rt({code:"PARAM_ERROR",message:"email must be a string"});const{refreshTokenKey:i}=this._cache.keys,a=await this._request.send("auth.signIn",{loginType:"EMAIL",email:e,password:t,refresh_token:this._cache.getStore(i)||""}),{refresh_token:n,access_token:s,access_token_expire:o}=a;if(n)return this.setRefreshToken(n),s&&o?this.setAccessToken(s,o):await this._request.refreshAccessToken(),await this.refreshUserInfo(),yi(_i),yi(wi,{env:this.config.env,loginType:ki.EMAIL,persistence:this.config.persistence}),new Oi(this.config.env);throw a.code?new Rt({code:a.code,message:`邮箱登录失败: ${a.message}`}):new Rt({message:"邮箱登录失败"})}async activate(e){return this._request.send("auth.activateEndUserMail",{token:e})}async resetPasswordWithToken(e,t){return this._request.send("auth.resetPasswordWithToken",{token:e,newPassword:t})}}class zi extends Li{async signIn(e,t){if("string"!=typeof e)throw new Rt({code:"PARAM_ERROR",message:"username must be a string"});"string"!=typeof t&&(t="",console.warn("password is empty"));const{refreshTokenKey:i}=this._cache.keys,a=await this._request.send("auth.signIn",{loginType:ki.USERNAME,username:e,password:t,refresh_token:this._cache.getStore(i)||""}),{refresh_token:n,access_token_expire:s,access_token:o}=a;if(n)return this.setRefreshToken(n),o&&s?this.setAccessToken(o,s):await this._request.refreshAccessToken(),await this.refreshUserInfo(),yi(_i),yi(wi,{env:this.config.env,loginType:ki.USERNAME,persistence:this.config.persistence}),new Oi(this.config.env);throw a.code?new Rt({code:a.code,message:`用户名密码登录失败: ${a.message}`}):new Rt({message:"用户名密码登录失败"})}}class Ui{constructor(e){this.config=e,this._cache=pi(e.env),this._request=Fi(e.env),this._onAnonymousConverted=this._onAnonymousConverted.bind(this),this._onLoginTypeChanged=this._onLoginTypeChanged.bind(this),xi(wi,this._onLoginTypeChanged)}get currentUser(){const e=this.hasLoginState();return e&&e.user||null}get loginType(){return this._cache.getStore(this._cache.keys.loginTypeKey)}anonymousAuthProvider(){return new Ei(this.config)}customAuthProvider(){return new Ni(this.config)}emailAuthProvider(){return new Bi(this.config)}usernameAuthProvider(){return new zi(this.config)}async signInAnonymously(){return new Ei(this.config).signIn()}async signInWithEmailAndPassword(e,t){return new Bi(this.config).signIn(e,t)}signInWithUsernameAndPassword(e,t){return new zi(this.config).signIn(e,t)}async linkAndRetrieveDataWithTicket(e){return this._anonymousAuthProvider||(this._anonymousAuthProvider=new Ei(this.config)),xi(Ti,this._onAnonymousConverted),await this._anonymousAuthProvider.linkAndRetrieveDataWithTicket(e)}async signOut(){if(this.loginType===ki.ANONYMOUS)throw new Rt({message:"匿名用户不支持登出操作"});const{refreshTokenKey:e,accessTokenKey:t,accessTokenExpireKey:i}=this._cache.keys,a=this._cache.getStore(e);if(!a)return;const n=await this._request.send("auth.logout",{refresh_token:a});return this._cache.removeStore(e),this._cache.removeStore(t),this._cache.removeStore(i),yi(_i),yi(wi,{env:this.config.env,loginType:ki.NULL,persistence:this.config.persistence}),n}async signUpWithEmailAndPassword(e,t){return this._request.send("auth.signUpWithEmailAndPassword",{email:e,password:t})}async sendPasswordResetEmail(e){return this._request.send("auth.sendPasswordResetEmail",{email:e})}onLoginStateChanged(e){xi(_i,(()=>{const t=this.hasLoginState();e.call(this,t)}));const t=this.hasLoginState();e.call(this,t)}onLoginStateExpired(e){xi(Si,e.bind(this))}onAccessTokenRefreshed(e){xi(vi,e.bind(this))}onAnonymousConverted(e){xi(Ti,e.bind(this))}onLoginTypeChanged(e){xi(wi,(()=>{const t=this.hasLoginState();e.call(this,t)}))}async getAccessToken(){return{accessToken:(await this._request.getAccessToken()).accessToken,env:this.config.env}}hasLoginState(){const{refreshTokenKey:e}=this._cache.keys;return this._cache.getStore(e)?new Oi(this.config.env):null}async isUsernameRegistered(e){if("string"!=typeof e)throw new Rt({code:"PARAM_ERROR",message:"username must be a string"});const{data:t}=await this._request.send("auth.isUsernameRegistered",{username:e});return t&&t.isRegistered}getLoginState(){return Promise.resolve(this.hasLoginState())}async signInWithTicket(e){return new Ni(this.config).signIn(e)}shouldRefreshAccessToken(e){this._request._shouldRefreshAccessTokenHook=e.bind(this)}getUserInfo(){return this._request.send("auth.getUserInfo",{}).then((e=>e.code?e:{...e.data,requestId:e.seqId}))}getAuthHeader(){const{refreshTokenKey:e,accessTokenKey:t}=this._cache.keys,i=this._cache.getStore(e);return{"x-cloudbase-credentials":this._cache.getStore(t)+"/@@/"+i}}_onAnonymousConverted(e){const{env:t}=e.data;t===this.config.env&&this._cache.updatePersistence(this.config.persistence)}_onLoginTypeChanged(e){const{loginType:t,persistence:i,env:a}=e.data;a===this.config.env&&(this._cache.updatePersistence(i),this._cache.setStore(this._cache.keys.loginTypeKey,t))}}const Wi=function(e,t){t=t||ii();const i=Fi(this.config.env),{cloudPath:a,filePath:n,onUploadProgress:s,fileType:o="image"}=e;return i.send("storage.getUploadMetadata",{path:a}).then((e=>{const{data:{url:r,authorization:l,token:c,fileId:h,cosFileId:d},requestId:u}=e,p={key:a,signature:l,"x-cos-meta-fileid":d,success_action_status:"201","x-cos-security-token":c};i.upload({url:r,data:p,file:n,name:a,fileType:o,onUploadProgress:s}).then((e=>{201===e.statusCode?t(null,{fileID:h,requestId:u}):t(new Rt({code:"STORAGE_REQUEST_FAIL",message:`STORAGE_REQUEST_FAIL: ${e.data}`}))})).catch((e=>{t(e)}))})).catch((e=>{t(e)})),t.promise},$i=function(e,t){t=t||ii();const i=Fi(this.config.env),{cloudPath:a}=e;return i.send("storage.getUploadMetadata",{path:a}).then((e=>{t(null,e)})).catch((e=>{t(e)})),t.promise},Vi=function({fileList:e},t){if(t=t||ii(),!e||!Array.isArray(e))return{code:"INVALID_PARAM",message:"fileList必须是非空的数组"};for(let a of e)if(!a||"string"!=typeof a)return{code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"};const i={fileid_list:e};return Fi(this.config.env).send("storage.batchDeleteFile",i).then((e=>{e.code?t(null,e):t(null,{fileList:e.data.delete_list,requestId:e.requestId})})).catch((e=>{t(e)})),t.promise},ji=function({fileList:e},t){t=t||ii(),e&&Array.isArray(e)||t(null,{code:"INVALID_PARAM",message:"fileList必须是非空的数组"});let i=[];for(let n of e)"object"==typeof n?(n.hasOwnProperty("fileID")&&n.hasOwnProperty("maxAge")||t(null,{code:"INVALID_PARAM",message:"fileList的元素必须是包含fileID和maxAge的对象"}),i.push({fileid:n.fileID,max_age:n.maxAge})):"string"==typeof n?i.push({fileid:n}):t(null,{code:"INVALID_PARAM",message:"fileList的元素必须是字符串"});const a={file_list:i};return Fi(this.config.env).send("storage.batchGetDownloadUrl",a).then((e=>{e.code?t(null,e):t(null,{fileList:e.data.download_list,requestId:e.requestId})})).catch((e=>{t(e)})),t.promise},Hi=async function({fileID:e},t){const i=(await ji.call(this,{fileList:[{fileID:e,maxAge:600}]})).fileList[0];if("SUCCESS"!==i.code)return t?t(i):new Promise((e=>{e(i)}));const a=Fi(this.config.env);let n=i.download_url;if(n=encodeURI(n),!t)return a.download({url:n});t(await a.download({url:n}))},qi=function({name:e,data:t,query:i,parse:a,search:n},s){const o=s||ii();let r;try{r=t?JSON.stringify(t):""}catch(c){return Promise.reject(c)}if(!e)return Promise.reject(new Rt({code:"PARAM_ERROR",message:"函数名不能为空"}));const l={inQuery:i,parse:a,search:n,function_name:e,request_data:r};return Fi(this.config.env).send("functions.invokeFunction",l).then((e=>{if(e.code)o(null,e);else{let i=e.data.response_data;if(a)o(null,{result:i,requestId:e.requestId});else try{i=JSON.parse(e.data.response_data),o(null,{result:i,requestId:e.requestId})}catch(t){o(new Rt({message:"response data must be json"}))}}return o.promise})).catch((e=>{o(e)})),o.promise},Gi={timeout:15e3,persistence:"session"},Ki={};class Ji{constructor(e){this.config=e||this.config,this.authObj=void 0}init(e){switch(oi.adapter||(this.requestClient=new oi.adapter.reqClass({timeout:e.timeout||5e3,timeoutMsg:`请求在${(e.timeout||5e3)/1e3}s内未完成，已中断`})),this.config={...Gi,...e},!0){case this.config.timeout>6e5:console.warn("timeout大于可配置上限[10分钟]，已重置为上限数值"),this.config.timeout=6e5;break;case this.config.timeout<100:console.warn("timeout小于可配置下限[100ms]，已重置为下限数值"),this.config.timeout=100}return new Ji(this.config)}auth({persistence:e}={}){if(this.authObj)return this.authObj;const t=e||oi.adapter.primaryStorage||Gi.persistence;var i;return t!==this.config.persistence&&(this.config.persistence=t),function(e){const{env:t}=e;di[t]=new hi(e),ui[t]=new hi({...e,persistence:"local"})}(this.config),i=this.config,Ii[i.env]=new Mi(i),this.authObj=new Ui(this.config),this.authObj}on(e,t){return xi.apply(this,[e,t])}off(e,t){return bi.apply(this,[e,t])}callFunction(e,t){return qi.apply(this,[e,t])}deleteFile(e,t){return Vi.apply(this,[e,t])}getTempFileURL(e,t){return ji.apply(this,[e,t])}downloadFile(e,t){return Hi.apply(this,[e,t])}uploadFile(e,t){return Wi.apply(this,[e,t])}getUploadMetadata(e,t){return $i.apply(this,[e,t])}registerExtension(e){Ki[e.name]=e}async invokeExtension(e,t){const i=Ki[e];if(!i)throw new Rt({message:`扩展${e} 必须先注册`});return await i.invoke(t,this)}useAdapters(e){const{adapter:t,runtime:i}=function(e){const t=(i=e,"[object Array]"===Object.prototype.toString.call(i)?e:[e]);var i;for(const a of t){const{isMatch:e,genAdapter:t,runtime:i}=a;if(e())return{adapter:t(),runtime:i}}}(e)||{};t&&(oi.adapter=t),i&&(oi.runtime=i)}}var Yi=new Ji;function Xi(e,t,i){void 0===i&&(i={});var a=/\?/.test(t),n="";for(var s in i)""===n?!a&&(t+="?"):n+="&",n+=s+"="+encodeURIComponent(i[s]);return/^http(s)?:\/\//.test(t+=n)?t:""+e+t}class Qi{post(e){const{url:t,data:i,headers:a}=e;return new Promise(((e,n)=>{Ot.request({url:Xi("https:",t),data:i,method:"POST",header:a,success(t){e(t)},fail(e){n(e)}})}))}upload(e){return new Promise(((t,i)=>{const{url:a,file:n,data:s,headers:o,fileType:r}=e,l=Ot.uploadFile({url:Xi("https:",a),name:"file",formData:Object.assign({},s),filePath:n,fileType:r,header:o,success(e){const i={statusCode:e.statusCode,data:e.data||{}};200===e.statusCode&&s.success_action_status&&(i.statusCode=parseInt(s.success_action_status,10)),t(i)},fail(e){i(new Error(e.errMsg||"uploadFile:fail"))}});"function"==typeof e.onUploadProgress&&l&&"function"==typeof l.onProgressUpdate&&l.onProgressUpdate((t=>{e.onUploadProgress({loaded:t.totalBytesSent,total:t.totalBytesExpectedToSend})}))}))}}const Zi={setItem(e,t){Ot.setStorageSync(e,t)},getItem:e=>Ot.getStorageSync(e),removeItem(e){Ot.removeStorageSync(e)},clear(){Ot.clearStorageSync()}};var ea={genAdapter:function(){return{root:{},reqClass:Qi,localStorage:Zi,primaryStorage:"local"}},isMatch:function(){return!0},runtime:"uni_app"};Yi.useAdapters(ea);const ta=Yi,ia=ta.init;ta.init=function(e){e.env=e.spaceId;const t=ia.call(this,e);t.config.provider="tencent",t.config.spaceId=e.spaceId;const i=t.auth;return t.auth=function(e){const t=i.call(this,e);return["linkAndRetrieveDataWithTicket","signInAnonymously","signOut","getAccessToken","getLoginState","signInWithTicket","getUserInfo"].forEach((e=>{var i;t[e]=(i=t[e],function(e){e=e||{};const{success:t,fail:a,complete:n}=Lt(e);if(!(t||a||n))return i.call(this,e);i.call(this,e).then((e=>{t&&t(e),n&&n(e)}),(e=>{a&&a(e),n&&n(e)}))}).bind(t)})),t},t.customAuth=t.auth,t};var aa=ta,na=class extends Gt{getAccessToken(){return new Promise(((e,t)=>{const i="Anonymous_Access_token";this.setAccessToken(i),e(i)}))}setupRequest(e,t){const i=Object.assign({},e,{spaceId:this.config.spaceId,timestamp:Date.now()}),a={"Content-Type":"application/json"};"auth"!==t&&(i.token=this.accessToken,a["x-basement-token"]=this.accessToken),a["x-serverless-sign"]=jt(i,this.config.clientSecret);const n=Vt();a["x-client-info"]=encodeURIComponent(JSON.stringify(n));const{token:s}=Nt();return a["x-client-token"]=s,{url:this.config.requestUrl,method:"POST",data:i,dataType:"json",header:JSON.parse(JSON.stringify(a))}}uploadFileToOSS({url:e,formData:t,name:i,filePath:a,fileType:n,onUploadProgress:s}){return new Promise(((o,r)=>{const l=this.adapter.uploadFile({url:e,formData:t,name:i,filePath:a,fileType:n,success(e){e&&e.statusCode<400?o(e):r(new Rt({code:"UPLOAD_FAILED",message:"文件上传失败"}))},fail(e){r(new Rt({code:e.code||"UPLOAD_FAILED",message:e.message||e.errMsg||"文件上传失败"}))}});"function"==typeof s&&l&&"function"==typeof l.onProgressUpdate&&l.onProgressUpdate((e=>{s({loaded:e.totalBytesSent,total:e.totalBytesExpectedToSend})}))}))}uploadFile({filePath:e,cloudPath:t,fileType:i="image",onUploadProgress:a}){if(!t)throw new Rt({code:"CLOUDPATH_REQUIRED",message:"cloudPath不可为空"});let n;return this.getOSSUploadOptionsFromPath({cloudPath:t}).then((t=>{const{url:s,formData:o,name:r}=t.result;n=t.result.fileUrl;const l={url:s,formData:o,name:r,filePath:e,fileType:i};return this.uploadFileToOSS(Object.assign({},l,{onUploadProgress:a}))})).then((()=>this.reportOSSUpload({cloudPath:t}))).then((t=>new Promise(((i,a)=>{t.success?i({success:!0,filePath:e,fileID:n}):a(new Rt({code:"UPLOAD_FAILED",message:"文件上传失败"}))}))))}deleteFile({fileList:e}){const t={method:"serverless.file.resource.delete",params:JSON.stringify({fileList:e})};return this.request(this.setupRequest(t)).then((e=>{if(e.success)return e.result;throw new Rt({code:"DELETE_FILE_FAILED",message:"删除文件失败"})}))}getTempFileURL({fileList:e,maxAge:t}={}){if(!Array.isArray(e)||0===e.length)throw new Rt({code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"});const i={method:"serverless.file.resource.getTempFileURL",params:JSON.stringify({fileList:e,maxAge:t})};return this.request(this.setupRequest(i)).then((e=>{if(e.success)return{fileList:e.result.fileList.map((e=>({fileID:e.fileID,tempFileURL:e.tempFileURL})))};throw new Rt({code:"GET_TEMP_FILE_URL_FAILED",message:"获取临时文件链接失败"})}))}},sa={init(e){const t=new na(e),i={signInAnonymously:function(){return t.authorize()},getLoginState:function(){return Promise.resolve(!1)}};return t.auth=function(){return i},t.customAuth=t.auth,t}},oa=je((function(e,t){e.exports=qe.enc.Hex}));function ra(e="",t={}){const{data:i,functionName:a,method:n,headers:s,signHeaderKeys:o=[],config:r}=t,l=Date.now(),c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),h=Object.assign({},s,{"x-from-app-id":r.spaceAppId,"x-from-env-id":r.spaceId,"x-to-env-id":r.spaceId,"x-from-instance-id":l,"x-from-function-name":a,"x-client-timestamp":l,"x-alipay-source":"client","x-request-id":c,"x-alipay-callid":c,"x-trace-id":c}),d=["x-from-app-id","x-from-env-id","x-to-env-id","x-from-instance-id","x-from-function-name","x-client-timestamp"].concat(o),[u="",p=""]=e.split("?")||[],f=function(e){const t=e.signedHeaders.join(";"),i=e.signedHeaders.map((t=>`${t.toLowerCase()}:${e.headers[t]}\n`)).join(""),a=ei(e.body).toString(oa),n=`${e.method.toUpperCase()}\n${e.path}\n${e.query}\n${i}\n${t}\n${a}\n`,s=ei(n).toString(oa),o=`HMAC-SHA256\n${e.timestamp}\n${s}\n`,r=ti(o,e.secretKey).toString(oa);return`HMAC-SHA256 Credential=${e.secretId}, SignedHeaders=${t}, Signature=${r}`}({path:u,query:p,method:n,headers:h,timestamp:l,body:JSON.stringify(i),secretId:r.accessKey,secretKey:r.secretKey,signedHeaders:d.sort()});return{url:`${r.endpoint}${e}`,headers:Object.assign({},h,{Authorization:f})}}function la({url:e,data:t,method:i="POST",headers:a={}}){return new Promise(((n,s)=>{Ot.request({url:e,method:i,data:t,header:a,dataType:"json",complete:(e={})=>{const t=a["x-trace-id"]||"";if(!e.statusCode||e.statusCode>=400){const{message:i,errMsg:a,trace_id:n}=e.data||{};return s(new Rt({code:"SYS_ERR",message:i||a||"request:fail",requestId:n||t}))}n({status:e.statusCode,data:e.data,headers:e.header,requestId:t})}})}))}function ca(e,t){const{path:i,data:a,method:n="GET"}=e,{url:s,headers:o}=ra(i,{functionName:"",data:a,method:n,headers:{"x-alipay-cloud-mode":"oss","x-data-api-type":"oss","x-expire-timestamp":Date.now()+6e4},signHeaderKeys:["x-data-api-type","x-expire-timestamp"],config:t});return la({url:s,data:a,method:n,headers:o}).then((e=>{const t=e.data||{};if(!t.success)throw new Rt({code:e.errCode,message:e.errMsg,requestId:e.requestId});return t.data||{}})).catch((e=>{throw new Rt({code:e.errCode,message:e.errMsg,requestId:e.requestId})}))}function ha(e=""){const t=e.trim().replace(/^cloud:\/\//,""),i=t.indexOf("/");if(i<=0)throw new Rt({code:"INVALID_PARAM",message:"fileID不合法"});const a=t.substring(0,i),n=t.substring(i+1);return a!==this.config.spaceId&&console.warn("file ".concat(e," does not belong to env ").concat(this.config.spaceId)),n}function da(e=""){return"cloud://".concat(this.config.spaceId,"/").concat(e.replace(/^\/+/,""))}var ua={init:e=>{e.provider="alipay";const t=new class{constructor(e){if(["spaceId","spaceAppId","accessKey","secretKey"].forEach((t=>{if(!Object.prototype.hasOwnProperty.call(e,t))throw new Error(`${t} required`)})),e.endpoint){if("string"!=typeof e.endpoint)throw new Error("endpoint must be string");if(!/^https:\/\//.test(e.endpoint))throw new Error("endpoint must start with https://");e.endpoint=e.endpoint.replace(/\/$/,"")}this.config=Object.assign({},e,{endpoint:e.endpoint||`https://${e.spaceId}.api-hz.cloudbasefunction.cn`})}callFunction(e){return function(e,t){const{name:i,data:a}=e,n="POST",{url:s,headers:o}=ra("/functions/invokeFunction",{functionName:i,data:a,method:n,headers:{"x-to-function-name":i},signHeaderKeys:["x-to-function-name"],config:t});return la({url:s,data:a,method:n,headers:o}).then((e=>({errCode:0,success:!0,requestId:e.requestId,result:e.data}))).catch((e=>{throw new Rt({code:e.errCode,message:e.errMsg,requestId:e.requestId})}))}(e,this.config)}uploadFileToOSS({url:e,filePath:t,fileType:i,formData:a,onUploadProgress:n}){return new Promise(((s,o)=>{const r=Ot.uploadFile({url:e,filePath:t,fileType:i,formData:a,name:"file",success(e){e&&e.statusCode<400?s(e):o(new Rt({code:"UPLOAD_FAILED",message:"文件上传失败"}))},fail(e){o(new Rt({code:e.code||"UPLOAD_FAILED",message:e.message||e.errMsg||"文件上传失败"}))}});"function"==typeof n&&r&&"function"==typeof r.onProgressUpdate&&r.onProgressUpdate((e=>{n({loaded:e.totalBytesSent,total:e.totalBytesExpectedToSend})}))}))}async uploadFile({filePath:e,cloudPath:t="",fileType:i="image",onUploadProgress:a}){if("string"!==Ze(t))throw new Rt({code:"INVALID_PARAM",message:"cloudPath必须为字符串类型"});if(!(t=t.trim()))throw new Rt({code:"INVALID_PARAM",message:"cloudPath不可为空"});if(/:\/\//.test(t))throw new Rt({code:"INVALID_PARAM",message:"cloudPath不合法"});const n=await ca({path:"/".concat(t.replace(/^\//,""),"?post_url")},this.config),{file_id:s,upload_url:o,form_data:r}=n,l=r&&r.reduce(((e,t)=>(e[t.key]=t.value,e)),{});return this.uploadFileToOSS({url:o,filePath:e,fileType:i,formData:l,onUploadProgress:a}).then((()=>({fileID:s})))}async getTempFileURL({fileList:e}){return new Promise(((t,i)=>{(!e||e.length<0)&&i(new Rt({errCode:"INVALID_PARAM",errMsg:"fileList不能为空数组"})),e.length>50&&i(new Rt({errCode:"INVALID_PARAM",errMsg:"fileList数组长度不能超过50"}));const a=[];for(const n of e){"string"!==Ze(n)&&i(new Rt({errCode:"INVALID_PARAM",errMsg:"fileList的元素必须是非空的字符串"}));const e=ha.call(this,n);a.push({file_id:e,expire:600})}ca({path:"/?download_url",data:{file_list:a},method:"POST"},this.config).then((e=>{const{file_list:i=[]}=e;t({fileList:i.map((e=>({fileID:da.call(this,e.file_id),tempFileURL:e.download_url})))})})).catch((e=>i(e)))}))}}(e);return t.auth=function(){return{signInAnonymously:function(){return Promise.resolve()},getLoginState:function(){return Promise.resolve(!0)}}},t}};function pa({data:e}){let t;t=Vt();const i=JSON.parse(JSON.stringify(e||{}));if(Object.assign(i,{clientInfo:t}),!i.uniIdToken){const{token:e}=Nt();e&&(i.uniIdToken=e)}return i}const fa=[{rule:/fc_function_not_found|FUNCTION_NOT_FOUND/,content:"，云函数[{functionName}]在云端不存在，请检查此云函数名称是否正确以及该云函数是否已上传到服务空间",mode:"append"}];var ga=/[\\^$.*+?()[\]{}|]/g,ma=RegExp(ga.source);function xa(e,t,i){return e.replace(new RegExp((a=t)&&ma.test(a)?a.replace(ga,"\\$&"):a,"g"),i);var a}const ya=2e4,ba={code:20101,message:"Invalid client"};function _a(e){const{errSubject:t,subject:i,errCode:a,errMsg:n,code:s,message:o,cause:r}=e||{};return new Rt({subject:t||i||"uni-secure-network",code:a||s||ya,message:n||o,cause:r})}let Sa;function wa({secretType:e}={}){return"request"===e||"response"===e||"both"===e}function Ta({functionName:e,result:t,logPvd:i}){}function va(e){const t=e.callFunction,i=function(i){const a=i.name;i.data=pa.call(e,{data:i.data});const n={aliyun:"aliyun",tencent:"tcb",tcb:"tcb",alipay:"alipay"}[this.config.provider],s=wa(i)||false;return t.call(this,i).then((e=>(e.errCode=0,!s&&Ta.call(this,{functionName:a,result:e,logPvd:n}),Promise.resolve(e))),(e=>(!s&&Ta.call(this,{functionName:a,result:e,logPvd:n}),e&&e.message&&(e.message=function({message:e="",extraInfo:t={},formatter:i=[]}={}){for(let a=0;a<i.length;a++){const{rule:n,content:s,mode:o}=i[a],r=e.match(n);if(!r)continue;let l=s;for(let e=1;e<r.length;e++)l=xa(l,`{$${e}}`,r[e]);for(const e in t)l=xa(l,`{${e}}`,t[e]);return"replace"===o?l:e+l}return e}({message:`[${i.name}]: ${e.message}`,formatter:fa,extraInfo:{functionName:a}})),Promise.reject(e))))};e.callFunction=function(t){const{provider:a,spaceId:n}=e.config,s=t.name;let o,r;return t.data=t.data||{},o=i,o=o.bind(e),r=wa(t)?new Sa({secretType:t.secretType,uniCloudIns:e}).wrapEncryptDataCallFunction(i.bind(e))(t):function({provider:e,spaceId:t,functionName:i}={}){const{appId:a,uniPlatform:n,osName:s}=Wt();let o=n;"app"===n&&(o=s);const r=function({provider:e,spaceId:t}={}){if(!rt)return{};var i;e="tencent"===(i=e)?"tcb":i;const a=rt.find((i=>i.provider===e&&i.spaceId===t));return a&&a.config}({provider:e,spaceId:t});if(!r||!r.accessControl||!r.accessControl.enable)return!1;const l=r.accessControl.function||{},c=Object.keys(l);if(0===c.length)return!0;const h=function(e,t){let i,a,n;for(let s=0;s<e.length;s++){const o=e[s];o!==t?"*"!==o?o.split(",").map((e=>e.trim())).indexOf(t)>-1&&(a=o):n=o:i=o}return i||a||n}(c,i);if(!h)return!1;if((l[h]||[]).find(((e={})=>e.appId===a&&(e.platform||"").toLowerCase()===o.toLowerCase())))return!0;throw console.error(`此应用[appId: ${a}, platform: ${o}]不在云端配置的允许访问的应用列表内，参考：https://uniapp.dcloud.net.cn/uniCloud/secure-network.html#verify-client`),_a(ba)}({provider:a,spaceId:n,functionName:s})?new Sa({secretType:t.secretType,uniCloudIns:e}).wrapVerifyClientCallFunction(i.bind(e))(t):o(t),Object.defineProperty(r,"result",{get:()=>(console.warn("当前返回结果为Promise类型，不可直接访问其result属性，详情请参考：https://uniapp.dcloud.net.cn/uniCloud/faq?id=promise"),{})}),r.then((e=>("undefined"!=typeof UTSJSONObject&&(e.result=new UTSJSONObject(e.result)),e)))}}Sa=class{constructor(){throw _a({message:"Platform web is not supported by secure network"})}};const ka=Symbol("CLIENT_DB_INTERNAL");function Da(e,t){return e.then="DoNotReturnProxyWithAFunctionNamedThen",e._internalType=ka,e.inspect=null,e.__v_raw=void 0,new Proxy(e,{get(e,i,a){if("_uniClient"===i)return null;if("symbol"==typeof i)return e[i];if(i in e||"string"!=typeof i){const t=e[i];return"function"==typeof t?t.bind(e):t}return t.get(e,i,a)}})}function Aa(e){return{on:(t,i)=>{e[t]=e[t]||[],e[t].indexOf(i)>-1||e[t].push(i)},off:(t,i)=>{e[t]=e[t]||[];const a=e[t].indexOf(i);-1!==a&&e[t].splice(a,1)}}}const Ca=["db.Geo","db.command","command.aggregate"];function Pa(e,t){return Ca.indexOf(`${e}.${t}`)>-1}function Ma(e){switch(Ze(e=Et(e))){case"array":return e.map((e=>Ma(e)));case"object":return e._internalType===ka||Object.keys(e).forEach((t=>{e[t]=Ma(e[t])})),e;case"regexp":return{$regexp:{source:e.source,flags:e.flags}};case"date":return{$date:e.toISOString()};default:return e}}function Ia(e){return e&&e.content&&e.content.$method}class Fa{constructor(e,t,i){this.content=e,this.prevStage=t||null,this.udb=null,this._database=i}toJSON(){let e=this;const t=[e.content];for(;e.prevStage;)e=e.prevStage,t.push(e.content);return{$db:t.reverse().map((e=>({$method:e.$method,$param:Ma(e.$param)})))}}toString(){return JSON.stringify(this.toJSON())}getAction(){const e=this.toJSON().$db.find((e=>"action"===e.$method));return e&&e.$param&&e.$param[0]}getCommand(){return{$db:this.toJSON().$db.filter((e=>"action"!==e.$method))}}get isAggregate(){let e=this;for(;e;){const t=Ia(e),i=Ia(e.prevStage);if("aggregate"===t&&"collection"===i||"pipeline"===t)return!0;e=e.prevStage}return!1}get isCommand(){let e=this;for(;e;){if("command"===Ia(e))return!0;e=e.prevStage}return!1}get isAggregateCommand(){let e=this;for(;e;){const t=Ia(e),i=Ia(e.prevStage);if("aggregate"===t&&"command"===i)return!0;e=e.prevStage}return!1}getNextStageFn(e){const t=this;return function(){return La({$method:e,$param:Ma(Array.from(arguments))},t,t._database)}}get count(){return this.isAggregate?this.getNextStageFn("count"):function(){return this._send("count",Array.from(arguments))}}get remove(){return this.isCommand?this.getNextStageFn("remove"):function(){return this._send("remove",Array.from(arguments))}}get(){return this._send("get",Array.from(arguments))}get add(){return this.isCommand?this.getNextStageFn("add"):function(){return this._send("add",Array.from(arguments))}}update(){return this._send("update",Array.from(arguments))}end(){return this._send("end",Array.from(arguments))}get set(){return this.isCommand?this.getNextStageFn("set"):function(){throw new Error("JQL禁止使用set方法")}}_send(e,t){const i=this.getAction(),a=this.getCommand();return a.$db.push({$method:e,$param:Ma(t)}),this._database._callCloudFunction({action:i,command:a})}}function La(e,t,i){return Da(new Fa(e,t,i),{get(e,t){let a="db";return e&&e.content&&(a=e.content.$method),Pa(a,t)?La({$method:t},e,i):function(){return La({$method:t,$param:Ma(Array.from(arguments))},e,i)}}})}function Ra({path:e,method:t}){return class{constructor(){this.param=Array.from(arguments)}toJSON(){return{$newDb:[...e.map((e=>({$method:e}))),{$method:t,$param:this.param}]}}toString(){return JSON.stringify(this.toJSON())}}}function Oa(e,t={}){return Da(new e(t),{get:(e,t)=>Pa("db",t)?La({$method:t},null,e):function(){return La({$method:t,$param:Ma(Array.from(arguments))},null,e)}})}class Ea extends class{constructor({uniClient:e={},isJQL:t=!1}={}){this._uniClient=e,this._authCallBacks={},this._dbCallBacks={},e._isDefault&&(this._dbCallBacks=dt("_globalUniCloudDatabaseCallback")),t||(this.auth=Aa(this._authCallBacks)),this._isJQL=t,Object.assign(this,Aa(this._dbCallBacks)),this.env=Da({},{get:(e,t)=>({$env:t})}),this.Geo=Da({},{get:(e,t)=>Ra({path:["Geo"],method:t})}),this.serverDate=Ra({path:[],method:"serverDate"}),this.RegExp=Ra({path:[],method:"RegExp"})}getCloudEnv(e){if("string"!=typeof e||!e.trim())throw new Error("getCloudEnv参数错误");return{$env:e.replace("$cloudEnv_","")}}_callback(e,t){const i=this._dbCallBacks;i[e]&&i[e].forEach((e=>{e(...t)}))}_callbackAuth(e,t){const i=this._authCallBacks;i[e]&&i[e].forEach((e=>{e(...t)}))}multiSend(){const e=Array.from(arguments),t=e.map((e=>{const t=e.getAction(),i=e.getCommand();if("getTemp"!==i.$db[i.$db.length-1].$method)throw new Error("multiSend只支持子命令内使用getTemp");return{action:t,command:i}}));return this._callCloudFunction({multiCommand:t,queryList:e})}}{_parseResult(e){return this._isJQL?e.result:e}_callCloudFunction({action:e,command:t,multiCommand:i,queryList:a}){function n(e,t){if(i&&a)for(let i=0;i<a.length;i++){const n=a[i];n.udb&&"function"==typeof n.udb.setResult&&(t?n.udb.setResult(t):n.udb.setResult(e.result.dataList[i]))}}const s=this,o=this._isJQL?"databaseForJQL":"database";function r(e){return s._callback("error",[e]),mt(xt(o,"fail"),e).then((()=>mt(xt(o,"complete"),e))).then((()=>(n(null,e),Pt(_t,{type:Tt,content:e}),Promise.reject(e))))}const l=mt(xt(o,"invoke")),c=this._uniClient;return l.then((()=>c.callFunction({name:"DCloud-clientDB",type:"CLIENT_DB",data:{action:e,command:t,multiCommand:i}}))).then((e=>{const{code:t,message:i,token:a,tokenExpired:l,systemInfo:c=[]}=e.result;if(c)for(let n=0;n<c.length;n++){const{level:e,message:t,detail:i}=c[n],a=console[e]||console.log;let s="[System Info]"+t;i&&(s=`${s}\n详细信息：${i}`),a(s)}if(t)return r(new Rt({code:t,message:i,requestId:e.requestId}));e.result.errCode=e.result.errCode||e.result.code,e.result.errMsg=e.result.errMsg||e.result.message,a&&l&&(Bt({token:a,tokenExpired:l}),this._callbackAuth("refreshToken",[{token:a,tokenExpired:l}]),this._callback("refreshToken",[{token:a,tokenExpired:l}]),Pt(wt,{token:a,tokenExpired:l}));const h=[{prop:"affectedDocs",tips:"affectedDocs不再推荐使用，请使用inserted/deleted/updated/data.length替代"},{prop:"code",tips:"code不再推荐使用，请使用errCode替代"},{prop:"message",tips:"message不再推荐使用，请使用errMsg替代"}];for(let n=0;n<h.length;n++){const{prop:t,tips:i}=h[n];if(t in e.result){const a=e.result[t];Object.defineProperty(e.result,t,{get:()=>(console.warn(i),a)})}}return d=e,mt(xt(o,"success"),d).then((()=>mt(xt(o,"complete"),d))).then((()=>{n(d,null);const e=s._parseResult(d);return Pt(_t,{type:Tt,content:e}),Promise.resolve(e)}));var d}),(e=>(/fc_function_not_found|FUNCTION_NOT_FOUND/g.test(e.message)&&console.warn("clientDB未初始化，请在web控制台保存一次schema以开启clientDB"),r(new Rt({code:e.code||"SYSTEM_ERROR",message:e.message,requestId:e.requestId})))))}}const Na="token无效，跳转登录页面",Ba="token过期，跳转登录页面",za={TOKEN_INVALID_TOKEN_EXPIRED:Ba,TOKEN_INVALID_INVALID_CLIENTID:Na,TOKEN_INVALID:Na,TOKEN_INVALID_WRONG_TOKEN:Na,TOKEN_INVALID_ANONYMOUS_USER:Na},Ua={"uni-id-token-expired":Ba,"uni-id-check-token-failed":Na,"uni-id-token-not-exist":Na,"uni-id-check-device-feature-failed":Na};function Wa(e,t){let i="";return i=e?`${e}/${t}`:t,i.replace(/^\//,"")}function $a(e=[],t=""){const i=[],a=[];return e.forEach((e=>{!0===e.needLogin?i.push(Wa(t,e.path)):!1===e.needLogin&&a.push(Wa(t,e.path))})),{needLoginPage:i,notNeedLoginPage:a}}function Va(e){return e.split("?")[0].replace(/^\//,"")}function ja(){return function(e){let t=e&&e.$page&&e.$page.fullPath||"";return t?("/"!==t.charAt(0)&&(t="/"+t),t):t}(function(){const e=F();return e[e.length-1]}())}function Ha(){return Va(ja())}function qa(e="",t={}){if(!e)return!1;if(!(t&&t.list&&t.list.length))return!1;const i=t.list,a=Va(e);return i.some((e=>e.pagePath===a))}const Ga=!!Ve.uniIdRouter,{loginPage:Ka,routerNeedLogin:Ja,resToLogin:Ya,needLoginPage:Xa,notNeedLoginPage:Qa,loginPageInTabBar:Za}=function({pages:e=[],subPackages:t=[],uniIdRouter:i={},tabBar:a={}}=Ve){const{loginPage:n,needLogin:s=[],resToLogin:o=!0}=i,{needLoginPage:r,notNeedLoginPage:l}=$a(e),{needLoginPage:c,notNeedLoginPage:h}=function(e=[]){const t=[],i=[];return e.forEach((e=>{const{root:a,pages:n=[]}=e,{needLoginPage:s,notNeedLoginPage:o}=$a(n,a);t.push(...s),i.push(...o)})),{needLoginPage:t,notNeedLoginPage:i}}(t);return{loginPage:n,routerNeedLogin:s,resToLogin:o,needLoginPage:[...r,...c],notNeedLoginPage:[...l,...h],loginPageInTabBar:qa(n,a)}}();if(Xa.indexOf(Ka)>-1)throw new Error(`Login page [${Ka}] should not be "needLogin", please check your pages.json`);function en(e){const t=Ha();if("/"===e.charAt(0))return e;const[i,a]=e.split("?"),n=i.replace(/^\//,"").split("/"),s=t.split("/");s.pop();for(let o=0;o<n.length;o++){const e=n[o];".."===e?s.pop():"."!==e&&s.push(e)}return""===s[0]&&s.shift(),"/"+s.join("/")+(a?"?"+a:"")}function tn({redirect:e}){const t=Va(e),i=Va(Ka);return Ha()!==i&&t!==i}function an({api:e,redirect:t}={}){if(!t||!tn({redirect:t}))return;const i=(n=t,"/"!==(a=Ka).charAt(0)&&(a="/"+a),n?a.indexOf("?")>-1?a+`&uniIdRedirectUrl=${encodeURIComponent(n)}`:a+`?uniIdRedirectUrl=${encodeURIComponent(n)}`:a);var a,n;Za?"navigateTo"!==e&&"redirectTo"!==e||(e="switchTab"):"switchTab"===e&&(e="navigateTo");const s={navigateTo:G,redirectTo:K,switchTab:J,reLaunch:Y};setTimeout((()=>{s[e]({url:i})}))}function nn({url:e}={}){const t={abortLoginPageJump:!1,autoToLoginPage:!1},i=function(){const{token:e,tokenExpired:t}=Nt();let i;if(e){if(t<Date.now()){const e="uni-id-token-expired";i={errCode:e,errMsg:Ua[e]}}}else{const e="uni-id-check-token-failed";i={errCode:e,errMsg:Ua[e]}}return i}();if(function(e){const t=Va(en(e));return!(Qa.indexOf(t)>-1)&&(Xa.indexOf(t)>-1||Ja.some((t=>{return i=e,new RegExp(t).test(i);var i})))}(e)&&i){if(i.uniIdRedirectUrl=e,Dt(St).length>0)return setTimeout((()=>{Pt(St,i)}),0),t.abortLoginPageJump=!0,t;t.autoToLoginPage=!0}return t}function sn(){!function(){const e=ja(),{abortLoginPageJump:t,autoToLoginPage:i}=nn({url:e});t||i&&an({api:"redirectTo",redirect:e})}();const e=["navigateTo","redirectTo","reLaunch","switchTab"];for(let t=0;t<e.length;t++){const i=e[t];L(i,{invoke(e){const{abortLoginPageJump:t,autoToLoginPage:a}=nn({url:e.url});return t?e:a?(an({api:i,redirect:en(e.url)}),!1):e}})}}function on(){this.onResponse((e=>{const{type:t,content:i}=e;let a=!1;switch(t){case"cloudobject":a=function(e){if("object"!=typeof e)return!1;const{errCode:t}=e||{};return t in Ua}(i);break;case"clientdb":a=function(e){if("object"!=typeof e)return!1;const{errCode:t}=e||{};return t in za}(i)}a&&function(e={}){const t=Dt(St);Ft().then((()=>{const i=ja();if(i&&tn({redirect:i}))return t.length>0?Pt(St,Object.assign({uniIdRedirectUrl:i},e)):void(Ka&&an({api:"navigateTo",redirect:i}))}))}(i)}))}function rn(e){var t;(t=e).onResponse=function(e){At(_t,e)},t.offResponse=function(e){Ct(_t,e)},function(e){e.onNeedLogin=function(e){At(St,e)},e.offNeedLogin=function(e){Ct(St,e)},Ga&&(dt("_globalUniCloudStatus").needLoginInit||(dt("_globalUniCloudStatus").needLoginInit=!0,Ft().then((()=>{sn.call(e)})),Ya&&on.call(e)))}(e),function(e){e.onRefreshToken=function(e){At(wt,e)},e.offRefreshToken=function(e){Ct(wt,e)}}(e)}let ln;const cn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",hn=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/;function dn(){const e=Nt().token||"",t=e.split(".");if(!e||3!==t.length)return{uid:null,role:[],permission:[],tokenExpired:0};let i;try{i=JSON.parse((a=t[1],decodeURIComponent(ln(a).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))))}catch(n){throw new Error("获取当前用户信息出错，详细错误信息为："+n.message)}var a;return i.tokenExpired=1e3*i.exp,delete i.exp,delete i.iat,i}ln="function"!=typeof atob?function(e){if(e=String(e).replace(/[\t\n\f\r ]+/g,""),!hn.test(e))throw new Error("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");var t;e+="==".slice(2-(3&e.length));for(var i,a,n="",s=0;s<e.length;)t=cn.indexOf(e.charAt(s++))<<18|cn.indexOf(e.charAt(s++))<<12|(i=cn.indexOf(e.charAt(s++)))<<6|(a=cn.indexOf(e.charAt(s++))),n+=64===i?String.fromCharCode(t>>16&255):64===a?String.fromCharCode(t>>16&255,t>>8&255):String.fromCharCode(t>>16&255,t>>8&255,255&t);return n}:atob;var un=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(je((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const i="chooseAndUploadFile:ok",a="chooseAndUploadFile:fail";function n(e,t){return e.tempFiles.forEach(((e,i)=>{e.name||(e.name=e.path.substring(e.path.lastIndexOf("/")+1)),t&&(e.fileType=t),e.cloudPath=Date.now()+"_"+i+e.name.substring(e.name.lastIndexOf("."))})),e.tempFilePaths||(e.tempFilePaths=e.tempFiles.map((e=>e.path))),e}function s(e,t,{onChooseFile:a,onUploadProgress:n}){return t.then((e=>{if(a){const t=a(e);if(void 0!==t)return Promise.resolve(t).then((t=>void 0===t?e:t))}return e})).then((t=>!1===t?{errMsg:i,tempFilePaths:[],tempFiles:[]}:function(e,t,a=5,n){(t=Object.assign({},t)).errMsg=i;const s=t.tempFiles,o=s.length;let r=0;return new Promise((i=>{for(;r<a;)l();function l(){const a=r++;if(a>=o)return void(!s.find((e=>!e.url&&!e.errMsg))&&i(t));const c=s[a];e.uploadFile({provider:c.provider,filePath:c.path,cloudPath:c.cloudPath,fileType:c.fileType,cloudPathAsRealPath:c.cloudPathAsRealPath,onUploadProgress(e){e.index=a,e.tempFile=c,e.tempFilePath=c.path,n&&n(e)}}).then((e=>{c.url=e.fileID,a<o&&l()})).catch((e=>{c.errMsg=e.errMsg||e.message,a<o&&l()}))}}))}(e,t,5,n)))}t.initChooseAndUploadFile=function(e){return function(t={type:"all"}){return"image"===t.type?s(e,function(e){const{count:t,sizeType:i,sourceType:s=["album","camera"],extension:o}=e;return new Promise(((e,r)=>{M({count:t,sizeType:i,sourceType:s,extension:o,success(t){e(n(t,"image"))},fail(e){r({errMsg:e.errMsg.replace("chooseImage:fail",a)})}})}))}(t),t):"video"===t.type?s(e,function(e){const{camera:t,compressed:i,maxDuration:s,sourceType:o=["album","camera"],extension:r}=e;return new Promise(((e,l)=>{I({camera:t,compressed:i,maxDuration:s,sourceType:o,extension:r,success(t){const{tempFilePath:i,duration:a,size:s,height:o,width:r}=t;e(n({errMsg:"chooseVideo:ok",tempFilePaths:[i],tempFiles:[{name:t.tempFile&&t.tempFile.name||"",path:i,size:s,type:t.tempFile&&t.tempFile.type||"",width:r,height:o,duration:a,fileType:"video",cloudPath:""}]},"video"))},fail(e){l({errMsg:e.errMsg.replace("chooseVideo:fail",a)})}})}))}(t),t):s(e,function(e){const{count:t,extension:i}=e;return new Promise(((e,s)=>{let o=R;if("undefined"!=typeof wx&&"function"==typeof wx.chooseMessageFile&&(o=wx.chooseMessageFile),"function"!=typeof o)return s({errMsg:a+" 请指定 type 类型，该平台仅支持选择 image 或 video。"});o({type:"all",count:t,extension:i,success(t){e(n(t))},fail(e){s({errMsg:e.errMsg.replace("chooseFile:fail",a)})}})}))}(t),t)}}})));function pn(e){return{props:{localdata:{type:Array,default:()=>[]},options:{type:[Object,Array],default:()=>({})},spaceInfo:{type:Object,default:()=>({})},collection:{type:[String,Array],default:""},action:{type:String,default:""},field:{type:String,default:""},orderby:{type:String,default:""},where:{type:[String,Object],default:""},pageData:{type:String,default:"add"},pageCurrent:{type:Number,default:1},pageSize:{type:Number,default:20},getcount:{type:[Boolean,String],default:!1},gettree:{type:[Boolean,String],default:!1},gettreepath:{type:[Boolean,String],default:!1},startwith:{type:String,default:""},limitlevel:{type:Number,default:10},groupby:{type:String,default:""},groupField:{type:String,default:""},distinct:{type:[Boolean,String],default:!1},foreignKey:{type:String,default:""},loadtime:{type:String,default:"auto"},manual:{type:Boolean,default:!1}},data:()=>({mixinDatacomLoading:!1,mixinDatacomHasMore:!1,mixinDatacomResData:[],mixinDatacomErrorMessage:"",mixinDatacomPage:{},mixinDatacomError:null}),created(){this.mixinDatacomPage={current:this.pageCurrent,size:this.pageSize,count:0},this.$watch((()=>{var e=[];return["pageCurrent","pageSize","localdata","collection","action","field","orderby","where","getont","getcount","gettree","groupby","groupField","distinct"].forEach((t=>{e.push(this[t])})),e}),((e,t)=>{if("manual"===this.loadtime)return;let i=!1;const a=[];for(let n=2;n<e.length;n++)e[n]!==t[n]&&(a.push(e[n]),i=!0);e[0]!==t[0]&&(this.mixinDatacomPage.current=this.pageCurrent),this.mixinDatacomPage.size=this.pageSize,this.onMixinDatacomPropsChange(i,a)}))},methods:{onMixinDatacomPropsChange(e,t){},mixinDatacomEasyGet({getone:e=!1,success:t,fail:i}={}){this.mixinDatacomLoading||(this.mixinDatacomLoading=!0,this.mixinDatacomErrorMessage="",this.mixinDatacomError=null,this.mixinDatacomGet().then((i=>{this.mixinDatacomLoading=!1;const{data:a,count:n}=i.result;this.getcount&&(this.mixinDatacomPage.count=n),this.mixinDatacomHasMore=a.length<this.pageSize;const s=e?a.length?a[0]:void 0:a;this.mixinDatacomResData=s,t&&t(s)})).catch((e=>{this.mixinDatacomLoading=!1,this.mixinDatacomErrorMessage=e,this.mixinDatacomError=e,i&&i(e)})))},mixinDatacomGet(t={}){let i;t=t||{},i="undefined"!=typeof __uniX&&__uniX?e.databaseForJQL(this.spaceInfo):e.database(this.spaceInfo);const a=t.action||this.action;a&&(i=i.action(a));const n=t.collection||this.collection;i=Array.isArray(n)?i.collection(...n):i.collection(n);const s=t.where||this.where;s&&Object.keys(s).length&&(i=i.where(s));const o=t.field||this.field;o&&(i=i.field(o));const r=t.foreignKey||this.foreignKey;r&&(i=i.foreignKey(r));const l=t.groupby||this.groupby;l&&(i=i.groupBy(l));const c=t.groupField||this.groupField;c&&(i=i.groupField(c)),!0===(void 0!==t.distinct?t.distinct:this.distinct)&&(i=i.distinct());const h=t.orderby||this.orderby;h&&(i=i.orderBy(h));const d=void 0!==t.pageCurrent?t.pageCurrent:this.mixinDatacomPage.current,u=void 0!==t.pageSize?t.pageSize:this.mixinDatacomPage.size,p=void 0!==t.getcount?t.getcount:this.getcount,f=void 0!==t.gettree?t.gettree:this.gettree,g=void 0!==t.gettreepath?t.gettreepath:this.gettreepath,m={getCount:p},x={limitLevel:void 0!==t.limitlevel?t.limitlevel:this.limitlevel,startWith:void 0!==t.startwith?t.startwith:this.startwith};return f&&(m.getTree=x),g&&(m.getTreePath=x),i=i.skip(u*(d-1)).limit(u).get(m),i}}}}function fn(e){return dt("_globalUniCloudSecureNetworkCache__{spaceId}".replace("{spaceId}",e.config.spaceId))}async function gn({openid:e,callLoginByWeixin:t=!1}={}){throw fn(this),new Error("[SecureNetwork] API `initSecureNetworkByWeixin` is not supported on platform `web`")}async function mn(e){const t=fn(this);return t.initPromise||(t.initPromise=gn.call(this,e).then((e=>e)).catch((e=>{throw delete t.initPromise,e}))),t.initPromise}function xn(e){const t={getSystemInfo:X,getPushClientId:Q};return function(i){return new Promise(((a,n)=>{t[e]({...i,success(e){a(e)},fail(e){n(e)}})}))}}class yn extends class{constructor(){this._callback={}}addListener(e,t){this._callback[e]||(this._callback[e]=[]),this._callback[e].push(t)}on(e,t){return this.addListener(e,t)}removeListener(e,t){if(!t)throw new Error('The "listener" argument must be of type function. Received undefined');const i=this._callback[e];if(!i)return;const a=function(e,t){for(let i=e.length-1;i>=0;i--)if(e[i]===t)return i;return-1}(i,t);i.splice(a,1)}off(e,t){return this.removeListener(e,t)}removeAllListener(e){delete this._callback[e]}emit(e,...t){const i=this._callback[e];if(i)for(let a=0;a<i.length;a++)i[a](...t)}}{constructor(){super(),this._uniPushMessageCallback=this._receivePushMessage.bind(this),this._currentMessageId=-1,this._payloadQueue=[]}init(){return Promise.all([xn("getSystemInfo")(),xn("getPushClientId")()]).then((([{appId:e}={},{cid:t}={}]=[])=>{if(!e)throw new Error("Invalid appId, please check the manifest.json file");if(!t)throw new Error("Invalid push client id");this._appId=e,this._pushClientId=t,this._seqId=Date.now()+"-"+Math.floor(9e5*Math.random()+1e5),this.emit("open"),this._initMessageListener()}),(e=>{throw this.emit("error",e),this.close(),e}))}async open(){return this.init()}_isUniCloudSSE(e){if("receive"!==e.type)return!1;const t=e&&e.data&&e.data.payload;return!(!t||"UNI_CLOUD_SSE"!==t.channel||t.seqId!==this._seqId)}_receivePushMessage(e){if(!this._isUniCloudSSE(e))return;const t=e&&e.data&&e.data.payload,{action:i,messageId:a,message:n}=t;this._payloadQueue.push({action:i,messageId:a,message:n}),this._consumMessage()}_consumMessage(){for(;;){const e=this._payloadQueue.find((e=>e.messageId===this._currentMessageId+1));if(!e)break;this._currentMessageId++,this._parseMessagePayload(e)}}_parseMessagePayload(e){const{action:t,messageId:i,message:a}=e;"end"===t?this._end({messageId:i,message:a}):"message"===t&&this._appendMessage({messageId:i,message:a})}_appendMessage({messageId:e,message:t}={}){this.emit("message",t)}_end({messageId:e,message:t}={}){this.emit("end",t),this.close()}_initMessageListener(){z(this._uniPushMessageCallback)}_destroy(){U(this._uniPushMessageCallback)}toJSON(){return{appId:this._appId,pushClientId:this._pushClientId,seqId:this._seqId}}close(){this._destroy(),this.emit("close")}}const bn={tcb:aa,tencent:aa,aliyun:Kt,private:sa,alipay:ua};let _n=new class{init(e){let t={};const i=bn[e.provider];if(!i)throw new Error("未提供正确的provider参数");var a;return t=i.init(e),function(e){e._initPromiseHub||(e._initPromiseHub=new st({createPromise:function(){let t=Promise.resolve();t=new Promise((e=>{setTimeout((()=>{e()}),1)}));const i=e.auth();return t.then((()=>i.getLoginState())).then((e=>e?Promise.resolve():i.signInAnonymously()))}}))}(t),va(t),function(e){const t=e.uploadFile;e.uploadFile=function(e){return t.call(this,e)}}(t),(a=t).database=function(e){if(e&&Object.keys(e).length>0)return a.init(e).database();if(this._database)return this._database;const t=Oa(Ea,{uniClient:a});return this._database=t,t},a.databaseForJQL=function(e){if(e&&Object.keys(e).length>0)return a.init(e).databaseForJQL();if(this._databaseForJQL)return this._databaseForJQL;const t=Oa(Ea,{uniClient:a,isJQL:!0});return this._databaseForJQL=t,t},function(e){e.getCurrentUserInfo=dn,e.chooseAndUploadFile=un.initChooseAndUploadFile(e),Object.assign(e,{get mixinDatacom(){return pn(e)}}),e.SSEChannel=yn,e.initSecureNetworkByWeixin=function(e){return function({openid:t,callLoginByWeixin:i=!1}={}){return mn.call(e,{openid:t,callLoginByWeixin:i})}}(e),e.importObject=function(t){return function(i,a={}){a=function(e,t={}){return e.customUI=t.customUI||e.customUI,e.parseSystemError=t.parseSystemError||e.parseSystemError,Object.assign(e.loadingOptions,t.loadingOptions),Object.assign(e.errorOptions,t.errorOptions),"object"==typeof t.secretMethods&&(e.secretMethods=t.secretMethods),e}({customUI:!1,loadingOptions:{title:"加载中...",mask:!0},errorOptions:{type:"modal",retry:!1}},a);const{customUI:n,loadingOptions:s,errorOptions:o,parseSystemError:r}=a,l=!n;return new Proxy({},{get(n,c){switch(c){case"toString":return"[object UniCloudObject]";case"toJSON":return{}}return function({fn:e,interceptorName:t,getCallbackArgs:i}={}){return async function(...a){const n=i?i({params:a}):{};let s,o;try{return await mt(xt(t,"invoke"),{...n}),s=await e(...a),await mt(xt(t,"success"),{...n,result:s}),s}catch(r){throw o=r,await mt(xt(t,"fail"),{...n,error:o}),o}finally{await mt(xt(t,"complete"),o?{...n,error:o}:{...n,result:s})}}}({fn:async function n(...h){let d;l&&O({title:s.title,mask:s.mask});const u={name:i,type:"OBJECT",data:{method:c,params:h}};"object"==typeof a.secretMethods&&function(e,t){const i=t.data.method,a=e.secretMethods||{},n=a[i]||a["*"];n&&(t.secretType=n)}(a,u);let p=!1;try{d=await t.callFunction(u)}catch(e){p=!0,d={result:new Rt(e)}}const{errSubject:f,errCode:g,errMsg:m,newToken:x}=d.result||{};if(l&&E(),x&&x.token&&x.tokenExpired&&(Bt(x),Pt(wt,{...x})),g){let e=m;if(p&&r&&(e=(await r({objectName:i,methodName:c,params:h,errSubject:f,errCode:g,errMsg:m})).errMsg||m),l)if("toast"===o.type)N({title:e,icon:"none"});else{if("modal"!==o.type)throw new Error(`Invalid errorOptions.type: ${o.type}`);{const{confirm:t}=await async function({title:e,content:t,showCancel:i,cancelText:a,confirmText:n}={}){return new Promise(((s,o)=>{B({title:e,content:t,showCancel:i,cancelText:a,confirmText:n,success(e){s(e)},fail(){s({confirm:!1,cancel:!0})}})}))}({title:"提示",content:e,showCancel:o.retry,cancelText:"取消",confirmText:o.retry?"重试":"确定"});if(o.retry&&t)return n(...h)}}const t=new Rt({subject:f,code:g,message:m,requestId:d.requestId});throw t.detail=d.result,Pt(_t,{type:kt,content:t}),t}return Pt(_t,{type:kt,content:d.result}),d.result},interceptorName:"callObject",getCallbackArgs:function({params:e}={}){return{objectName:i,methodName:c,params:e}}})}})}}(e)}(t),["callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile","chooseAndUploadFile"].forEach((e=>{if(!t[e])return;const i=t[e];var a,n;t[e]=function(){return i.apply(t,Array.from(arguments))},t[e]=(a=t[e],n=e,function(e){let t=!1;if("callFunction"===n){const i=e&&e.type||Ye;t=i!==Ye}const i="callFunction"===n&&!t,s=this._initPromiseHub.exec();e=e||{};const{success:o,fail:r,complete:l}=Lt(e),c=s.then((()=>t?Promise.resolve():mt(xt(n,"invoke"),e))).then((()=>a.call(this,e))).then((e=>t?Promise.resolve(e):mt(xt(n,"success"),e).then((()=>mt(xt(n,"complete"),e))).then((()=>(i&&Pt(_t,{type:vt,content:e}),Promise.resolve(e))))),(e=>t?Promise.reject(e):mt(xt(n,"fail"),e).then((()=>mt(xt(n,"complete"),e))).then((()=>(Pt(_t,{type:vt,content:e}),Promise.reject(e))))));if(!(o||r||l))return c;c.then((e=>{o&&o(e),l&&l(e),i&&Pt(_t,{type:vt,content:e})}),(e=>{r&&r(e),l&&l(e),i&&Pt(_t,{type:vt,content:e})}))}).bind(t)})),t.init=this.init,t}};(()=>{const e=lt;let t={};if(e&&1===e.length)t=e[0],_n=_n.init(t),_n._isDefault=!0;else{const t=["auth","callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile","database","getCurrentUSerInfo","importObject"];let i;i=e&&e.length>0?"应用有多个服务空间，请通过uniCloud.init方法指定要使用的服务空间":"应用未关联服务空间，请在uniCloud目录右键关联服务空间",t.forEach((e=>{_n[e]=function(){return console.error(i),Promise.reject(new Rt({code:"SYS_ERR",message:i}))}}))}Object.assign(_n,{get mixinDatacom(){return pn(_n)}}),rn(_n),_n.addInterceptor=ft,_n.removeInterceptor=gt,_n.interceptObject=yt})();var Sn=_n;const wn=oe({components:{Loading1:oe({name:"loading1",data:()=>({})},[["render",function(a,s,o,r,l,c){const h=d;return e(),t(h,{class:"container loading1"},{default:i((()=>[n(h,{class:"shape shape1"}),n(h,{class:"shape shape2"}),n(h,{class:"shape shape3"}),n(h,{class:"shape shape4"})])),_:1})}],["__scopeId","data-v-a16ea79e"]]),Loading2:oe({name:"loading2",data:()=>({})},[["render",function(a,s,o,r,l,c){const h=d;return e(),t(h,{class:"container loading2"},{default:i((()=>[n(h,{class:"shape shape1"}),n(h,{class:"shape shape2"}),n(h,{class:"shape shape3"}),n(h,{class:"shape shape4"})])),_:1})}],["__scopeId","data-v-51d40d8b"]]),Loading3:oe({name:"loading3",data:()=>({})},[["render",function(a,s,o,r,l,c){const h=d;return e(),t(h,{class:"container loading3"},{default:i((()=>[n(h,{class:"shape shape1"}),n(h,{class:"shape shape2"}),n(h,{class:"shape shape3"}),n(h,{class:"shape shape4"})])),_:1})}],["__scopeId","data-v-47408335"]]),Loading4:oe({name:"loading5",data:()=>({})},[["render",function(a,s,o,r,l,c){const h=d;return e(),t(h,{class:"container loading5"},{default:i((()=>[n(h,{class:"shape shape1"}),n(h,{class:"shape shape2"}),n(h,{class:"shape shape3"}),n(h,{class:"shape shape4"})])),_:1})}],["__scopeId","data-v-49a6258a"]]),Loading5:oe({name:"loading6",data:()=>({})},[["render",function(a,s,o,r,l,c){const h=d;return e(),t(h,{class:"container loading6"},{default:i((()=>[n(h,{class:"shape shape1"}),n(h,{class:"shape shape2"}),n(h,{class:"shape shape3"}),n(h,{class:"shape shape4"})])),_:1})}],["__scopeId","data-v-08a06125"]])},name:"qiun-loading",props:{loadingType:{type:Number,default:2}},data:()=>({})},[["render",function(a,n,o,r,l,c){const h=b("Loading1"),u=b("Loading2"),p=b("Loading3"),f=b("Loading4"),g=b("Loading5"),m=d;return e(),t(m,null,{default:i((()=>[1==o.loadingType?(e(),t(h,{key:0})):s("",!0),2==o.loadingType?(e(),t(u,{key:1})):s("",!0),3==o.loadingType?(e(),t(p,{key:2})):s("",!0),4==o.loadingType?(e(),t(f,{key:3})):s("",!0),5==o.loadingType?(e(),t(g,{key:4})):s("",!0)])),_:1})}]]);const Tn=oe({name:"qiun-error",props:{errorMessage:{type:String,default:null}},data:()=>({})},[["render",function(a,s,l,c,h,u){const p=d;return e(),t(p,{class:"chartsview"},{default:i((()=>[n(p,{class:"charts-error"}),n(p,{class:"charts-font"},{default:i((()=>[o(r(null==l.errorMessage?"请点击重试":l.errorMessage),1)])),_:1})])),_:1})}],["__scopeId","data-v-af32de60"]]);var vn={version:"v2.5.0-20230101",yAxisWidth:15,xAxisHeight:22,padding:[10,10,10,10],rotate:!1,fontSize:13,fontColor:"#666666",dataPointShape:["circle","circle","circle","circle"],color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],linearColor:["#0EE2F8","#2BDCA8","#FA7D8D","#EB88E2","#2AE3A0","#0EE2F8","#EB88E2","#6773E3","#F78A85"],pieChartLinePadding:15,pieChartTextPadding:5,titleFontSize:20,subtitleFontSize:15,radarLabelTextMargin:13},kn=function(e,...t){if(null==e)throw new TypeError("[uCharts] Cannot convert undefined or null to object");if(!t||t.length<=0)return e;function i(e,t){for(let a in t)e[a]=e[a]&&"[object Object]"===e[a].toString()?i(e[a],t[a]):e[a]=t[a];return e}return t.forEach((t=>{e=i(e,t)})),e},Dn={toFixed:function(e,t){return t=t||2,this.isFloat(e)&&(e=e.toFixed(t)),e},isFloat:function(e){return e%1!=0},approximatelyEqual:function(e,t){return Math.abs(e-t)<1e-10},isSameSign:function(e,t){return Math.abs(e)===e&&Math.abs(t)===t||Math.abs(e)!==e&&Math.abs(t)!==t},isSameXCoordinateArea:function(e,t){return this.isSameSign(e.x,t.x)},isCollision:function(e,t){return e.end={},e.end.x=e.start.x+e.width,e.end.y=e.start.y-e.height,t.end={},t.end.x=t.start.x+t.width,t.end.y=t.start.y-t.height,!(t.start.x>e.end.x||t.end.x<e.start.x||t.end.y>e.start.y||t.start.y<e.end.y)}};function An(e,t){var i=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,i,a){return t+t+i+i+a+a})),a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i);return"rgba("+parseInt(a[1],16)+","+parseInt(a[2],16)+","+parseInt(a[3],16)+","+t+")"}function Cn(e,t,i){if(isNaN(e))throw new Error("[uCharts] series数据需为Number格式");i=i||10,t=t||"upper";for(var a=1;i<1;)i*=10,a*=10;for(e="upper"===t?Math.ceil(e*a):Math.floor(e*a);e%i!=0;)if("upper"===t){if(e==e+1)break;e++}else e--;return e/a}function Pn(e,t,i,a,n){var s=n.width-n.area[1]-n.area[3],o=i.eachSpacing*(n.chartData.xAxisData.xAxisPoints.length-1);"mount"==n.type&&n.extra&&n.extra.mount&&n.extra.mount.widthRatio&&n.extra.mount.widthRatio>1&&(n.extra.mount.widthRatio>2&&(n.extra.mount.widthRatio=2),o+=(n.extra.mount.widthRatio-1)*i.eachSpacing);var r=t;return t>=0?(r=0,e.uevent.trigger("scrollLeft"),e.scrollOption.position="left",n.xAxis.scrollPosition="left"):Math.abs(t)>=o-s?(r=s-o,e.uevent.trigger("scrollRight"),e.scrollOption.position="right",n.xAxis.scrollPosition="right"):(e.scrollOption.position=t,n.xAxis.scrollPosition=t),r}function Mn(e,t,i){function a(e){for(;e<0;)e+=2*Math.PI;for(;e>2*Math.PI;)e-=2*Math.PI;return e}return e=a(e),(t=a(t))>(i=a(i))&&(i+=2*Math.PI,e<t&&(e+=2*Math.PI)),e>=t&&e<=i}function In(e,t){function i(e,t){return!(!e[t-1]||!e[t+1])&&(e[t].y>=Math.max(e[t-1].y,e[t+1].y)||e[t].y<=Math.min(e[t-1].y,e[t+1].y))}function a(e,t){return!(!e[t-1]||!e[t+1])&&(e[t].x>=Math.max(e[t-1].x,e[t+1].x)||e[t].x<=Math.min(e[t-1].x,e[t+1].x))}var n=.2,s=.2,o=null,r=null,l=null,c=null;if(t<1?(o=e[0].x+(e[1].x-e[0].x)*n,r=e[0].y+(e[1].y-e[0].y)*n):(o=e[t].x+(e[t+1].x-e[t-1].x)*n,r=e[t].y+(e[t+1].y-e[t-1].y)*n),t>e.length-3){var h=e.length-1;l=e[h].x-(e[h].x-e[h-1].x)*s,c=e[h].y-(e[h].y-e[h-1].y)*s}else l=e[t+1].x-(e[t+2].x-e[t].x)*s,c=e[t+1].y-(e[t+2].y-e[t].y)*s;return i(e,t+1)&&(c=e[t+1].y),i(e,t)&&(r=e[t].y),a(e,t+1)&&(l=e[t+1].x),a(e,t)&&(o=e[t].x),(r>=Math.max(e[t].y,e[t+1].y)||r<=Math.min(e[t].y,e[t+1].y))&&(r=e[t].y),(c>=Math.max(e[t].y,e[t+1].y)||c<=Math.min(e[t].y,e[t+1].y))&&(c=e[t+1].y),(o>=Math.max(e[t].x,e[t+1].x)||o<=Math.min(e[t].x,e[t+1].x))&&(o=e[t].x),(l>=Math.max(e[t].x,e[t+1].x)||l<=Math.min(e[t].x,e[t+1].x))&&(l=e[t+1].x),{ctrA:{x:o,y:r},ctrB:{x:l,y:c}}}function Fn(e,t,i){return{x:i.x+e,y:i.y-t}}function Ln(e,t){if(t)for(;Dn.isCollision(e,t);)e.start.x>0?e.start.y--:e.start.x<0||e.start.y>0?e.start.y++:e.start.y--;return e}function Rn(e,t,i){for(var a=0,n=0;n<e.length;n++){let s=e[n];if(s.color||(s.color=i.color[a],a=(a+1)%i.color.length),s.linearIndex||(s.linearIndex=n),s.index||(s.index=0),s.type||(s.type=t.type),void 0===s.show&&(s.show=!0),s.type||(s.type=t.type),s.pointShape||(s.pointShape="circle"),!s.legendShape)switch(s.type){case"line":s.legendShape="line";break;case"column":case"bar":s.legendShape="rect";break;case"area":case"mount":s.legendShape="triangle";break;default:s.legendShape="circle"}}return e}function On(e,t,i,a){var n=t||[];if("custom"==e&&0==n.length&&(n=a.linearColor),"custom"==e&&n.length<i.length){let e=i.length-n.length;for(var s=0;s<e;s++)n.push(a.linearColor[(s+1)%a.linearColor.length])}return n}function En(e,t,i){var a=0;if(e=String(e),!1!==i&&void 0!==i&&i.setFontSize&&i.measureText)return i.setFontSize(t),i.measureText(e).width;e=e.split("");for(let n=0;n<e.length;n++){let t=e[n];/[a-zA-Z]/.test(t)?a+=7:/[0-9]/.test(t)?a+=5.5:/\./.test(t)?a+=2.7:/-/.test(t)?a+=3.25:/:/.test(t)?a+=2.5:/[\u4e00-\u9fa5]/.test(t)?a+=10:/\(|\)/.test(t)?a+=3.73:/\s/.test(t)?a+=2.5:/%/.test(t)?a+=8:a+=10}return a*t/10}function Nn(e){return e.reduce((function(e,t){return(e.data?e.data:e).concat(t.data)}),[])}function Bn(e,t){for(var i=new Array(t),a=0;a<i.length;a++)i[a]=0;for(var n=0;n<e.length;n++)for(a=0;a<i.length;a++)i[a]+=e[n].data[a];return e.reduce((function(e,t){return(e.data?e.data:e).concat(t.data).concat(i)}),[])}function zn(e,t,i){let a,n;return e.clientX?t.rotate?(n=t.height-e.clientX*t.pix,a=(e.pageY-i.currentTarget.offsetTop-t.height/t.pix/2*(t.pix-1))*t.pix):(a=e.clientX*t.pix,n=(e.pageY-i.currentTarget.offsetTop-t.height/t.pix/2*(t.pix-1))*t.pix):t.rotate?(n=t.height-e.x*t.pix,a=e.y*t.pix):(a=e.x*t.pix,n=e.y*t.pix),{x:a,y:n}}function Un(e,t,i){var a=[],n=[],s=t.constructor.toString().indexOf("Array")>-1;if(s){let t=qn(e);for(var o=0;o<i.length;o++)n.push(t[i[o]])}else n=e;for(let r=0;r<n.length;r++){let e=n[r],i=-1;if(i=s?t[r]:t,null!==e.data[i]&&void 0!==e.data[i]&&e.show){let t={};t.color=e.color,t.type=e.type,t.style=e.style,t.pointShape=e.pointShape,t.disableLegend=e.disableLegend,t.legendShape=e.legendShape,t.name=e.name,t.show=e.show,t.data=e.formatter?e.formatter(e.data[i]):e.data[i],a.push(t)}}return a}function Wn(e,t,i){var a=e.map((function(e){return En(e,t,i)}));return Math.max.apply(null,a)}function $n(e){for(var t=2*Math.PI/e,i=[],a=0;a<e;a++)i.push(t*a);return i.map((function(e){return-1*e+Math.PI/2}))}function Vn(e,t,i,a,n){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=t.chartData.calPoints?t.chartData.calPoints:[];let r={};if(a.length>0){let e=[];for(let t=0;t<a.length;t++)e.push(o[a[t]]);r=e[0][i[0]]}else for(let h=0;h<o.length;h++)if(o[h][i]){r=o[h][i];break}var l=e.map((function(e){let a=null;return t.categories&&t.categories.length>0&&(a=n[i]),{text:s.formatter?s.formatter(e,a,i,t):e.name+": "+e.data,color:e.color,legendShape:"auto"==t.extra.tooltip.legendShape?e.legendShape:t.extra.tooltip.legendShape}})),c={x:Math.round(r.x),y:Math.round(r.y)};return{textList:l,offset:c}}function jn(e,t,i,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=t.chartData.xAxisPoints[i]+t.chartData.eachSpacing/2,o=e.map((function(e){return{text:n.formatter?n.formatter(e,a[i],i,t):e.name+": "+e.data,color:e.color,disableLegend:!!e.disableLegend,legendShape:"auto"==t.extra.tooltip.legendShape?e.legendShape:t.extra.tooltip.legendShape}}));o=o.filter((function(e){if(!0!==e.disableLegend)return e}));var r={x:Math.round(s),y:0};return{textList:o,offset:r}}function Hn(e,t,i,a,n,s){var o=i.chartData.calPoints;let r=s.color.upFill,l=s.color.downFill,c=[r,r,l,r];var h=[];t.map((function(t){0==a?t.data[1]-t.data[0]<0?c[1]=l:c[1]=r:(t.data[0]<e[a-1][1]&&(c[0]=l),t.data[1]<t.data[0]&&(c[1]=l),t.data[2]>e[a-1][1]&&(c[2]=r),t.data[3]<e[a-1][1]&&(c[3]=l));let n={text:"开盘："+t.data[0],color:c[0],legendShape:"auto"==i.extra.tooltip.legendShape?t.legendShape:i.extra.tooltip.legendShape},s={text:"收盘："+t.data[1],color:c[1],legendShape:"auto"==i.extra.tooltip.legendShape?t.legendShape:i.extra.tooltip.legendShape},o={text:"最低："+t.data[2],color:c[2],legendShape:"auto"==i.extra.tooltip.legendShape?t.legendShape:i.extra.tooltip.legendShape},d={text:"最高："+t.data[3],color:c[3],legendShape:"auto"==i.extra.tooltip.legendShape?t.legendShape:i.extra.tooltip.legendShape};h.push(n,s,o,d)}));var d=[],u={x:0,y:0};for(let p=0;p<o.length;p++){let e=o[p];void 0!==e[a]&&null!==e[a]&&d.push(e[a])}return u.x=Math.round(d[0][0].x),{textList:h,offset:u}}function qn(e){let t=[];for(let i=0;i<e.length;i++)1==e[i].show&&t.push(e[i]);return t}function Gn(e,t,i){return e.x<=t.width-t.area[1]+10&&e.x>=t.area[3]-10&&e.y>=t.area[0]&&e.y<=t.height-t.area[2]}function Kn(e,t,i){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<=Math.pow(i,2)}function Jn(e,t){var i=[],a=[];return e.forEach((function(e,n){t.connectNulls?null!==e&&a.push(e):null!==e?a.push(e):(a.length&&i.push(a),a=[])})),a.length&&i.push(a),i}function Yn(e,t,i,a,n){var s={angle:0,xAxisHeight:t.xAxis.lineHeight*t.pix+t.xAxis.marginTop*t.pix},o=t.xAxis.fontSize*t.pix,r=e.map((function(e,i){var a=t.xAxis.formatter?t.xAxis.formatter(e,i,t):e;return En(String(a),o,n)})),l=Math.max.apply(this,r);if(1==t.xAxis.rotateLabel){s.angle=t.xAxis.rotateAngle*Math.PI/180;let e=t.xAxis.marginTop*t.pix*2+Math.abs(l*Math.sin(s.angle));e=e<o+t.xAxis.marginTop*t.pix*2?e+t.xAxis.marginTop*t.pix*2:e,s.xAxisHeight=e}return t.enableScroll&&t.xAxis.scrollShow&&(s.xAxisHeight+=6*t.pix),t.xAxis.disabled&&(s.xAxisHeight=0),s}function Xn(e,t,i,a){var n=kn({},{type:""},t.extra.bar),s={angle:0,xAxisHeight:t.xAxis.lineHeight*t.pix+t.xAxis.marginTop*t.pix};s.ranges=function(e,t,i,a){var n,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;n="stack"==a?Bn(e,t.categories.length):Nn(e);var o=[];(n=n.filter((function(e){return"object"==typeof e&&null!==e?e.constructor.toString().indexOf("Array")>-1?null!==e:null!==e.value:null!==e}))).map((function(e){"object"==typeof e?e.constructor.toString().indexOf("Array")>-1?"candle"==t.type?e.map((function(e){o.push(e)})):o.push(e[0]):o.push(e.value):o.push(e)}));var r=0,l=0;if(o.length>0&&(r=Math.min.apply(this,o),l=Math.max.apply(this,o)),s>-1?("number"==typeof t.xAxis.data[s].min&&(r=Math.min(t.xAxis.data[s].min,r)),"number"==typeof t.xAxis.data[s].max&&(l=Math.max(t.xAxis.data[s].max,l))):("number"==typeof t.xAxis.min&&(r=Math.min(t.xAxis.min,r)),"number"==typeof t.xAxis.max&&(l=Math.max(t.xAxis.max,l))),r===l){l+=l||10}for(var c=r,h=[],d=(l-c)/t.xAxis.splitNumber,u=0;u<=t.xAxis.splitNumber;u++)h.push(c+d*u);return h}(e,t,i,n.type),s.rangesFormat=s.ranges.map((function(e){return e=Dn.toFixed(e,2)}));var o=s.ranges.map((function(e){return e=Dn.toFixed(e,2)}));return(s=Object.assign(s,ds(o,t))).eachSpacing,o.map((function(e){return En(e,t.xAxis.fontSize*t.pix,a)})),!0===t.xAxis.disabled&&(s.xAxisHeight=0),s}function Qn(e,t,i,a,n){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=n.extra.radar||{};o.max=o.max||0;var r=Math.max(o.max,Math.max.apply(null,Nn(a))),l=[];for(let c=0;c<a.length;c++){let n=a[c],o={};o.color=n.color,o.legendShape=n.legendShape,o.pointShape=n.pointShape,o.data=[],n.data.forEach((function(a,n){let l={};l.angle=e[n],l.proportion=a/r,l.value=a,l.position=Fn(i*l.proportion*s*Math.cos(l.angle),i*l.proportion*s*Math.sin(l.angle),t),o.data.push(l)})),l.push(o)}return l}function Zn(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=0,n=0;for(let s=0;s<e.length;s++){let t=e[s];t.data=null===t.data?0:t.data,a+=t.data}for(let s=0;s<e.length;s++){let n=e[s];n.data=null===n.data?0:n.data,n._proportion_=0===a?1/e.length*i:n.data/a*i,n._radius_=t}for(let s=0;s<e.length;s++){let t=e[s];t._start_=n,n+=2*t._proportion_*Math.PI}return e}function es(e,t,i,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;for(let s=0;s<e.length;s++)"funnel"==i.type?e[s].radius=e[s].data/e[0].data*t*n:e[s].radius=a*(e.length-s)/(a*e.length)*t*n,e[s]._proportion_=e[s].data/e[0].data;return e}function ts(e,t,i,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=0,o=0,r=[];for(let d=0;d<e.length;d++){let t=e[d];t.data=null===t.data?0:t.data,s+=t.data,r.push(t.data)}var l=Math.min.apply(null,r),c=Math.max.apply(null,r),h=a-i;for(let d=0;d<e.length;d++){let o=e[d];o.data=null===o.data?0:o.data,0===s?(o._proportion_=1/e.length*n,o._rose_proportion_=1/e.length*n):(o._proportion_=o.data/s*n,o._rose_proportion_="area"==t?1/e.length*n:o.data/s*n),o._radius_=i+h*((o.data-l)/(c-l))||a}for(let d=0;d<e.length;d++){let t=e[d];t._start_=o,o+=2*t._rose_proportion_*Math.PI}return e}function is(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;1==i&&(i=.999999);for(let a=0;a<e.length;a++){let n,s=e[a];s.data=null===s.data?0:s.data,n="circle"==t.type?2:"ccw"==t.direction?t.startAngle<t.endAngle?2+t.startAngle-t.endAngle:t.startAngle-t.endAngle:t.endAngle<t.startAngle?2+t.endAngle-t.startAngle:t.startAngle-t.endAngle,s._proportion_=n*s.data*i+t.startAngle,"ccw"==t.direction&&(s._proportion_=t.startAngle-n*s.data*i),s._proportion_>=2&&(s._proportion_=s._proportion_%2)}return e}function as(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;1==i&&(i=.999999);for(let a=0;a<e.length;a++){let n,s=e[a];s.data=null===s.data?0:s.data,n="circle"==t.type?2:t.endAngle<t.startAngle?2+t.endAngle-t.startAngle:t.startAngle-t.endAngle,s._proportion_=n*s.data*i+t.startAngle,s._proportion_>=2&&(s._proportion_=s._proportion_%2)}return e}function ns(e,t,i){let a;a=i<t?2+i-t:t-i;let n=t;for(let s=0;s<e.length;s++)e[s].value=null===e[s].value?0:e[s].value,e[s]._startAngle_=n,e[s]._endAngle_=a*e[s].value+t,e[s]._endAngle_>=2&&(e[s]._endAngle_=e[s]._endAngle_%2),n=e[s]._endAngle_;return e}function ss(e,t,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;for(let n=0;n<e.length;n++){let s,o=e[n];if(o.data=null===o.data?0:o.data,"auto"==i.pointer.color){for(let e=0;e<t.length;e++)if(o.data<=t[e].value){o.color=t[e].color;break}}else o.color=i.pointer.color;s=i.endAngle<i.startAngle?2+i.endAngle-i.startAngle:i.startAngle-i.endAngle,o._endAngle_=s*o.data+i.startAngle,o._oldAngle_=i.oldAngle,i.oldAngle<i.endAngle&&(o._oldAngle_+=2),o.data>=i.oldData?o._proportion_=(o._endAngle_-o._oldAngle_)*a+i.oldAngle:o._proportion_=o._oldAngle_-(o._oldAngle_-o._endAngle_)*a,o._proportion_>=2&&(o._proportion_=o._proportion_%2)}return e}function os(e,t,i,a,n,s){return e.map((function(e){if(null===e)return null;var n=0,o=0;return"mix"==s.type?(n=s.extra.mix.column.seriesGap*s.pix||0,o=s.extra.mix.column.categoryGap*s.pix||0):(n=s.extra.column.seriesGap*s.pix||0,o=s.extra.column.categoryGap*s.pix||0),n=Math.min(n,t/i),o=Math.min(o,t/i),e.width=Math.ceil((t-2*o-n*(i-1))/i),s.extra.mix&&s.extra.mix.column.width&&+s.extra.mix.column.width>0&&(e.width=Math.min(e.width,+s.extra.mix.column.width*s.pix)),s.extra.column&&s.extra.column.width&&+s.extra.column.width>0&&(e.width=Math.min(e.width,+s.extra.column.width*s.pix)),e.width<=0&&(e.width=1),e.x+=(a+.5-i/2)*(e.width+n),e}))}function rs(e,t,i,a,n,s){return e.map((function(e){if(null===e)return null;var n=0,o=0;return n=s.extra.bar.seriesGap*s.pix||0,o=s.extra.bar.categoryGap*s.pix||0,n=Math.min(n,t/i),o=Math.min(o,t/i),e.width=Math.ceil((t-2*o-n*(i-1))/i),s.extra.bar&&s.extra.bar.width&&+s.extra.bar.width>0&&(e.width=Math.min(e.width,+s.extra.bar.width*s.pix)),e.width<=0&&(e.width=1),e.y+=(a+.5-i/2)*(e.width+n),e}))}function ls(e,t,i,a,n,s,o){var r=s.extra.column.categoryGap*s.pix||0;return e.map((function(e){return null===e?null:(e.width=t-2*r,s.extra.column&&s.extra.column.width&&+s.extra.column.width>0&&(e.width=Math.min(e.width,+s.extra.column.width*s.pix)),a>0&&(e.width-=o),e)}))}function cs(e,t,i,a,n,s,o){var r=s.extra.column.categoryGap*s.pix||0;return e.map((function(e,i){return null===e?null:(e.width=Math.ceil(t-2*r),s.extra.column&&s.extra.column.width&&+s.extra.column.width>0&&(e.width=Math.min(e.width,+s.extra.column.width*s.pix)),e.width<=0&&(e.width=1),e)}))}function hs(e,t,i,a,n,s,o){var r=s.extra.bar.categoryGap*s.pix||0;return e.map((function(e,i){return null===e?null:(e.width=Math.ceil(t-2*r),s.extra.bar&&s.extra.bar.width&&+s.extra.bar.width>0&&(e.width=Math.min(e.width,+s.extra.bar.width*s.pix)),e.width<=0&&(e.width=1),e)}))}function ds(e,t,i){var a=t.width-t.area[1]-t.area[3],n=t.enableScroll?Math.min(t.xAxis.itemCount,e.length):e.length;("line"==t.type||"area"==t.type||"scatter"==t.type||"bubble"==t.type||"bar"==t.type)&&n>1&&"justify"==t.xAxis.boundaryGap&&(n-=1);var s=0;"mount"==t.type&&t.extra&&t.extra.mount&&t.extra.mount.widthRatio&&t.extra.mount.widthRatio>1&&(t.extra.mount.widthRatio>2&&(t.extra.mount.widthRatio=2),n+=s=t.extra.mount.widthRatio-1);var o=a/n,r=[],l=t.area[3],c=t.width-t.area[1];return e.forEach((function(e,t){r.push(l+s/2*o+t*o)})),"justify"!==t.xAxis.boundaryGap&&(!0===t.enableScroll?r.push(l+s*o+e.length*o):r.push(c)),{xAxisPoints:r,startX:l,endX:c,eachSpacing:o}}function us(e,t,i,a,n,s,o){var r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,l=[],c=s.height-s.area[0]-s.area[2];return e.forEach((function(e,o){if(null===e)l.push(null);else{var h=[];e.forEach((function(e,l){var d={};d.x=a[o]+Math.round(n/2);var u=e.value||e,p=c*(u-t)/(i-t);p*=r,d.y=s.height-Math.round(p)-s.area[2],h.push(d)})),l.push(h)}})),l}function ps(e,t,i,a,n,s,o){var r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,l="center";"line"!=s.type&&"area"!=s.type&&"scatter"!=s.type&&"bubble"!=s.type||(l=s.xAxis.boundaryGap);var c=[],h=s.height-s.area[0]-s.area[2],d=s.width-s.area[1]-s.area[3];return e.forEach((function(e,o){if(null===e)c.push(null);else{var u={};u.color=e.color,u.x=a[o];var p=e;if("object"==typeof e&&null!==e)if(e.constructor.toString().indexOf("Array")>-1){let t,i,a;t=[].concat(s.chartData.xAxisData.ranges),i=t.shift(),a=t.pop(),p=e[1],u.x=s.area[3]+d*(e[0]-i)/(a-i),"bubble"==s.type&&(u.r=e[2],u.t=e[3])}else p=e.value;"center"==l&&(u.x+=n/2);var f=h*(p-t)/(i-t);f*=r,u.y=s.height-f-s.area[2],c.push(u)}})),c}function fs(e,t,i,a,n,s,o,r,l){l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;var c=s.xAxis.boundaryGap,h=[],d=s.height-s.area[0]-s.area[2],u=s.width-s.area[1]-s.area[3];return e.forEach((function(e,o){if(null===e)h.push(null);else{var p={};if(p.color=e.color,"vertical"==r.animation){p.x=a[o];var f=e;if("object"==typeof e&&null!==e)if(e.constructor.toString().indexOf("Array")>-1){let t,i,a;t=[].concat(s.chartData.xAxisData.ranges),i=t.shift(),a=t.pop(),f=e[1],p.x=s.area[3]+u*(e[0]-i)/(a-i)}else f=e.value;"center"==c&&(p.x+=n/2);var g=d*(f-t)/(i-t);g*=l,p.y=s.height-g-s.area[2],h.push(p)}else{p.x=a[0]+n*o*l;f=e;"center"==c&&(p.x+=n/2);g=d*(f-t)/(i-t);p.y=s.height-g-s.area[2],h.push(p)}}})),h}function gs(e,t,i,a,n,s,o,r,l){l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;var c=[],h=s.height-s.area[0]-s.area[2],d=s.width-s.area[1]-s.area[3];return e.forEach((function(e,o){if(null===e)c.push(null);else{var r={};r.color=e.color,r.x=a[o];var u=e;if("object"==typeof e&&null!==e)if(e.constructor.toString().indexOf("Array")>-1){let t,i,a;t=[].concat(s.chartData.xAxisData.ranges),i=t.shift(),a=t.pop(),u=e[1],r.x=s.area[3]+d*(e[0]-i)/(a-i)}else u=e.value;r.x+=n/2;var p=h*(u*l-t)/(i-t);r.y=s.height-p-s.area[2],c.push(r)}})),c}function ms(e,t,i,a,n,s,o,r){var l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,c=[],h=s.height-s.area[0]-s.area[2];s.width,s.area[1],s.area[3];var d=n*o.widthRatio;return e.forEach((function(e,o){if(null===e)c.push(null);else{var r={};r.color=e.color,r.x=a[o],r.x+=n/2;var u=e.data,p=h*(u*l-t)/(i-t);r.y=s.height-p-s.area[2],r.value=u,r.width=d,c.push(r)}})),c}function xs(e,t,i,a,n,s,o){var r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,l=[];s.height,s.area[0],s.area[2];var c=s.width-s.area[1]-s.area[3];return e.forEach((function(e,n){if(null===e)l.push(null);else{var o={};o.color=e.color,o.y=a[n];var h=e;"object"==typeof e&&null!==e&&(h=e.value);var d=c*(h-t)/(i-t);d*=r,o.height=d,o.value=h,o.x=d+s.area[3],l.push(o)}})),l}function ys(e,t,i,a,n,s,o,r,l){var c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1,h=[],d=s.height-s.area[0]-s.area[2];return e.forEach((function(e,o){if(null===e)h.push(null);else{var u={};if(u.color=e.color,u.x=a[o]+Math.round(n/2),r>0){var p=0;for(let e=0;e<=r;e++)p+=l[e].data[o];var f=d*(p-t)/(i-t),g=d*(p-e-t)/(i-t)}else{p=e;"object"==typeof e&&null!==e&&(p=e.value);f=d*(p-t)/(i-t),g=0}var m=g;f*=c,m*=c,u.y=s.height-Math.round(f)-s.area[2],u.y0=s.height-Math.round(m)-s.area[2],h.push(u)}})),h}function bs(e,t,i,a,n,s,o,r,l){var c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1,h=[],d=s.width-s.area[1]-s.area[3];return e.forEach((function(e,n){if(null===e)h.push(null);else{var o={};if(o.color=e.color,o.y=a[n],r>0){var u=0;for(let e=0;e<=r;e++)u+=l[e].data[n];var p=d*(u-t)/(i-t),f=d*(u-e-t)/(i-t)}else{u=e;"object"==typeof e&&null!==e&&(u=e.value);p=d*(u-t)/(i-t),f=0}var g=f;p*=c,g*=c,o.height=p-g,o.x=s.area[3]+p,o.x0=s.area[3]+g,h.push(o)}})),h}function _s(e,t,i,a,n){var s;s="stack"==a?Bn(e,t.categories.length):Nn(e);var o=[];(s=s.filter((function(e){return"object"==typeof e&&null!==e?e.constructor.toString().indexOf("Array")>-1?null!==e:null!==e.value:null!==e}))).map((function(e){"object"==typeof e?e.constructor.toString().indexOf("Array")>-1?"candle"==t.type?e.map((function(e){o.push(e)})):o.push(e[1]):o.push(e.value):o.push(e)}));var r=n.min||0,l=n.max||0;o.length>0&&(r=Math.min.apply(this,o),l=Math.max.apply(this,o)),r===l&&(0==l?l=10:r=0);for(var c=function(e,t){var i=0,a=t-e;return{minRange:Cn(e,"lower",i=a>=1e4?1e3:a>=1e3?100:a>=100?10:a>=10?5:a>=1?1:a>=.1?.1:a>=.01?.01:a>=.001?.001:a>=1e-4?1e-4:a>=1e-5?1e-5:1e-6),maxRange:Cn(t,"upper",i)}}(r,l),h=void 0===n.min||null===n.min?c.minRange:n.min,d=((void 0===n.max||null===n.max?c.maxRange:n.max)-h)/t.yAxis.splitNumber,u=[],p=0;p<=t.yAxis.splitNumber;p++)u.push(h+d*p);return u.reverse()}function Ss(e,t,i,a){var n=kn({},{type:""},t.extra.column),s=t.yAxis.data.length,o=new Array(s);if(s>0){for(let t=0;t<s;t++){o[t]=[];for(let i=0;i<e.length;i++)e[i].index==t&&o[t].push(e[i])}var r=new Array(s),l=new Array(s),c=new Array(s);for(let e=0;e<s;e++){let s=t.yAxis.data[e];1==t.yAxis.disabled&&(s.disabled=!0),"categories"===s.type?(s.formatter||(s.formatter=(e,t,i)=>e+(s.unit||"")),s.categories=s.categories||t.categories,r[e]=s.categories):(s.formatter||(s.formatter=(e,t,i)=>Dn.toFixed(e,s.tofix||0)+(s.unit||"")),r[e]=_s(o[e],t,0,n.type,s));let h=s.fontSize*t.pix||i.fontSize;c[e]={position:s.position?s.position:"left",width:0},l[e]=r[e].map((function(i,n){return i=s.formatter(i,n,t),c[e].width=Math.max(c[e].width,En(i,h,a)+5),i}));let d=s.calibration?4*t.pix:0;c[e].width+=d+3*t.pix,!0===s.disabled&&(c[e].width=0)}}else{r=new Array(1),l=new Array(1),c=new Array(1);"bar"===t.type?(r[0]=t.categories,t.yAxis.formatter||(t.yAxis.formatter=(e,t,i)=>e+(i.yAxis.unit||""))):(t.yAxis.formatter||(t.yAxis.formatter=(e,t,i)=>e.toFixed(i.yAxis.tofix)+(i.yAxis.unit||"")),r[0]=_s(e,t,0,n.type,{})),c[0]={position:"left",width:0};var h=t.yAxis.fontSize*t.pix||i.fontSize;l[0]=r[0].map((function(e,i){return e=t.yAxis.formatter(e,i,t),c[0].width=Math.max(c[0].width,En(e,h,a)+5),e})),c[0].width+=3*t.pix,!0===t.yAxis.disabled?(c[0]={position:"left",width:0},t.yAxis.data[0]={disabled:!0}):(t.yAxis.data[0]={disabled:!1,position:"left",max:t.yAxis.max,min:t.yAxis.min,formatter:t.yAxis.formatter},"bar"===t.type&&(t.yAxis.data[0].categories=t.categories,t.yAxis.data[0].type="categories"))}return{rangesFormat:l,ranges:r,yAxisWidth:c}}function ws(e,t){!0!==t.rotateLock?(e.translate(t.height,0),e.rotate(90*Math.PI/180)):!0!==t._rotate_&&(e.translate(t.height,0),e.rotate(90*Math.PI/180),t._rotate_=!0)}function Ts(e,t,i,a,n){if(a.beginPath(),"hollow"==n.dataPointShapeType?(a.setStrokeStyle(t),a.setFillStyle(n.background),a.setLineWidth(2*n.pix)):(a.setStrokeStyle("#ffffff"),a.setFillStyle(t),a.setLineWidth(1*n.pix)),"diamond"===i)e.forEach((function(e,t){null!==e&&(a.moveTo(e.x,e.y-4.5),a.lineTo(e.x-4.5,e.y),a.lineTo(e.x,e.y+4.5),a.lineTo(e.x+4.5,e.y),a.lineTo(e.x,e.y-4.5))}));else if("circle"===i)e.forEach((function(e,t){null!==e&&(a.moveTo(e.x+2.5*n.pix,e.y),a.arc(e.x,e.y,3*n.pix,0,2*Math.PI,!1))}));else if("square"===i)e.forEach((function(e,t){null!==e&&(a.moveTo(e.x-3.5,e.y-3.5),a.rect(e.x-3.5,e.y-3.5,7,7))}));else if("triangle"===i)e.forEach((function(e,t){null!==e&&(a.moveTo(e.x,e.y-4.5),a.lineTo(e.x-4.5,e.y+4.5),a.lineTo(e.x+4.5,e.y+4.5),a.lineTo(e.x,e.y-4.5))}));else if("none"===i)return;a.closePath(),a.fill(),a.stroke()}function vs(e,t,i,a,n,s,o){if(n.tooltip&&!(n.tooltip.group.length>0&&0==n.tooltip.group.includes(o))){var r="number"==typeof n.tooltip.index?n.tooltip.index:n.tooltip.index[n.tooltip.group.indexOf(o)];if(a.beginPath(),"hollow"==s.activeType?(a.setStrokeStyle(t),a.setFillStyle(n.background),a.setLineWidth(2*n.pix)):(a.setStrokeStyle("#ffffff"),a.setFillStyle(t),a.setLineWidth(1*n.pix)),"diamond"===i)e.forEach((function(e,t){null!==e&&r==t&&(a.moveTo(e.x,e.y-4.5),a.lineTo(e.x-4.5,e.y),a.lineTo(e.x,e.y+4.5),a.lineTo(e.x+4.5,e.y),a.lineTo(e.x,e.y-4.5))}));else if("circle"===i)e.forEach((function(e,t){null!==e&&r==t&&(a.moveTo(e.x+2.5*n.pix,e.y),a.arc(e.x,e.y,3*n.pix,0,2*Math.PI,!1))}));else if("square"===i)e.forEach((function(e,t){null!==e&&r==t&&(a.moveTo(e.x-3.5,e.y-3.5),a.rect(e.x-3.5,e.y-3.5,7,7))}));else if("triangle"===i)e.forEach((function(e,t){null!==e&&r==t&&(a.moveTo(e.x,e.y-4.5),a.lineTo(e.x-4.5,e.y+4.5),a.lineTo(e.x+4.5,e.y+4.5),a.lineTo(e.x,e.y-4.5))}));else if("none"===i)return;a.closePath(),a.fill(),a.stroke()}}function ks(e,t,i,a){var n=e.title.fontSize||t.titleFontSize,s=e.subtitle.fontSize||t.subtitleFontSize,o=e.title.name||"",r=e.subtitle.name||"",l=e.title.color||e.fontColor,c=e.subtitle.color||e.fontColor,h=o?n:0,d=r?s:0;if(r){var u=En(r,s*e.pix,i),p=a.x-u/2+(e.subtitle.offsetX||0)*e.pix,f=a.y+s*e.pix/2+(e.subtitle.offsetY||0)*e.pix;o&&(f+=(h*e.pix+5)/2),i.beginPath(),i.setFontSize(s*e.pix),i.setFillStyle(c),i.fillText(r,p,f),i.closePath(),i.stroke()}if(o){var g=En(o,n*e.pix,i),m=a.x-g/2+(e.title.offsetX||0),x=a.y+n*e.pix/2+(e.title.offsetY||0)*e.pix;r&&(x-=(d*e.pix+5)/2),i.beginPath(),i.setFontSize(n*e.pix),i.setFillStyle(l),i.fillText(o,m,x),i.closePath(),i.stroke()}}function Ds(e,t,i,a,n){var s=t.data,o=t.textOffset?t.textOffset:0;e.forEach((function(e,r){if(null!==e){a.beginPath();var l=t.textSize?t.textSize*n.pix:i.fontSize;a.setFontSize(l),a.setFillStyle(t.textColor||n.fontColor);var c=s[r];"object"==typeof s[r]&&null!==s[r]&&(c=s[r].constructor.toString().indexOf("Array")>-1?s[r][1]:s[r].value);var h=t.formatter?t.formatter(c,r,t,n):c;a.setTextAlign("center"),a.fillText(String(h),e.x,e.y-4+o*n.pix),a.closePath(),a.stroke(),a.setTextAlign("left")}}))}function As(e,t,i,a,n){var s=t.data,o=t.textOffset?t.textOffset:0,r=n.extra.column.labelPosition;e.forEach((function(e,l){if(null!==e){a.beginPath();var c=t.textSize?t.textSize*n.pix:i.fontSize;a.setFontSize(c),a.setFillStyle(t.textColor||n.fontColor);var h=s[l];"object"==typeof s[l]&&null!==s[l]&&(h=s[l].constructor.toString().indexOf("Array")>-1?s[l][1]:s[l].value);var d=t.formatter?t.formatter(h,l,t,n):h;a.setTextAlign("center");var u=e.y-4*n.pix+o*n.pix;e.y>t.zeroPoints&&(u=e.y+o*n.pix+c),"insideTop"==r&&(u=e.y+c+o*n.pix,e.y>t.zeroPoints&&(u=e.y-o*n.pix-4*n.pix)),"center"==r&&(u=e.y+o*n.pix+(n.height-n.area[2]-e.y+c)/2,t.zeroPoints<n.height-n.area[2]&&(u=e.y+o*n.pix+(t.zeroPoints-e.y+c)/2),e.y>t.zeroPoints&&(u=e.y-o*n.pix-(e.y-t.zeroPoints-c)/2),"stack"==n.extra.column.type&&(u=e.y+o*n.pix+(e.y0-e.y+c)/2)),"bottom"==r&&(u=n.height-n.area[2]+o*n.pix-4*n.pix,t.zeroPoints<n.height-n.area[2]&&(u=t.zeroPoints+o*n.pix-4*n.pix),e.y>t.zeroPoints&&(u=t.zeroPoints-o*n.pix+c+2*n.pix),"stack"==n.extra.column.type&&(u=e.y0+o*n.pix-4*n.pix)),a.fillText(String(d),e.x,u),a.closePath(),a.stroke(),a.setTextAlign("left")}}))}function Cs(e,t,i,a,n,s){t.data;var o=t.textOffset?t.textOffset:0;n.extra.mount.labelPosition,e.forEach((function(e,r){if(null!==e){a.beginPath();var l=t[r].textSize?t[r].textSize*n.pix:i.fontSize;a.setFontSize(l),a.setFillStyle(t[r].textColor||n.fontColor);var c=e.value,h=t[r].formatter?t[r].formatter(c,r,t,n):c;a.setTextAlign("center");var d=e.y-4*n.pix+o*n.pix;e.y>s&&(d=e.y+o*n.pix+l),a.fillText(String(h),e.x,d),a.closePath(),a.stroke(),a.setTextAlign("left")}}))}function Ps(e,t,i,a,n){var s=t.data;t.textOffset&&t.textOffset,e.forEach((function(e,o){if(null!==e){a.beginPath();var r=t.textSize?t.textSize*n.pix:i.fontSize;a.setFontSize(r),a.setFillStyle(t.textColor||n.fontColor);var l=s[o];"object"==typeof s[o]&&null!==s[o]&&(l=s[o].value);var c=t.formatter?t.formatter(l,o,t,n):l;a.setTextAlign("left"),a.fillText(String(c),e.x+4*n.pix,e.y+r/2-3),a.closePath(),a.stroke()}}))}function Ms(e,t,i,a,n,s){let o;t=(t-=e.width/2+e.labelOffset*a.pix)<10?10:t,o=e.endAngle<e.startAngle?2+e.endAngle-e.startAngle:e.startAngle-e.endAngle;let r=o/e.splitLine.splitNumber,l=(e.endNumber-e.startNumber)/e.splitLine.splitNumber,c=e.startAngle,h=e.startNumber;for(let g=0;g<e.splitLine.splitNumber+1;g++){var d={x:t*Math.cos(c*Math.PI),y:t*Math.sin(c*Math.PI)},u=e.formatter?e.formatter(h,g,a):h;d.x+=i.x-En(u,n.fontSize,s)/2,d.y+=i.y;var p=d.x,f=d.y;s.beginPath(),s.setFontSize(n.fontSize),s.setFillStyle(e.labelColor||a.fontColor),s.fillText(u,p,f+n.fontSize/2),s.closePath(),s.stroke(),c+=r,c>=2&&(c%=2),h+=l}}function Is(e,t,i,a,n,s){var o=a.extra.radar||{};e.forEach((function(e,r){if(!0===o.labelPointShow&&""!==a.categories[r]){var l={x:t*Math.cos(e),y:t*Math.sin(e)},c=Fn(l.x,l.y,i);s.setFillStyle(o.labelPointColor),s.beginPath(),s.arc(c.x,c.y,o.labelPointRadius*a.pix,0,2*Math.PI,!1),s.closePath(),s.fill()}if(!0===o.labelShow){var h={x:(t+n.radarLabelTextMargin*a.pix)*Math.cos(e),y:(t+n.radarLabelTextMargin*a.pix)*Math.sin(e)},d=Fn(h.x,h.y,i),u=d.x,p=d.y;Dn.approximatelyEqual(h.x,0)?u-=En(a.categories[r]||"",n.fontSize,s)/2:h.x<0&&(u-=En(a.categories[r]||"",n.fontSize,s)),s.beginPath(),s.setFontSize(n.fontSize),s.setFillStyle(o.labelColor||a.fontColor),s.fillText(a.categories[r]||"",u,p+n.fontSize/2),s.closePath(),s.stroke()}}))}function Fs(e,t,i,a,n,s){var o=i.pieChartLinePadding,r=[],l=null,c=e.map((function(i,a){var n=i.formatter?i.formatter(i,a,e,t):Dn.toFixed(100*i._proportion_.toFixed(4))+"%";n=i.labelText?i.labelText:n;var s=2*Math.PI-(i._start_+2*Math.PI*i._proportion_/2);return i._rose_proportion_&&(s=2*Math.PI-(i._start_+2*Math.PI*i._rose_proportion_/2)),{arc:s,text:n,color:i.color,radius:i._radius_,textColor:i.textColor,textSize:i.textSize,labelShow:i.labelShow}}));for(let h=0;h<c.length;h++){let e=c[h],n=Math.cos(e.arc)*(e.radius+o),s=Math.sin(e.arc)*(e.radius+o),d=Math.cos(e.arc)*e.radius,u=Math.sin(e.arc)*e.radius,p=n>=0?n+i.pieChartTextPadding:n-i.pieChartTextPadding,f=s,g=En(e.text,e.textSize*t.pix||i.fontSize,a),m=f;l&&Dn.isSameXCoordinateArea(l.start,{x:p})&&(m=p>0?Math.min(f,l.start.y):n<0||f>0?Math.max(f,l.start.y):Math.min(f,l.start.y)),p<0&&(p-=g),l=Ln({lineStart:{x:d,y:u},lineEnd:{x:n,y:s},start:{x:p,y:m},width:g,height:i.fontSize,text:e.text,color:e.color,textColor:e.textColor,textSize:e.textSize},l),r.push(l)}for(let h=0;h<r.length;h++){if(!1===c[h].labelShow)continue;let e=r[h],n=Fn(e.lineStart.x,e.lineStart.y,s),o=Fn(e.lineEnd.x,e.lineEnd.y,s),l=Fn(e.start.x,e.start.y,s);a.setLineWidth(1*t.pix),a.setFontSize(e.textSize*t.pix||i.fontSize),a.beginPath(),a.setStrokeStyle(e.color),a.setFillStyle(e.color),a.moveTo(n.x,n.y);let d=e.start.x<0?l.x+e.width:l.x,u=e.start.x<0?l.x-5:l.x+5;a.quadraticCurveTo(o.x,o.y,d,l.y),a.moveTo(n.x,n.y),a.stroke(),a.closePath(),a.beginPath(),a.moveTo(l.x+e.width,l.y),a.arc(d,l.y,2*t.pix,0,2*Math.PI),a.closePath(),a.fill(),a.beginPath(),a.setFontSize(e.textSize*t.pix||i.fontSize),a.setFillStyle(e.textColor||t.fontColor),a.fillText(e.text,u,l.y+3),a.closePath(),a.stroke(),a.closePath()}}function Ls(e,t,i){let a=kn({},{type:"solid",dashLength:4,data:[]},e.extra.markLine),n=e.area[3],s=e.width-e.area[1],o=function(e,t){let i,a,n=t.height-t.area[0]-t.area[2];for(let s=0;s<e.length;s++){e[s].yAxisIndex=e[s].yAxisIndex?e[s].yAxisIndex:0;let o=[].concat(t.chartData.yAxisData.ranges[e[s].yAxisIndex]);i=o.pop(),a=o.shift();let r=n*(e[s].value-i)/(a-i);e[s].y=t.height-Math.round(r)-t.area[2]}return e}(a.data,e);for(let r=0;r<o.length;r++){let t=kn({},{lineColor:"#DE4A42",showLabel:!1,labelFontSize:13,labelPadding:6,labelFontColor:"#666666",labelBgColor:"#DFE8FF",labelBgOpacity:.8,labelAlign:"left",labelOffsetX:0,labelOffsetY:0},o[r]);if("dash"==a.type&&i.setLineDash([a.dashLength,a.dashLength]),i.setStrokeStyle(t.lineColor),i.setLineWidth(1*e.pix),i.beginPath(),i.moveTo(n,t.y),i.lineTo(s,t.y),i.stroke(),i.setLineDash([]),t.showLabel){let a=t.labelFontSize*e.pix,n=t.labelText?t.labelText:t.value;i.setFontSize(a);let s=En(n,a,i)+t.labelPadding*e.pix*2,o="left"==t.labelAlign?e.area[3]-s:e.width-e.area[1];o+=t.labelOffsetX;let r=t.y-.5*a-t.labelPadding*e.pix;r+=t.labelOffsetY;let l=o+t.labelPadding*e.pix;t.y,i.setFillStyle(An(t.labelBgColor,t.labelBgOpacity)),i.setStrokeStyle(t.labelBgColor),i.setLineWidth(1*e.pix),i.beginPath(),i.rect(o,r,s,a+2*t.labelPadding*e.pix),i.closePath(),i.stroke(),i.fill(),i.setFontSize(a),i.setTextAlign("left"),i.setFillStyle(t.labelFontColor),i.fillText(String(n),l,r+a+t.labelPadding*e.pix/2),i.stroke(),i.setTextAlign("left")}}}function Rs(e,t,i,a,n){var s=kn({},{gridType:"solid",dashLength:4},e.extra.tooltip),o=e.area[3],r=e.width-e.area[1];if("dash"==s.gridType&&i.setLineDash([s.dashLength,s.dashLength]),i.setStrokeStyle(s.gridColor||"#cccccc"),i.setLineWidth(1*e.pix),i.beginPath(),i.moveTo(o,e.tooltip.offset.y),i.lineTo(r,e.tooltip.offset.y),i.stroke(),i.setLineDash([]),s.yAxisLabel){let a=s.boxPadding*e.pix,n=function(e,t,i,a,n){let s=[].concat(i.chartData.yAxisData.ranges),o=i.height-i.area[0]-i.area[2],r=i.area[0],l=[];for(let c=0;c<s.length;c++){let t=Math.max.apply(this,s[c]),a=t-(t-Math.min.apply(this,s[c]))*(e-r)/o;a=i.yAxis.data&&i.yAxis.data[c].formatter?i.yAxis.data[c].formatter(a,c,i):a.toFixed(0),l.push(String(a))}return l}(e.tooltip.offset.y,e.series,e),o=e.chartData.yAxisData.yAxisWidth,r=e.area[3],l=e.width-e.area[1];for(let c=0;c<n.length;c++){i.setFontSize(s.fontSize*e.pix);let h,d,u,p=En(n[c],s.fontSize*e.pix,i);"left"==o[c].position?(h=r-(p+2*a)-2*e.pix,d=Math.max(h,h+p+2*a)):(h=l+2*e.pix,d=Math.max(h+o[c].width,h+p+2*a)),u=d-h;let f=h+(u-p)/2,g=e.tooltip.offset.y;i.beginPath(),i.setFillStyle(An(s.labelBgColor||t.toolTipBackground,s.labelBgOpacity||t.toolTipOpacity)),i.setStrokeStyle(s.labelBgColor||t.toolTipBackground),i.setLineWidth(1*e.pix),i.rect(h,g-.5*t.fontSize-a,u,t.fontSize+2*a),i.closePath(),i.stroke(),i.fill(),i.beginPath(),i.setFontSize(t.fontSize),i.setFillStyle(s.labelFontColor||e.fontColor),i.fillText(n[c],f,g+.5*t.fontSize),i.closePath(),i.stroke(),"left"==o[c].position?r-=o[c].width+e.yAxis.padding*e.pix:l+=o[c].width+e.yAxis.padding*e.pix}}}function Os(e,t,i,a,n){var s=kn({},{activeBgColor:"#000000",activeBgOpacity:.08,activeWidth:n},t.extra.column);s.activeWidth=s.activeWidth>n?n:s.activeWidth;var o=t.area[0],r=t.height-t.area[2];a.beginPath(),a.setFillStyle(An(s.activeBgColor,s.activeBgOpacity)),a.rect(e-s.activeWidth/2,o,s.activeWidth,r-o),a.closePath(),a.fill(),a.setFillStyle("#FFFFFF")}function Es(e,t,i,a,n){var s=kn({},{activeBgColor:"#000000",activeBgOpacity:.08},t.extra.bar),o=t.area[3],r=t.width-t.area[1];a.beginPath(),a.setFillStyle(An(s.activeBgColor,s.activeBgOpacity)),a.rect(o,e-n/2,r-o,n),a.closePath(),a.fill(),a.setFillStyle("#FFFFFF")}function Ns(e,t,i,a,n,s,o){var r=kn({},{showBox:!0,showArrow:!0,showCategory:!1,bgColor:"#000000",bgOpacity:.7,borderColor:"#000000",borderWidth:0,borderRadius:0,borderOpacity:.7,boxPadding:3,fontColor:"#FFFFFF",fontSize:13,lineHeight:20,legendShow:!0,legendShape:"auto",splitLine:!0},i.extra.tooltip);1==r.showCategory&&i.categories&&e.unshift({text:i.categories[i.tooltip.index],color:null});var l=r.fontSize*i.pix,c=r.lineHeight*i.pix,h=r.boxPadding*i.pix,d=l,u=5*i.pix;0==r.legendShow&&(d=0,u=0);var p=r.showArrow?8*i.pix:0,f=!1;"line"!=i.type&&"mount"!=i.type&&"area"!=i.type&&"candle"!=i.type&&"mix"!=i.type||1==r.splitLine&&function(e,t,i,a){var n=t.extra.tooltip||{};n.gridType=null==n.gridType?"solid":n.gridType,n.dashLength=null==n.dashLength?4:n.dashLength;var s=t.area[0],o=t.height-t.area[2];if("dash"==n.gridType&&a.setLineDash([n.dashLength,n.dashLength]),a.setStrokeStyle(n.gridColor||"#cccccc"),a.setLineWidth(1*t.pix),a.beginPath(),a.moveTo(e,s),a.lineTo(e,o),a.stroke(),a.setLineDash([]),n.xAxisLabel){let s=t.categories[t.tooltip.index];a.setFontSize(i.fontSize);let r=En(s,i.fontSize,a),l=e-.5*r,c=o+2*t.pix;a.beginPath(),a.setFillStyle(An(n.labelBgColor||i.toolTipBackground,n.labelBgOpacity||i.toolTipOpacity)),a.setStrokeStyle(n.labelBgColor||i.toolTipBackground),a.setLineWidth(1*t.pix),a.rect(l-n.boxPadding*t.pix,c,r+2*n.boxPadding*t.pix,i.fontSize+2*n.boxPadding*t.pix),a.closePath(),a.stroke(),a.fill(),a.beginPath(),a.setFontSize(i.fontSize),a.setFillStyle(n.labelFontColor||t.fontColor),a.fillText(String(s),l,c+n.boxPadding*t.pix+i.fontSize),a.closePath(),a.stroke()}}(i.tooltip.offset.x,i,a,n),(t=kn({x:0,y:0},t)).y-=8*i.pix;var g=e.map((function(e){return En(e.text,l,n)})),m=d+u+4*h+Math.max.apply(null,g),x=2*h+e.length*c;if(0!=r.showBox){t.x-Math.abs(i._scrollDistance_||0)+p+m>i.width&&(f=!0),x+t.y>i.height&&(t.y=i.height-x),n.beginPath(),n.setFillStyle(An(r.bgColor,r.bgOpacity)),n.setLineWidth(r.borderWidth*i.pix),n.setStrokeStyle(An(r.borderColor,r.borderOpacity));var y=r.borderRadius;f?(m+p>i.width&&(t.x=i.width+Math.abs(i._scrollDistance_||0)+p+(m-i.width)),m>t.x&&(t.x=i.width+Math.abs(i._scrollDistance_||0)+p+(m-i.width)),r.showArrow&&(n.moveTo(t.x,t.y+10*i.pix),n.lineTo(t.x-p,t.y+10*i.pix+5*i.pix)),n.arc(t.x-p-y,t.y+x-y,y,0,Math.PI/2,!1),n.arc(t.x-p-Math.round(m)+y,t.y+x-y,y,Math.PI/2,Math.PI,!1),n.arc(t.x-p-Math.round(m)+y,t.y+y,y,-Math.PI,-Math.PI/2,!1),n.arc(t.x-p-y,t.y+y,y,-Math.PI/2,0,!1),r.showArrow&&(n.lineTo(t.x-p,t.y+10*i.pix-5*i.pix),n.lineTo(t.x,t.y+10*i.pix))):(r.showArrow&&(n.moveTo(t.x,t.y+10*i.pix),n.lineTo(t.x+p,t.y+10*i.pix-5*i.pix)),n.arc(t.x+p+y,t.y+y,y,-Math.PI,-Math.PI/2,!1),n.arc(t.x+p+Math.round(m)-y,t.y+y,y,-Math.PI/2,0,!1),n.arc(t.x+p+Math.round(m)-y,t.y+x-y,y,0,Math.PI/2,!1),n.arc(t.x+p+y,t.y+x-y,y,Math.PI/2,Math.PI,!1),r.showArrow&&(n.lineTo(t.x+p,t.y+10*i.pix+5*i.pix),n.lineTo(t.x,t.y+10*i.pix))),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke(),r.legendShow&&e.forEach((function(e,a){if(null!==e.color){n.beginPath(),n.setFillStyle(e.color);var s=t.x+p+2*h,o=t.y+(c-l)/2+c*a+h+1;switch(f&&(s=t.x-m-p+2*h),e.legendShape){case"line":n.moveTo(s,o+.5*d-2*i.pix),n.fillRect(s,o+.5*d-2*i.pix,d,4*i.pix);break;case"triangle":n.moveTo(s+7.5*i.pix,o+.5*d-5*i.pix),n.lineTo(s+2.5*i.pix,o+.5*d+5*i.pix),n.lineTo(s+12.5*i.pix,o+.5*d+5*i.pix),n.lineTo(s+7.5*i.pix,o+.5*d-5*i.pix);break;case"diamond":n.moveTo(s+7.5*i.pix,o+.5*d-5*i.pix),n.lineTo(s+2.5*i.pix,o+.5*d),n.lineTo(s+7.5*i.pix,o+.5*d+5*i.pix),n.lineTo(s+12.5*i.pix,o+.5*d),n.lineTo(s+7.5*i.pix,o+.5*d-5*i.pix);break;case"circle":n.moveTo(s+7.5*i.pix,o+.5*d),n.arc(s+7.5*i.pix,o+.5*d,5*i.pix,0,2*Math.PI);break;case"rect":default:n.moveTo(s,o+.5*d-5*i.pix),n.fillRect(s,o+.5*d-5*i.pix,15*i.pix,10*i.pix);break;case"square":n.moveTo(s+2*i.pix,o+.5*d-5*i.pix),n.fillRect(s+2*i.pix,o+.5*d-5*i.pix,10*i.pix,10*i.pix)}n.closePath(),n.fill()}})),e.forEach((function(e,i){var a=t.x+p+2*h+d+u;f&&(a=t.x-m-p+2*h+d+u);var s=t.y+c*i+(c-l)/2-1+h+l;n.beginPath(),n.setFontSize(l),n.setTextBaseline("normal"),n.setFillStyle(r.fontColor),n.fillText(e.text,a,s),n.closePath(),n.stroke()}))}}function Bs(e,t,i,a,n,s){(e.extra.tooltip||{}).horizentalLine&&e.tooltip&&1===a&&("line"==e.type||"area"==e.type||"column"==e.type||"mount"==e.type||"candle"==e.type||"mix"==e.type)&&Rs(e,t,i),i.save(),e._scrollDistance_&&0!==e._scrollDistance_&&!0===e.enableScroll&&i.translate(e._scrollDistance_,0),e.tooltip&&e.tooltip.textList&&e.tooltip.textList.length&&1===a&&Ns(e.tooltip.textList,e.tooltip.offset,e,t,i),i.restore()}function zs(e,t,i,a){let n=t.chartData.xAxisData,s=n.xAxisPoints,o=n.startX,r=n.endX,l=n.eachSpacing;var c="center";"bar"!=t.type&&"line"!=t.type&&"area"!=t.type&&"scatter"!=t.type&&"bubble"!=t.type||(c=t.xAxis.boundaryGap);var h=t.height-t.area[2],d=t.area[0];if(t.enableScroll&&t.xAxis.scrollShow){var u=t.height-t.area[2]+i.xAxisHeight,p=r-o,f=l*(s.length-1);"mount"==t.type&&t.extra&&t.extra.mount&&t.extra.mount.widthRatio&&t.extra.mount.widthRatio>1&&(t.extra.mount.widthRatio>2&&(t.extra.mount.widthRatio=2),f+=(t.extra.mount.widthRatio-1)*l);var g=p*p/f,m=0;t._scrollDistance_&&(m=-t._scrollDistance_*p/f),a.beginPath(),a.setLineCap("round"),a.setLineWidth(6*t.pix),a.setStrokeStyle(t.xAxis.scrollBackgroundColor||"#EFEBEF"),a.moveTo(o,u),a.lineTo(r,u),a.stroke(),a.closePath(),a.beginPath(),a.setLineCap("round"),a.setLineWidth(6*t.pix),a.setStrokeStyle(t.xAxis.scrollColor||"#A6A6A6"),a.moveTo(o+m,u),a.lineTo(o+m+g,u),a.stroke(),a.closePath(),a.setLineCap("butt")}if(a.save(),t._scrollDistance_&&0!==t._scrollDistance_&&a.translate(t._scrollDistance_,0),!0===t.xAxis.calibration&&(a.setStrokeStyle(t.xAxis.gridColor||"#cccccc"),a.setLineCap("butt"),a.setLineWidth(1*t.pix),s.forEach((function(e,i){i>0&&(a.beginPath(),a.moveTo(e-l/2,h),a.lineTo(e-l/2,h+3*t.pix),a.closePath(),a.stroke())}))),!0!==t.xAxis.disableGrid&&(a.setStrokeStyle(t.xAxis.gridColor||"#cccccc"),a.setLineCap("butt"),a.setLineWidth(1*t.pix),"dash"==t.xAxis.gridType&&a.setLineDash([t.xAxis.dashLength*t.pix,t.xAxis.dashLength*t.pix]),t.xAxis.gridEval=t.xAxis.gridEval||1,s.forEach((function(e,i){i%t.xAxis.gridEval==0&&(a.beginPath(),a.moveTo(e,h),a.lineTo(e,d),a.stroke())})),a.setLineDash([])),!0!==t.xAxis.disabled){let n=e.length;t.xAxis.labelCount&&(n=t.xAxis.itemCount?Math.ceil(e.length/t.xAxis.itemCount*t.xAxis.labelCount):t.xAxis.labelCount,n-=1);let o=Math.ceil(e.length/n),r=[],d=e.length;for(let t=0;t<d;t++)t%o!=0?r.push(""):r.push(e[t]);r[d-1]=e[d-1];var x=t.xAxis.fontSize*t.pix||i.fontSize;0===i._xAxisTextAngle_?r.forEach((function(e,i){var n=t.xAxis.formatter?t.xAxis.formatter(e,i,t):e,o=-En(String(n),x,a)/2;"center"==c&&(o+=l/2),t.xAxis.scrollShow&&t.pix;var r=t._scrollDistance_||0,d="center"==c?s[i]+l/2:s[i];d-Math.abs(r)>=t.area[3]-1&&d-Math.abs(r)<=t.width-t.area[1]+1&&(a.beginPath(),a.setFontSize(x),a.setFillStyle(t.xAxis.fontColor||t.fontColor),a.fillText(String(n),s[i]+o,h+t.xAxis.marginTop*t.pix+(t.xAxis.lineHeight-t.xAxis.fontSize)*t.pix/2+t.xAxis.fontSize*t.pix),a.closePath(),a.stroke())})):r.forEach((function(e,n){var o=t.xAxis.formatter?t.xAxis.formatter(e):e,r=t._scrollDistance_||0,d="center"==c?s[n]+l/2:s[n];if(d-Math.abs(r)>=t.area[3]-1&&d-Math.abs(r)<=t.width-t.area[1]+1){a.save(),a.beginPath(),a.setFontSize(x),a.setFillStyle(t.xAxis.fontColor||t.fontColor);var u=En(String(o),x,a),p=s[n];"center"==c&&(p=s[n]+l/2),t.xAxis.scrollShow&&t.pix;var f=h+t.xAxis.marginTop*t.pix+x-x*Math.abs(Math.sin(i._xAxisTextAngle_));t.xAxis.rotateAngle<0?(p-=x/2,u=0):(p+=x/2,u=-u),a.translate(p,f),a.rotate(-1*i._xAxisTextAngle_),a.fillText(String(o),u,0),a.closePath(),a.stroke(),a.restore()}}))}a.restore(),t.xAxis.title&&(a.beginPath(),a.setFontSize(t.xAxis.titleFontSize*t.pix),a.setFillStyle(t.xAxis.titleFontColor),a.fillText(String(t.xAxis.title),t.width-t.area[1]+t.xAxis.titleOffsetX*t.pix,t.height-t.area[2]+t.xAxis.marginTop*t.pix+(t.xAxis.lineHeight-t.xAxis.titleFontSize)*t.pix/2+(t.xAxis.titleFontSize+t.xAxis.titleOffsetY)*t.pix),a.closePath(),a.stroke()),t.xAxis.axisLine&&(a.beginPath(),a.setStrokeStyle(t.xAxis.axisLineColor),a.setLineWidth(1*t.pix),a.moveTo(o,t.height-t.area[2]),a.lineTo(r,t.height-t.area[2]),a.stroke())}function Us(e,t,i,a){if(!0===t.yAxis.disableGrid)return;let n=(t.height-t.area[0]-t.area[2])/t.yAxis.splitNumber,s=t.area[3],o=t.chartData.xAxisData.xAxisPoints,r=t.chartData.xAxisData.eachSpacing,l=r*(o.length-1);"mount"==t.type&&t.extra&&t.extra.mount&&t.extra.mount.widthRatio&&t.extra.mount.widthRatio>1&&(t.extra.mount.widthRatio>2&&(t.extra.mount.widthRatio=2),l+=(t.extra.mount.widthRatio-1)*r);let c=s+l,h=[],d=1;!1===t.xAxis.axisLine&&(d=0);for(let u=d;u<t.yAxis.splitNumber+1;u++)h.push(t.height-t.area[2]-n*u);a.save(),t._scrollDistance_&&0!==t._scrollDistance_&&a.translate(t._scrollDistance_,0),"dash"==t.yAxis.gridType&&a.setLineDash([t.yAxis.dashLength*t.pix,t.yAxis.dashLength*t.pix]),a.setStrokeStyle(t.yAxis.gridColor),a.setLineWidth(1*t.pix),h.forEach((function(e,t){a.beginPath(),a.moveTo(s,e),a.lineTo(c,e),a.stroke()})),a.setLineDash([]),a.restore()}function Ws(e,t,i,a){if(!0===t.yAxis.disabled)return;var n=t.height-t.area[0]-t.area[2],s=n/t.yAxis.splitNumber,o=t.area[3],r=t.width-t.area[1],l=t.height-t.area[2];a.beginPath(),a.setFillStyle(t.background),1==t.enableScroll&&t.xAxis.scrollPosition&&"left"!==t.xAxis.scrollPosition&&a.fillRect(0,0,o,l+2*t.pix),1==t.enableScroll&&t.xAxis.scrollPosition&&"right"!==t.xAxis.scrollPosition&&a.fillRect(r,0,t.width,l+2*t.pix),a.closePath(),a.stroke();let c=t.area[3],h=t.width-t.area[1],d=t.area[3]+(t.width-t.area[1]-t.area[3])/2;if(t.yAxis.data)for(let p=0;p<t.yAxis.data.length;p++){let e=t.yAxis.data[p];var u=[];if("categories"===e.type)for(let i=0;i<=e.categories.length;i++)u.push(t.area[0]+n/e.categories.length/2+n/e.categories.length*i);else for(let i=0;i<=t.yAxis.splitNumber;i++)u.push(t.area[0]+s*i);if(!0!==e.disabled){let n=t.chartData.yAxisData.rangesFormat[p],s=e.fontSize?e.fontSize*t.pix:i.fontSize,o=t.chartData.yAxisData.yAxisWidth[p],r=e.textAlign||"right";if(n.forEach((function(i,n){var l=u[n];a.beginPath(),a.setFontSize(s),a.setLineWidth(1*t.pix),a.setStrokeStyle(e.axisLineColor||"#cccccc"),a.setFillStyle(e.fontColor||t.fontColor);let p=0,f=4*t.pix;if("left"==o.position){switch(1==e.calibration&&(a.moveTo(c,l),a.lineTo(c-3*t.pix,l),f+=3*t.pix),r){case"left":a.setTextAlign("left"),p=c-o.width;break;case"right":a.setTextAlign("right"),p=c-f;break;default:a.setTextAlign("center"),p=c-o.width/2}a.fillText(String(i),p,l+s/2-3*t.pix)}else if("right"==o.position){switch(1==e.calibration&&(a.moveTo(h,l),a.lineTo(h+3*t.pix,l),f+=3*t.pix),r){case"left":a.setTextAlign("left"),p=h+f;break;case"right":a.setTextAlign("right"),p=h+o.width;break;default:a.setTextAlign("center"),p=h+o.width/2}a.fillText(String(i),p,l+s/2-3*t.pix)}else if("center"==o.position){switch(1==e.calibration&&(a.moveTo(d,l),a.lineTo(d-3*t.pix,l),f+=3*t.pix),r){case"left":a.setTextAlign("left"),p=d-o.width;break;case"right":a.setTextAlign("right"),p=d-f;break;default:a.setTextAlign("center"),p=d-o.width/2}a.fillText(String(i),p,l+s/2-3*t.pix)}a.closePath(),a.stroke(),a.setTextAlign("left")})),!1!==e.axisLine&&(a.beginPath(),a.setStrokeStyle(e.axisLineColor||"#cccccc"),a.setLineWidth(1*t.pix),"left"==o.position?(a.moveTo(c,t.height-t.area[2]),a.lineTo(c,t.area[0])):"right"==o.position?(a.moveTo(h,t.height-t.area[2]),a.lineTo(h,t.area[0])):"center"==o.position&&(a.moveTo(d,t.height-t.area[2]),a.lineTo(d,t.area[0])),a.stroke()),t.yAxis.showTitle){let n=e.titleFontSize*t.pix||i.fontSize,s=e.title;a.beginPath(),a.setFontSize(n),a.setFillStyle(e.titleFontColor||t.fontColor),"left"==o.position?a.fillText(s,c-En(s,n,a)/2+(e.titleOffsetX||0),t.area[0]-(10-(e.titleOffsetY||0))*t.pix):"right"==o.position?a.fillText(s,h-En(s,n,a)/2+(e.titleOffsetX||0),t.area[0]-(10-(e.titleOffsetY||0))*t.pix):"center"==o.position&&a.fillText(s,d-En(s,n,a)/2+(e.titleOffsetX||0),t.area[0]-(10-(e.titleOffsetY||0))*t.pix),a.closePath(),a.stroke()}"left"==o.position?c-=o.width+t.yAxis.padding*t.pix:h+=o.width+t.yAxis.padding*t.pix}}}function $s(e,t,i,a,n){if(!1===t.legend.show)return;let s=n.legendData,o=s.points,r=s.area,l=t.legend.padding*t.pix,c=t.legend.fontSize*t.pix,h=15*t.pix,d=5*t.pix,u=t.legend.itemGap*t.pix,p=Math.max(t.legend.lineHeight*t.pix,c);a.beginPath(),a.setLineWidth(t.legend.borderWidth*t.pix),a.setStrokeStyle(t.legend.borderColor),a.setFillStyle(t.legend.backgroundColor),a.moveTo(r.start.x,r.start.y),a.rect(r.start.x,r.start.y,r.width,r.height),a.closePath(),a.fill(),a.stroke(),o.forEach((function(e,n){let o=0,f=0;o=s.widthArr[n],f=s.heightArr[n];let g=0,m=0;if("top"==t.legend.position||"bottom"==t.legend.position){switch(t.legend.float){case"left":g=r.start.x+l;break;case"right":g=r.start.x+r.width-o;break;default:g=r.start.x+(r.width-o)/2}m=r.start.y+l+n*p}else o=0==n?0:s.widthArr[n-1],g=r.start.x+l+o,m=r.start.y+l+(r.height-f)/2;a.setFontSize(i.fontSize);for(let i=0;i<e.length;i++){let n=e[i];switch(n.area=[0,0,0,0],n.area[0]=g,n.area[1]=m,n.area[3]=m+p,a.beginPath(),a.setLineWidth(1*t.pix),a.setStrokeStyle(n.show?n.color:t.legend.hiddenColor),a.setFillStyle(n.show?n.color:t.legend.hiddenColor),n.legendShape){case"line":a.moveTo(g,m+.5*p-2*t.pix),a.fillRect(g,m+.5*p-2*t.pix,15*t.pix,4*t.pix);break;case"triangle":a.moveTo(g+7.5*t.pix,m+.5*p-5*t.pix),a.lineTo(g+2.5*t.pix,m+.5*p+5*t.pix),a.lineTo(g+12.5*t.pix,m+.5*p+5*t.pix),a.lineTo(g+7.5*t.pix,m+.5*p-5*t.pix);break;case"diamond":a.moveTo(g+7.5*t.pix,m+.5*p-5*t.pix),a.lineTo(g+2.5*t.pix,m+.5*p),a.lineTo(g+7.5*t.pix,m+.5*p+5*t.pix),a.lineTo(g+12.5*t.pix,m+.5*p),a.lineTo(g+7.5*t.pix,m+.5*p-5*t.pix);break;case"circle":a.moveTo(g+7.5*t.pix,m+.5*p),a.arc(g+7.5*t.pix,m+.5*p,5*t.pix,0,2*Math.PI);break;case"rect":default:a.moveTo(g,m+.5*p-5*t.pix),a.fillRect(g,m+.5*p-5*t.pix,15*t.pix,10*t.pix);break;case"square":a.moveTo(g+5*t.pix,m+.5*p-5*t.pix),a.fillRect(g+5*t.pix,m+.5*p-5*t.pix,10*t.pix,10*t.pix);case"none":}a.closePath(),a.fill(),a.stroke(),g+=h+d;let s=.5*p+.5*c-2;const o=n.legendText?n.legendText:n.name;a.beginPath(),a.setFontSize(c),a.setFillStyle(n.show?t.legend.fontColor:t.legend.hiddenColor),a.fillText(o,g,m+s),a.closePath(),a.stroke(),"top"==t.legend.position||"bottom"==t.legend.position?(g+=En(o,c,a)+u,n.area[2]=g):(n.area[2]=g+En(o,c,a)+u,g-=h+d,m+=p)}}))}function Vs(e,t,i,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=kn({},{activeOpacity:.5,activeRadius:10,offsetAngle:0,labelWidth:15,ringWidth:30,customRadius:0,border:!1,borderWidth:2,borderColor:"#FFFFFF",centerColor:"#FFFFFF",linearType:"none",customColor:[]},"pie"==t.type?t.extra.pie:t.extra.ring),o={x:t.area[3]+(t.width-t.area[1]-t.area[3])/2,y:t.area[0]+(t.height-t.area[0]-t.area[2])/2};0==i.pieChartLinePadding&&(i.pieChartLinePadding=s.activeRadius*t.pix);var r=Math.min((t.width-t.area[1]-t.area[3])/2-i.pieChartLinePadding-i.pieChartTextPadding-i._pieTextMaxLength_,(t.height-t.area[0]-t.area[2])/2-i.pieChartLinePadding-i.pieChartTextPadding);r=r<10?10:r,s.customRadius>0&&(r=s.customRadius*t.pix),e=Zn(e,r,n);var l=s.activeRadius*t.pix;if(s.customColor=On(s.linearType,s.customColor,e,i),(e=e.map((function(e){return e._start_+=s.offsetAngle*Math.PI/180,e}))).forEach((function(e,i){t.tooltip&&t.tooltip.index==i&&(a.beginPath(),a.setFillStyle(An(e.color,s.activeOpacity||.5)),a.moveTo(o.x,o.y),a.arc(o.x,o.y,e._radius_+l,e._start_,e._start_+2*e._proportion_*Math.PI),a.closePath(),a.fill()),a.beginPath(),a.setLineWidth(s.borderWidth*t.pix),a.lineJoin="round",a.setStrokeStyle(s.borderColor);var n,r=e.color;"custom"==s.linearType&&((n=a.createCircularGradient?a.createCircularGradient(o.x,o.y,e._radius_):a.createRadialGradient(o.x,o.y,0,o.x,o.y,e._radius_)).addColorStop(0,An(s.customColor[e.linearIndex],1)),n.addColorStop(1,An(e.color,1)),r=n);a.setFillStyle(r),a.moveTo(o.x,o.y),a.arc(o.x,o.y,e._radius_,e._start_,e._start_+2*e._proportion_*Math.PI),a.closePath(),a.fill(),1==s.border&&a.stroke()})),"ring"===t.type){var c=.6*r;"number"==typeof s.ringWidth&&s.ringWidth>0&&(c=Math.max(0,r-s.ringWidth*t.pix)),a.beginPath(),a.setFillStyle(s.centerColor),a.moveTo(o.x,o.y),a.arc(o.x,o.y,c,0,2*Math.PI),a.closePath(),a.fill()}return!1!==t.dataLabel&&1===n&&Fs(e,t,i,a,0,o),1===n&&"ring"===t.type&&ks(t,i,a,o),{center:o,radius:r,series:e}}function js(e,t){var i=Array(2),a=20037508.34*e/180,n=Math.log(Math.tan((90+t)*Math.PI/360))/(Math.PI/180);return n=20037508.34*n/180,i[0]=a,i[1]=n,i}function Hs(e,t,i,a,n,s){return{x:(t-i.xMin)*a+n,y:(i.yMax-e)*a+s}}function qs(e,t,i){if(t[1]==i[1])return!1;if(t[1]>e[1]&&i[1]>e[1])return!1;if(t[1]<e[1]&&i[1]<e[1])return!1;if(t[1]==e[1]&&i[1]>e[1])return!1;if(i[1]==e[1]&&t[1]>e[1])return!1;if(t[0]<e[0]&&i[1]<e[1])return!1;return!(i[0]-(i[0]-t[0])*(i[1]-e[1])/(i[1]-t[1])<e[0])}function Gs(e,t,i){let a=0;for(let n=0;n<t.length;n++){let s=t[n][0];1==t.length&&(s=t[n][0]);for(let t=0;t<s.length-1;t++){let n=s[t],o=s[t+1];i&&(n=js(s[t][0],s[t][1]),o=js(s[t+1][0],s[t+1][1])),qs(e,n,o)&&(a+=1)}}return a%2==1}function Ks(e,t,i){i=0==i?1:i;for(var a=[],n=0;n<i;n++)a[n]=Math.random();return Math.floor(a.reduce((function(e,t){return e+t}))/i*(t-e))+e}function Js(e,t,i,a){var n=!1;for(let s=0;s<t.length;s++)if(t[s].area){if(!(e[3]<t[s].area[1]||e[0]>t[s].area[2]||e[1]>t[s].area[3]||e[2]<t[s].area[0])){n=!0;break}if(e[0]<0||e[1]<0||e[2]>i||e[3]>a){n=!0;break}n=!1}return n}function Ys(e,t,i){let a=e.series;switch(t){case"normal":for(let n=0;n<a.length;n++){let t,s,o,r=a[n].name,l=a[n].textSize*e.pix,c=En(r,l,i),h=0;for(;;){if(h++,t=Ks(-e.width/2,e.width/2,5)-c/2,s=Ks(-e.height/2,e.height/2,5)+l/2,o=[t-5+e.width/2,s-5-l+e.height/2,t+c+5+e.width/2,s+5+e.height/2],!Js(o,a,e.width,e.height))break;if(1e3==h){o=[-100,-100,-100,-100];break}}a[n].area=o}break;case"vertical":let t=function(){return Math.random()>.7};for(let n=0;n<a.length;n++){let s,o,r,l,c=a[n].name,h=a[n].textSize*e.pix,d=En(c,h,i),u=t(),p=0;for(;;){let t;if(p++,u?(s=Ks(-e.width/2,e.width/2,5)-d/2,o=Ks(-e.height/2,e.height/2,5)+h/2,r=[o-5-d+e.width/2,-s-5+e.height/2,o+5+e.width/2,-s+h+5+e.height/2],l=[e.width-(e.width/2-e.height/2)-(-s+h+5+e.height/2)-5,e.height/2-e.width/2+(o-5-d+e.width/2)-5,e.width-(e.width/2-e.height/2)-(-s+h+5+e.height/2)+h,e.height/2-e.width/2+(o-5-d+e.width/2)+d+5],t=Js(l,a,e.height,e.width)):(s=Ks(-e.width/2,e.width/2,5)-d/2,o=Ks(-e.height/2,e.height/2,5)+h/2,r=[s-5+e.width/2,o-5-h+e.height/2,s+d+5+e.width/2,o+5+e.height/2],t=Js(r,a,e.width,e.height)),!t)break;if(1e3==p){r=[-1e3,-1e3,-1e3,-1e3];break}}u?(a[n].area=l,a[n].areav=r):a[n].area=r,a[n].rotate=u}}return a}function Xs(e,t,i,a,n,s,o){for(let r=0;r<e.length;r++){let l,c,h,d,u=e[r];if(!1===u.labelShow)continue;let p=u.formatter?u.formatter(u,r,e,t):Dn.toFixed(100*u._proportion_)+"%";p=u.labelText?u.labelText:p,"right"==n&&(l=r==e.length-1?(u.funnelArea[2]+o.x)/2:(u.funnelArea[2]+e[r+1].funnelArea[2])/2,c=l+2*s,h=u.funnelArea[1]+a/2,d=u.textSize*t.pix||t.fontSize*t.pix,i.setLineWidth(1*t.pix),i.setStrokeStyle(u.color),i.setFillStyle(u.color),i.beginPath(),i.moveTo(l,h),i.lineTo(c,h),i.stroke(),i.closePath(),i.beginPath(),i.moveTo(c,h),i.arc(c,h,2*t.pix,0,2*Math.PI),i.closePath(),i.fill(),i.beginPath(),i.setFontSize(d),i.setFillStyle(u.textColor||t.fontColor),i.fillText(p,c+5,h+d/2-2),i.closePath(),i.stroke(),i.closePath()),"left"==n&&(l=r==e.length-1?(u.funnelArea[0]+o.x)/2:(u.funnelArea[0]+e[r+1].funnelArea[0])/2,c=l-2*s,h=u.funnelArea[1]+a/2,d=u.textSize*t.pix||t.fontSize*t.pix,i.setLineWidth(1*t.pix),i.setStrokeStyle(u.color),i.setFillStyle(u.color),i.beginPath(),i.moveTo(l,h),i.lineTo(c,h),i.stroke(),i.closePath(),i.beginPath(),i.moveTo(c,h),i.arc(c,h,2,0,2*Math.PI),i.closePath(),i.fill(),i.beginPath(),i.setFontSize(d),i.setFillStyle(u.textColor||t.fontColor),i.fillText(p,c-5-En(p,d,i),h+d/2-2),i.closePath(),i.stroke(),i.closePath())}}function Qs(e,t,i,a,n,s,o){for(let r=0;r<e.length;r++){let n,s,l=e[r];l.centerText&&(n=l.funnelArea[1]+a/2,s=l.centerTextSize*t.pix||t.fontSize*t.pix,i.beginPath(),i.setFontSize(s),i.setFillStyle(l.centerTextColor||"#FFFFFF"),i.fillText(l.centerText,o.x-En(l.centerText,s,i)/2,n+s/2-2),i.closePath(),i.stroke(),i.closePath())}}function Zs(e,t){t.save(),t.translate(0,.5),t.restore(),t.draw()}var eo={easeIn:function(e){return Math.pow(e,3)},easeOut:function(e){return Math.pow(e-1,3)+1},easeInOut:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)},linear:function(e){return e}};function to(e){this.isStop=!1,e.duration=void 0===e.duration?1e3:e.duration,e.timing=e.timing||"easeInOut";var t="undefined"!=typeof setTimeout?function(e,t){setTimeout((function(){e(+new Date)}),t)}:"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:function(e){e(null)},i=null,a=function(n){if(null===n||!0===this.isStop)return e.onProcess&&e.onProcess(1),void(e.onAnimationFinish&&e.onAnimationFinish());if(null===i&&(i=n),n-i<e.duration){var s=(n-i)/e.duration;s=(0,eo[e.timing])(s),e.onProcess&&e.onProcess(s),t(a,17)}else e.onProcess&&e.onProcess(1),e.onAnimationFinish&&e.onAnimationFinish()};a=a.bind(this),t(a,17)}function io(e,t,i,a){var n=this,s=t.series;"pie"!==e&&"ring"!==e&&"mount"!==e&&"rose"!==e&&"funnel"!==e||(s=function(e,t,i){let a=[];if(e.length>0&&e[0].data.constructor.toString().indexOf("Array")>-1){t._pieSeries_=e;let i=e[0].data;for(var n=0;n<i.length;n++)i[n].formatter=e[0].formatter,i[n].data=i[n].value,a.push(i[n]);t.series=a}else a=e;return a}(s,t));var o=t.categories;if("mount"===e){o=[];for(let e=0;e<s.length;e++)!1!==s[e].show&&o.push(s[e].name);t.categories=o}s=Rn(s,t,i);var r=t.animation?t.duration:0;n.animationInstance&&n.animationInstance.stop();var l=null;if("candle"==e){let e=kn({},t.extra.candle.average);e.show?(l=Rn(l=function(e,t,i,a){let n=[];for(let s=0;s<e.length;s++){let o={data:[],name:t[s],color:i[s]};for(let t=0,i=a.length;t<i;t++){if(t<e[s]){o.data.push(null);continue}let i=0;for(let n=0;n<e[s];n++)i+=a[t-n][1];o.data.push(+(i/e[s]).toFixed(3))}n.push(o)}return n}(e.day,e.name,e.color,s[0].data),t,i),t.seriesMA=l):l=t.seriesMA?t.seriesMA=Rn(t.seriesMA,t,i):s}else l=s;t._series_=s=qn(s),t.area=new Array(4);for(let f=0;f<4;f++)t.area[f]=t.padding[f]*t.pix;var c=function(e,t,i,a,n){let s={area:{start:{x:0,y:0},end:{x:0,y:0},width:0,height:0,wholeWidth:0,wholeHeight:0},points:[],widthArr:[],heightArr:[]};if(!1===t.legend.show)return a.legendData=s,s;let o=t.legend.padding*t.pix,r=t.legend.margin*t.pix,l=t.legend.fontSize?t.legend.fontSize*t.pix:i.fontSize,c=15*t.pix,h=5*t.pix,d=Math.max(t.legend.lineHeight*t.pix,l);if("top"==t.legend.position||"bottom"==t.legend.position){let i=[],a=0,u=[],p=[];for(let s=0;s<e.length;s++){let o=e[s],r=c+h+En((o.legendText?o.legendText:o.name)||"undefined",l,n)+t.legend.itemGap*t.pix;a+r>t.width-t.area[1]-t.area[3]?(i.push(p),u.push(a-t.legend.itemGap*t.pix),a=r,p=[o]):(a+=r,p.push(o))}if(p.length){i.push(p),u.push(a-t.legend.itemGap*t.pix),s.widthArr=u;let e=Math.max.apply(null,u);switch(t.legend.float){case"left":s.area.start.x=t.area[3],s.area.end.x=t.area[3]+e+2*o;break;case"right":s.area.start.x=t.width-t.area[1]-e-2*o,s.area.end.x=t.width-t.area[1];break;default:s.area.start.x=(t.width-e)/2-o,s.area.end.x=(t.width+e)/2+o}s.area.width=e+2*o,s.area.wholeWidth=e+2*o,s.area.height=i.length*d+2*o,s.area.wholeHeight=i.length*d+2*o+2*r,s.points=i}}else{let i=e.length,a=t.height-t.area[0]-t.area[2]-2*r-2*o,u=Math.min(Math.floor(a/d),i);switch(s.area.height=u*d+2*o,s.area.wholeHeight=u*d+2*o,t.legend.float){case"top":s.area.start.y=t.area[0]+r,s.area.end.y=t.area[0]+r+s.area.height;break;case"bottom":s.area.start.y=t.height-t.area[2]-r-s.area.height,s.area.end.y=t.height-t.area[2]-r;break;default:s.area.start.y=(t.height-s.area.height)/2,s.area.end.y=(t.height+s.area.height)/2}let p=i%u==0?i/u:Math.floor(i/u+1),f=[];for(let t=0;t<p;t++){let i=e.slice(t*u,t*u+u);f.push(i)}if(s.points=f,f.length){for(let i=0;i<f.length;i++){let e=f[i],a=0;for(let i=0;i<e.length;i++){let s=c+h+En(e[i].name||"undefined",l,n)+t.legend.itemGap*t.pix;s>a&&(a=s)}s.widthArr.push(a),s.heightArr.push(e.length*d+2*o)}let e=0;for(let t=0;t<s.widthArr.length;t++)e+=s.widthArr[t];s.area.width=e-t.legend.itemGap*t.pix+2*o,s.area.wholeWidth=s.area.width+o}}switch(t.legend.position){case"top":s.area.start.y=t.area[0]+r,s.area.end.y=t.area[0]+r+s.area.height;break;case"bottom":s.area.start.y=t.height-t.area[2]-s.area.height-r,s.area.end.y=t.height-t.area[2]-r;break;case"left":s.area.start.x=t.area[3],s.area.end.x=t.area[3]+s.area.width;break;case"right":s.area.start.x=t.width-t.area[1]-s.area.width,s.area.end.x=t.width-t.area[1]}return a.legendData=s,s}(l,t,i,t.chartData,a),h=c.area.wholeHeight,d=c.area.wholeWidth;switch(t.legend.position){case"top":t.area[0]+=h;break;case"bottom":t.area[2]+=h;break;case"left":t.area[3]+=d;break;case"right":t.area[1]+=d}let u={},p=0;if("line"===t.type||"column"===t.type||"mount"===t.type||"area"===t.type||"mix"===t.type||"candle"===t.type||"scatter"===t.type||"bubble"===t.type||"bar"===t.type){if(u=Ss(s,t,i,a),p=u.yAxisWidth,t.yAxis.showTitle){let e=0;for(let a=0;a<t.yAxis.data.length;a++)e=Math.max(e,t.yAxis.data[a].titleFontSize?t.yAxis.data[a].titleFontSize*t.pix:i.fontSize);t.area[0]+=e}let e=0,n=0;for(let i=0;i<p.length;i++)"left"==p[i].position?(t.area[3]+=n>0?p[i].width+t.yAxis.padding*t.pix:p[i].width,n+=1):"right"==p[i].position&&(t.area[1]+=e>0?p[i].width+t.yAxis.padding*t.pix:p[i].width,e+=1)}else i.yAxisWidth=p;if(t.chartData.yAxisData=u,t.categories&&t.categories.length&&"radar"!==t.type&&"gauge"!==t.type&&"bar"!==t.type){t.chartData.xAxisData=ds(t.categories,t);let e=Yn(t.categories,t,0,t.chartData.xAxisData.eachSpacing,a),n=e.xAxisHeight,s=e.angle;i.xAxisHeight=n,i._xAxisTextAngle_=s,t.area[2]+=n,t.chartData.categoriesData=e}else if("line"===t.type||"area"===t.type||"scatter"===t.type||"bubble"===t.type||"bar"===t.type){t.chartData.xAxisData=Xn(s,t,i,a);let e=Yn(o=t.chartData.xAxisData.rangesFormat,t,0,t.chartData.xAxisData.eachSpacing,a),n=e.xAxisHeight,r=e.angle;i.xAxisHeight=n,i._xAxisTextAngle_=r,t.area[2]+=n,t.chartData.categoriesData=e}else t.chartData.xAxisData={xAxisPoints:[]};if(t.enableScroll&&"right"==t.xAxis.scrollAlign&&void 0===t._scrollDistance_){let e=0,i=t.chartData.xAxisData.xAxisPoints,a=t.chartData.xAxisData.startX;e=t.chartData.xAxisData.endX-a-t.chartData.xAxisData.eachSpacing*(i.length-1),n.scrollOption.currentOffset=e,n.scrollOption.startTouchX=e,n.scrollOption.distance=0,n.scrollOption.lastMoveTime=0,t._scrollDistance_=e}switch("pie"!==e&&"ring"!==e&&"rose"!==e||(i._pieTextMaxLength_=!1===t.dataLabel?0:function(e,t,i,a){e=Zn(e);let n=0;for(let s=0;s<e.length;s++){let o=e[s],r=o.formatter?o.formatter(+o._proportion_.toFixed(2)):Dn.toFixed(100*o._proportion_)+"%";n=Math.max(n,En(r,o.textSize*a.pix||t.fontSize,i))}return n}(l,i,a,t)),e){case"word":this.animationInstance=new to({timing:t.timing,duration:r,onProcess:function(e){a.clearRect(0,0,t.width,t.height),t.rotate&&ws(a,t),function(e,t,i,a){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=kn({},{type:"normal",autoColors:!0},t.extra.word);t.chartData.wordCloudData||(t.chartData.wordCloudData=Ys(t,s.type,a)),a.beginPath(),a.setFillStyle(t.background),a.rect(0,0,t.width,t.height),a.fill(),a.save();let o=t.chartData.wordCloudData;a.translate(t.width/2,t.height/2);for(let r=0;r<o.length;r++){a.save(),o[r].rotate&&a.rotate(90*Math.PI/180);let e=o[r].name,i=o[r].textSize*t.pix,s=En(e,i,a);a.beginPath(),a.setStrokeStyle(o[r].color),a.setFillStyle(o[r].color),a.setFontSize(i),o[r].rotate?o[r].areav[0]>0&&(t.tooltip&&t.tooltip.index==r?a.strokeText(e,(o[r].areav[0]+5-t.width/2)*n-s*(1-n)/2,(o[r].areav[1]+5+i-t.height/2)*n):a.fillText(e,(o[r].areav[0]+5-t.width/2)*n-s*(1-n)/2,(o[r].areav[1]+5+i-t.height/2)*n)):o[r].area[0]>0&&(t.tooltip&&t.tooltip.index==r?a.strokeText(e,(o[r].area[0]+5-t.width/2)*n-s*(1-n)/2,(o[r].area[1]+5+i-t.height/2)*n):a.fillText(e,(o[r].area[0]+5-t.width/2)*n-s*(1-n)/2,(o[r].area[1]+5+i-t.height/2)*n)),a.stroke(),a.restore()}a.restore()}(s,t,i,a,e),Zs(0,a)},onAnimationFinish:function(){n.uevent.trigger("renderComplete")}});break;case"map":a.clearRect(0,0,t.width,t.height),function(e,t,i,a){var n,s,o=kn({},{border:!0,mercator:!1,borderWidth:1,active:!0,borderColor:"#666666",fillOpacity:.6,activeBorderColor:"#f04864",activeFillColor:"#facc14",activeFillOpacity:1},t.extra.map),r=e,l=function(e){for(var t,i={xMin:180,xMax:0,yMin:90,yMax:0},a=0;a<e.length;a++)for(var n=e[a].geometry.coordinates,s=0;s<n.length;s++){1==(t=n[s]).length&&(t=t[0]);for(var o=0;o<t.length;o++){var r={x:t[o][0],y:t[o][1]};i.xMin=i.xMin<r.x?i.xMin:r.x,i.xMax=i.xMax>r.x?i.xMax:r.x,i.yMin=i.yMin<r.y?i.yMin:r.y,i.yMax=i.yMax>r.y?i.yMax:r.y}}return i}(r);if(o.mercator){var c=js(l.xMax,l.yMax),h=js(l.xMin,l.yMin);l.xMax=c[0],l.yMax=c[1],l.xMin=h[0],l.yMin=h[1]}for(var d=t.width/Math.abs(l.xMax-l.xMin),u=t.height/Math.abs(l.yMax-l.yMin),p=d<u?d:u,f=t.width/2-Math.abs(l.xMax-l.xMin)/2*p,g=t.height/2-Math.abs(l.yMax-l.yMin)/2*p,m=0;m<r.length;m++){a.beginPath(),a.setLineWidth(o.borderWidth*t.pix),a.setStrokeStyle(o.borderColor),a.setFillStyle(An(e[m].color,e[m].fillOpacity||o.fillOpacity)),1==o.active&&t.tooltip&&t.tooltip.index==m&&(a.setStrokeStyle(o.activeBorderColor),a.setFillStyle(An(o.activeFillColor,o.activeFillOpacity)));for(var x=r[m].geometry.coordinates,y=0;y<x.length;y++){1==(n=x[y]).length&&(n=n[0]);for(var b=0;b<n.length;b++){var _=Array(2);s=Hs((_=o.mercator?js(n[b][0],n[b][1]):n[b])[1],_[0],l,p,f,g),0===b?(a.beginPath(),a.moveTo(s.x,s.y)):a.lineTo(s.x,s.y)}a.fill(),1==o.border&&a.stroke()}}if(1==t.dataLabel)for(m=0;m<r.length;m++){var S=r[m].properties.centroid;if(S){o.mercator&&(S=js(r[m].properties.centroid[0],r[m].properties.centroid[1])),s=Hs(S[1],S[0],l,p,f,g);let e=r[m].textSize*t.pix||i.fontSize,n=r[m].textColor||t.fontColor;o.active&&o.activeTextColor&&t.tooltip&&t.tooltip.index==m&&(n=o.activeTextColor);let c=r[m].properties.name;a.beginPath(),a.setFontSize(e),a.setFillStyle(n),a.fillText(c,s.x-En(c,e,a)/2,s.y+e/2),a.closePath(),a.stroke()}}t.chartData.mapData={bounds:l,scale:p,xoffset:f,yoffset:g,mercator:o.mercator},Bs(t,i,a,1),a.draw()}(s,t,i,a),setTimeout((()=>{this.uevent.trigger("renderComplete")}),50);break;case"funnel":this.animationInstance=new to({timing:t.timing,duration:r,onProcess:function(e){a.clearRect(0,0,t.width,t.height),t.rotate&&ws(a,t),t.chartData.funnelData=function(e,t,i,a){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=kn({},{type:"funnel",activeWidth:10,activeOpacity:.3,border:!1,borderWidth:2,borderColor:"#FFFFFF",fillOpacity:1,minSize:0,labelAlign:"right",linearType:"none",customColor:[]},t.extra.funnel),o=(t.height-t.area[0]-t.area[2])/e.length,r={x:t.area[3]+(t.width-t.area[1]-t.area[3])/2,y:t.height-t.area[2]},l=s.activeWidth*t.pix,c=Math.min((t.width-t.area[1]-t.area[3])/2-l,(t.height-t.area[0]-t.area[2])/2-l),h=es(e,c,s,o,n);if(a.save(),a.translate(r.x,r.y),s.customColor=On(s.linearType,s.customColor,e,i),"pyramid"==s.type)for(let p=0;p<h.length;p++){if(p==h.length-1){t.tooltip&&t.tooltip.index==p&&(a.beginPath(),a.setFillStyle(An(h[p].color,s.activeOpacity)),a.moveTo(-l,-o),a.lineTo(-h[p].radius-l,0),a.lineTo(h[p].radius+l,0),a.lineTo(l,-o),a.lineTo(-l,-o),a.closePath(),a.fill()),h[p].funnelArea=[r.x-h[p].radius,r.y-o*(p+1),r.x+h[p].radius,r.y-o*p],a.beginPath(),a.setLineWidth(s.borderWidth*t.pix),a.setStrokeStyle(s.borderColor);var d=An(h[p].color,s.fillOpacity);"custom"==s.linearType&&((u=a.createLinearGradient(h[p].radius,-o,-h[p].radius,-o)).addColorStop(0,An(h[p].color,s.fillOpacity)),u.addColorStop(.5,An(s.customColor[h[p].linearIndex],s.fillOpacity)),u.addColorStop(1,An(h[p].color,s.fillOpacity)),d=u),a.setFillStyle(d),a.moveTo(0,-o),a.lineTo(-h[p].radius,0),a.lineTo(h[p].radius,0),a.lineTo(0,-o),a.closePath(),a.fill(),1==s.border&&a.stroke()}else t.tooltip&&t.tooltip.index==p&&(a.beginPath(),a.setFillStyle(An(h[p].color,s.activeOpacity)),a.moveTo(0,0),a.lineTo(-h[p].radius-l,0),a.lineTo(-h[p+1].radius-l,-o),a.lineTo(h[p+1].radius+l,-o),a.lineTo(h[p].radius+l,0),a.lineTo(0,0),a.closePath(),a.fill()),h[p].funnelArea=[r.x-h[p].radius,r.y-o*(p+1),r.x+h[p].radius,r.y-o*p],a.beginPath(),a.setLineWidth(s.borderWidth*t.pix),a.setStrokeStyle(s.borderColor),d=An(h[p].color,s.fillOpacity),"custom"==s.linearType&&((u=a.createLinearGradient(h[p].radius,-o,-h[p].radius,-o)).addColorStop(0,An(h[p].color,s.fillOpacity)),u.addColorStop(.5,An(s.customColor[h[p].linearIndex],s.fillOpacity)),u.addColorStop(1,An(h[p].color,s.fillOpacity)),d=u),a.setFillStyle(d),a.moveTo(0,0),a.lineTo(-h[p].radius,0),a.lineTo(-h[p+1].radius,-o),a.lineTo(h[p+1].radius,-o),a.lineTo(h[p].radius,0),a.lineTo(0,0),a.closePath(),a.fill(),1==s.border&&a.stroke();a.translate(0,-o)}else{a.translate(0,-(h.length-1)*o);for(let e=0;e<h.length;e++){var u;if(e==h.length-1)t.tooltip&&t.tooltip.index==e&&(a.beginPath(),a.setFillStyle(An(h[e].color,s.activeOpacity)),a.moveTo(-l-s.minSize/2,0),a.lineTo(-h[e].radius-l,-o),a.lineTo(h[e].radius+l,-o),a.lineTo(l+s.minSize/2,0),a.lineTo(-l-s.minSize/2,0),a.closePath(),a.fill()),h[e].funnelArea=[r.x-h[e].radius,r.y-o,r.x+h[e].radius,r.y],a.beginPath(),a.setLineWidth(s.borderWidth*t.pix),a.setStrokeStyle(s.borderColor),d=An(h[e].color,s.fillOpacity),"custom"==s.linearType&&((u=a.createLinearGradient(h[e].radius,-o,-h[e].radius,-o)).addColorStop(0,An(h[e].color,s.fillOpacity)),u.addColorStop(.5,An(s.customColor[h[e].linearIndex],s.fillOpacity)),u.addColorStop(1,An(h[e].color,s.fillOpacity)),d=u),a.setFillStyle(d),a.moveTo(0,0),a.lineTo(-s.minSize/2,0),a.lineTo(-h[e].radius,-o),a.lineTo(h[e].radius,-o),a.lineTo(s.minSize/2,0),a.lineTo(0,0),a.closePath(),a.fill(),1==s.border&&a.stroke();else t.tooltip&&t.tooltip.index==e&&(a.beginPath(),a.setFillStyle(An(h[e].color,s.activeOpacity)),a.moveTo(0,0),a.lineTo(-h[e+1].radius-l,0),a.lineTo(-h[e].radius-l,-o),a.lineTo(h[e].radius+l,-o),a.lineTo(h[e+1].radius+l,0),a.lineTo(0,0),a.closePath(),a.fill()),h[e].funnelArea=[r.x-h[e].radius,r.y-o*(h.length-e),r.x+h[e].radius,r.y-o*(h.length-e-1)],a.beginPath(),a.setLineWidth(s.borderWidth*t.pix),a.setStrokeStyle(s.borderColor),d=An(h[e].color,s.fillOpacity),"custom"==s.linearType&&((u=a.createLinearGradient(h[e].radius,-o,-h[e].radius,-o)).addColorStop(0,An(h[e].color,s.fillOpacity)),u.addColorStop(.5,An(s.customColor[h[e].linearIndex],s.fillOpacity)),u.addColorStop(1,An(h[e].color,s.fillOpacity)),d=u),a.setFillStyle(d),a.moveTo(0,0),a.lineTo(-h[e+1].radius,0),a.lineTo(-h[e].radius,-o),a.lineTo(h[e].radius,-o),a.lineTo(h[e+1].radius,0),a.lineTo(0,0),a.closePath(),a.fill(),1==s.border&&a.stroke();a.translate(0,o)}}return a.restore(),!1!==t.dataLabel&&1===n&&Xs(h,t,a,o,s.labelAlign,l,r),1===n&&Qs(h,t,a,o,s.labelAlign,0,r),{center:r,radius:c,series:h}}(s,t,i,a,e),$s(t.series,t,i,a,t.chartData),Bs(t,i,a,e),Zs(0,a)},onAnimationFinish:function(){n.uevent.trigger("renderComplete")}});break;case"line":this.animationInstance=new to({timing:t.timing,duration:r,onProcess:function(e){a.clearRect(0,0,t.width,t.height),t.rotate&&ws(a,t),Us(0,t,0,a),zs(o,t,i,a);var n=function(e,t,i,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=kn({},{type:"straight",width:2,activeType:"none",linearType:"none",onShadow:!1,animation:"vertical"},t.extra.line);s.width*=t.pix;let o=t.chartData.xAxisData,r=o.xAxisPoints,l=o.eachSpacing;var c=[];a.save();let h=0,d=t.width+l;return t._scrollDistance_&&0!==t._scrollDistance_&&!0===t.enableScroll&&(a.translate(t._scrollDistance_,0),h=-t._scrollDistance_-2*l+t.area[3],d=h+(t.xAxis.itemCount+4)*l),e.forEach((function(e,o){let u,p,f;a.beginPath(),a.setStrokeStyle(e.color),a.moveTo(-1e4,-1e4),a.lineTo(-10001,-10001),a.stroke(),u=[].concat(t.chartData.yAxisData.ranges[e.index]),p=u.pop(),f=u.shift();var g=fs(e.data,p,f,r,l,t,i,s,n);c.push(g);var m=Jn(g,e);if("dash"==e.lineType){let i=e.dashLength?e.dashLength:8;i*=t.pix,a.setLineDash([i,i])}a.beginPath();var x=e.color;if("none"!==s.linearType&&e.linearColor&&e.linearColor.length>0){for(var y=a.createLinearGradient(t.chartData.xAxisData.startX,t.height/2,t.chartData.xAxisData.endX,t.height/2),b=0;b<e.linearColor.length;b++)y.addColorStop(e.linearColor[b][0],An(e.linearColor[b][1],1));x=y}a.setStrokeStyle(x),1==s.onShadow&&e.setShadow&&e.setShadow.length>0?a.setShadow(e.setShadow[0],e.setShadow[1],e.setShadow[2],e.setShadow[3]):a.setShadow(0,0,0,"rgba(0,0,0,0)"),a.setLineWidth(s.width),m.forEach((function(e,t){if(1===e.length)a.moveTo(e[0].x,e[0].y);else{a.moveTo(e[0].x,e[0].y);let t=0;if("curve"===s.type)for(let n=0;n<e.length;n++){let s=e[n];if(0==t&&s.x>h&&(a.moveTo(s.x,s.y),t=1),n>0&&s.x>h&&s.x<d){var i=In(e,n-1);a.bezierCurveTo(i.ctrA.x,i.ctrA.y,i.ctrB.x,i.ctrB.y,s.x,s.y)}}if("straight"===s.type)for(let i=0;i<e.length;i++){let n=e[i];0==t&&n.x>h&&(a.moveTo(n.x,n.y),t=1),i>0&&n.x>h&&n.x<d&&a.lineTo(n.x,n.y)}if("step"===s.type)for(let i=0;i<e.length;i++){let n=e[i];0==t&&n.x>h&&(a.moveTo(n.x,n.y),t=1),i>0&&n.x>h&&n.x<d&&(a.lineTo(n.x,e[i-1].y),a.lineTo(n.x,n.y))}a.moveTo(e[0].x,e[0].y)}})),a.stroke(),a.setLineDash([]),!1!==t.dataPointShape&&Ts(g,e.color,e.pointShape,a,t),vs(g,e.color,e.pointShape,a,t,s)})),!1!==t.dataLabel&&1===n&&e.forEach((function(e,s){let o,c,h;o=[].concat(t.chartData.yAxisData.ranges[e.index]),c=o.pop(),h=o.shift(),Ds(ps(e.data,c,h,r,l,t,i,n),e,i,a,t)})),a.restore(),{xAxisPoints:r,calPoints:c,eachSpacing:l}}(s,t,i,a,e),r=n.xAxisPoints,l=n.calPoints,c=n.eachSpacing;t.chartData.xAxisPoints=r,t.chartData.calPoints=l,t.chartData.eachSpacing=c,Ws(0,t,i,a),!1!==t.enableMarkLine&&1===e&&Ls(t,0,a),$s(t.series,t,i,a,t.chartData),Bs(t,i,a,e),Zs(0,a)},onAnimationFinish:function(){n.uevent.trigger("renderComplete")}});break;case"scatter":this.animationInstance=new to({timing:t.timing,duration:r,onProcess:function(e){a.clearRect(0,0,t.width,t.height),t.rotate&&ws(a,t),Us(0,t,0,a),zs(o,t,i,a);var n=function(e,t,i,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;kn({},{type:"circle"},t.extra.scatter);let s=t.chartData.xAxisData,o=s.xAxisPoints,r=s.eachSpacing;var l=[];a.save();let c=0;return t.width,t._scrollDistance_&&0!==t._scrollDistance_&&!0===t.enableScroll&&(a.translate(t._scrollDistance_,0),c=-t._scrollDistance_-2*r+t.area[3],t.xAxis.itemCount),e.forEach((function(e,s){let l,c,h;l=[].concat(t.chartData.yAxisData.ranges[e.index]),c=l.pop(),h=l.shift();var d=ps(e.data,c,h,o,r,t,i,n);a.beginPath(),a.setStrokeStyle(e.color),a.setFillStyle(e.color),a.setLineWidth(1*t.pix);var u=e.pointShape;if("diamond"===u)d.forEach((function(e,t){null!==e&&(a.moveTo(e.x,e.y-4.5),a.lineTo(e.x-4.5,e.y),a.lineTo(e.x,e.y+4.5),a.lineTo(e.x+4.5,e.y),a.lineTo(e.x,e.y-4.5))}));else if("circle"===u)d.forEach((function(e,i){null!==e&&(a.moveTo(e.x+2.5*t.pix,e.y),a.arc(e.x,e.y,3*t.pix,0,2*Math.PI,!1))}));else if("square"===u)d.forEach((function(e,t){null!==e&&(a.moveTo(e.x-3.5,e.y-3.5),a.rect(e.x-3.5,e.y-3.5,7,7))}));else if("triangle"===u)d.forEach((function(e,t){null!==e&&(a.moveTo(e.x,e.y-4.5),a.lineTo(e.x-4.5,e.y+4.5),a.lineTo(e.x+4.5,e.y+4.5),a.lineTo(e.x,e.y-4.5))}));else if("triangle"===u)return;a.closePath(),a.fill(),a.stroke()})),!1!==t.dataLabel&&1===n&&e.forEach((function(e,s){let l,c,h;l=[].concat(t.chartData.yAxisData.ranges[e.index]),c=l.pop(),h=l.shift(),Ds(ps(e.data,c,h,o,r,t,i,n),e,i,a,t)})),a.restore(),{xAxisPoints:o,calPoints:l,eachSpacing:r}}(s,t,i,a,e),r=n.xAxisPoints,l=n.calPoints,c=n.eachSpacing;t.chartData.xAxisPoints=r,t.chartData.calPoints=l,t.chartData.eachSpacing=c,Ws(0,t,i,a),!1!==t.enableMarkLine&&1===e&&Ls(t,0,a),$s(t.series,t,i,a,t.chartData),Bs(t,i,a,e),Zs(0,a)},onAnimationFinish:function(){n.uevent.trigger("renderComplete")}});break;case"bubble":this.animationInstance=new to({timing:t.timing,duration:r,onProcess:function(e){a.clearRect(0,0,t.width,t.height),t.rotate&&ws(a,t),Us(0,t,0,a),zs(o,t,i,a);var n=function(e,t,i,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=kn({},{opacity:1,border:2},t.extra.bubble);let o=t.chartData.xAxisData,r=o.xAxisPoints,l=o.eachSpacing;var c=[];a.save();let h=0;return t.width,t._scrollDistance_&&0!==t._scrollDistance_&&!0===t.enableScroll&&(a.translate(t._scrollDistance_,0),h=-t._scrollDistance_-2*l+t.area[3],t.xAxis.itemCount),e.forEach((function(e,o){let c,h,d;c=[].concat(t.chartData.yAxisData.ranges[e.index]),h=c.pop(),d=c.shift();var u=ps(e.data,h,d,r,l,t,i,n);a.beginPath(),a.setStrokeStyle(e.color),a.setLineWidth(s.border*t.pix),a.setFillStyle(An(e.color,s.opacity)),u.forEach((function(e,i){a.moveTo(e.x+e.r,e.y),a.arc(e.x,e.y,e.r*t.pix,0,2*Math.PI,!1)})),a.closePath(),a.fill(),a.stroke(),!1!==t.dataLabel&&1===n&&u.forEach((function(n,s){a.beginPath();var o=e.textSize*t.pix||i.fontSize;a.setFontSize(o),a.setFillStyle(e.textColor||"#FFFFFF"),a.setTextAlign("center"),a.fillText(String(n.t),n.x,n.y+o/2),a.closePath(),a.stroke(),a.setTextAlign("left")}))})),a.restore(),{xAxisPoints:r,calPoints:c,eachSpacing:l}}(s,t,i,a,e),r=n.xAxisPoints,l=n.calPoints,c=n.eachSpacing;t.chartData.xAxisPoints=r,t.chartData.calPoints=l,t.chartData.eachSpacing=c,Ws(0,t,i,a),!1!==t.enableMarkLine&&1===e&&Ls(t,0,a),$s(t.series,t,i,a,t.chartData),Bs(t,i,a,e),Zs(0,a)},onAnimationFinish:function(){n.uevent.trigger("renderComplete")}});break;case"mix":this.animationInstance=new to({timing:t.timing,duration:r,onProcess:function(e){a.clearRect(0,0,t.width,t.height),t.rotate&&ws(a,t),Us(0,t,0,a),zs(o,t,i,a);var n=function(e,t,i,a){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=t.chartData.xAxisData,o=s.xAxisPoints,r=s.eachSpacing,l=kn({},{width:r/2,barBorderCircle:!1,barBorderRadius:[],seriesGap:2,linearType:"none",linearOpacity:1,customColor:[],colorStop:0},t.extra.mix.column),c=kn({},{opacity:.2,gradient:!1},t.extra.mix.area),h=kn({},{width:2},t.extra.mix.line),d=t.height-t.area[2],u=[];var p=0,f=0;e.forEach((function(e,t){"column"==e.type&&(f+=1)})),a.save();let g=-2,m=o.length+2,x=0,y=t.width+r;t._scrollDistance_&&0!==t._scrollDistance_&&!0===t.enableScroll&&(a.translate(t._scrollDistance_,0),g=Math.floor(-t._scrollDistance_/r)-2,m=g+t.xAxis.itemCount+4,x=-t._scrollDistance_-2*r+t.area[3],y=x+(t.xAxis.itemCount+4)*r),l.customColor=On(l.linearType,l.customColor,e,i),e.forEach((function(e,s){let b,_,S;b=[].concat(t.chartData.yAxisData.ranges[e.index]),_=b.pop(),S=b.shift();var w=ps(e.data,_,S,o,r,t,i,n);if(u.push(w),"column"==e.type){w=os(w,r,f,p,0,t);for(let i=0;i<w.length;i++){let n=w[i];if(null!==n&&i>g&&i<m){var T=n.x-n.width/2;t.height,n.y,t.area[2],a.beginPath();var v=n.color||e.color,k=n.color||e.color;if("none"!==l.linearType){var D=a.createLinearGradient(T,n.y,T,t.height-t.area[2]);"opacity"==l.linearType?(D.addColorStop(0,An(v,l.linearOpacity)),D.addColorStop(1,An(v,1))):(D.addColorStop(0,An(l.customColor[e.linearIndex],l.linearOpacity)),D.addColorStop(l.colorStop,An(l.customColor[e.linearIndex],l.linearOpacity)),D.addColorStop(1,An(v,1))),v=D}if(l.barBorderRadius&&4===l.barBorderRadius.length||l.barBorderCircle){const e=T,i=n.y,s=n.width,o=t.height-t.area[2]-n.y;l.barBorderCircle&&(l.barBorderRadius=[s/2,s/2,0,0]);let[r,c,h,d]=l.barBorderRadius,u=Math.min(s/2,o/2);r=r>u?u:r,c=c>u?u:c,h=h>u?u:h,d=d>u?u:d,r=r<0?0:r,c=c<0?0:c,h=h<0?0:h,d=d<0?0:d,a.arc(e+r,i+r,r,-Math.PI,-Math.PI/2),a.arc(e+s-c,i+c,c,-Math.PI/2,0),a.arc(e+s-h,i+o-h,h,0,Math.PI/2),a.arc(e+d,i+o-d,d,Math.PI/2,Math.PI)}else a.moveTo(T,n.y),a.lineTo(T+n.width,n.y),a.lineTo(T+n.width,t.height-t.area[2]),a.lineTo(T,t.height-t.area[2]),a.lineTo(T,n.y),a.setLineWidth(1),a.setStrokeStyle(k);a.setFillStyle(v),a.closePath(),a.fill()}}p+=1}if("area"==e.type){let i=Jn(w,e);for(let n=0;n<i.length;n++){let s=i[n];if(a.beginPath(),a.setStrokeStyle(e.color),a.setStrokeStyle(An(e.color,c.opacity)),c.gradient){let i=a.createLinearGradient(0,t.area[0],0,t.height-t.area[2]);i.addColorStop("0",An(e.color,c.opacity)),i.addColorStop("1.0",An("#FFFFFF",.1)),a.setFillStyle(i)}else a.setFillStyle(An(e.color,c.opacity));if(a.setLineWidth(2*t.pix),s.length>1){var A=s[0];let t=s[s.length-1];a.moveTo(A.x,A.y);let i=0;if("curve"===e.style)for(let e=0;e<s.length;e++){let t=s[e];if(0==i&&t.x>x&&(a.moveTo(t.x,t.y),i=1),e>0&&t.x>x&&t.x<y){var C=In(s,e-1);a.bezierCurveTo(C.ctrA.x,C.ctrA.y,C.ctrB.x,C.ctrB.y,t.x,t.y)}}else for(let e=0;e<s.length;e++){let t=s[e];0==i&&t.x>x&&(a.moveTo(t.x,t.y),i=1),e>0&&t.x>x&&t.x<y&&a.lineTo(t.x,t.y)}a.lineTo(t.x,d),a.lineTo(A.x,d),a.lineTo(A.x,A.y)}else{let e=s[0];a.moveTo(e.x-r/2,e.y)}a.closePath(),a.fill()}}"line"==e.type&&Jn(w,e).forEach((function(i,n){if("dash"==e.lineType){let i=e.dashLength?e.dashLength:8;i*=t.pix,a.setLineDash([i,i])}if(a.beginPath(),a.setStrokeStyle(e.color),a.setLineWidth(h.width*t.pix),1===i.length)a.moveTo(i[0].x,i[0].y);else{a.moveTo(i[0].x,i[0].y);let t=0;if("curve"==e.style)for(let e=0;e<i.length;e++){let n=i[e];if(0==t&&n.x>x&&(a.moveTo(n.x,n.y),t=1),e>0&&n.x>x&&n.x<y){var s=In(i,e-1);a.bezierCurveTo(s.ctrA.x,s.ctrA.y,s.ctrB.x,s.ctrB.y,n.x,n.y)}}else for(let e=0;e<i.length;e++){let n=i[e];0==t&&n.x>x&&(a.moveTo(n.x,n.y),t=1),e>0&&n.x>x&&n.x<y&&a.lineTo(n.x,n.y)}a.moveTo(i[0].x,i[0].y)}a.stroke(),a.setLineDash([])})),"point"==e.type&&(e.addPoint=!0),1==e.addPoint&&"column"!==e.type&&Ts(w,e.color,e.pointShape,a,t)})),!1!==t.dataLabel&&1===n&&(p=0,e.forEach((function(e,s){let l,c,h;l=[].concat(t.chartData.yAxisData.ranges[e.index]),c=l.pop(),h=l.shift();var d=ps(e.data,c,h,o,r,t,i,n);"column"!==e.type?Ds(d,e,i,a,t):(Ds(d=os(d,r,f,p,0,t),e,i,a,t),p+=1)})));return a.restore(),{xAxisPoints:o,calPoints:u,eachSpacing:r}}(s,t,i,a,e),r=n.xAxisPoints,l=n.calPoints,c=n.eachSpacing;t.chartData.xAxisPoints=r,t.chartData.calPoints=l,t.chartData.eachSpacing=c,Ws(0,t,i,a),!1!==t.enableMarkLine&&1===e&&Ls(t,0,a),$s(t.series,t,i,a,t.chartData),Bs(t,i,a,e),Zs(0,a)},onAnimationFinish:function(){n.uevent.trigger("renderComplete")}});break;case"column":this.animationInstance=new to({timing:t.timing,duration:r,onProcess:function(e){a.clearRect(0,0,t.width,t.height),t.rotate&&ws(a,t),Us(0,t,0,a),zs(o,t,i,a);var n=function(e,t,i,a){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=t.chartData.xAxisData,o=s.xAxisPoints,r=s.eachSpacing,l=kn({},{type:"group",width:r/2,meterBorder:4,meterFillColor:"#FFFFFF",barBorderCircle:!1,barBorderRadius:[],seriesGap:2,linearType:"none",linearOpacity:1,customColor:[],colorStop:0,labelPosition:"outside"},t.extra.column),c=[];a.save();let h=-2,d=o.length+2;return t._scrollDistance_&&0!==t._scrollDistance_&&!0===t.enableScroll&&(a.translate(t._scrollDistance_,0),h=Math.floor(-t._scrollDistance_/r)-2,d=h+t.xAxis.itemCount+4),t.tooltip&&t.tooltip.textList&&t.tooltip.textList.length&&1===n&&Os(t.tooltip.offset.x,t,0,a,r),l.customColor=On(l.linearType,l.customColor,e,i),e.forEach((function(s,u){let p,f,g;p=[].concat(t.chartData.yAxisData.ranges[s.index]),f=p.pop(),g=p.shift();let m=(t.height-t.area[0]-t.area[2])*(0-f)/(g-f),x=t.height-Math.round(m)-t.area[2];s.zeroPoints=x;var y=s.data;switch(l.type){case"group":var b=gs(y,f,g,o,r,t,i,x,n),_=ys(y,f,g,o,r,t,i,u,e,n);c.push(_),b=os(b,r,e.length,u,0,t);for(let e=0;e<b.length;e++){let i=b[e];if(null!==i&&e>h&&e<d){var S=i.x-i.width/2,w=t.height-i.y-t.area[2];a.beginPath();var T=i.color||s.color,v=i.color||s.color;if("none"!==l.linearType){var k=a.createLinearGradient(S,i.y,S,x);"opacity"==l.linearType?(k.addColorStop(0,An(T,l.linearOpacity)),k.addColorStop(1,An(T,1))):(k.addColorStop(0,An(l.customColor[s.linearIndex],l.linearOpacity)),k.addColorStop(l.colorStop,An(l.customColor[s.linearIndex],l.linearOpacity)),k.addColorStop(1,An(T,1))),T=k}if(l.barBorderRadius&&4===l.barBorderRadius.length||!0===l.barBorderCircle){const e=S,t=i.y>x?x:i.y,n=i.width,s=Math.abs(x-i.y);l.barBorderCircle&&(l.barBorderRadius=[n/2,n/2,0,0]),i.y>x&&(l.barBorderRadius=[0,0,n/2,n/2]);let[o,r,c,h]=l.barBorderRadius,d=Math.min(n/2,s/2);o=o>d?d:o,r=r>d?d:r,c=c>d?d:c,h=h>d?d:h,o=o<0?0:o,r=r<0?0:r,c=c<0?0:c,h=h<0?0:h,a.arc(e+o,t+o,o,-Math.PI,-Math.PI/2),a.arc(e+n-r,t+r,r,-Math.PI/2,0),a.arc(e+n-c,t+s-c,c,0,Math.PI/2),a.arc(e+h,t+s-h,h,Math.PI/2,Math.PI)}else a.moveTo(S,i.y),a.lineTo(S+i.width,i.y),a.lineTo(S+i.width,x),a.lineTo(S,x),a.lineTo(S,i.y),a.setLineWidth(1),a.setStrokeStyle(v);a.setFillStyle(T),a.closePath(),a.fill()}}break;case"stack":b=ys(y,f,g,o,r,t,i,u,e,n),c.push(b),b=cs(b,r,e.length,0,0,t);for(let e=0;e<b.length;e++){let i=b[e];if(null!==i&&e>h&&e<d){a.beginPath(),T=i.color||s.color,S=i.x-i.width/2+1,w=t.height-i.y-t.area[2];var D=t.height-i.y0-t.area[2];u>0&&(w-=D),a.setFillStyle(T),a.moveTo(S,i.y),a.fillRect(S,i.y,i.width,w),a.closePath(),a.fill()}}break;case"meter":b=ps(y,f,g,o,r,t,i,n),c.push(b),b=ls(b,r,e.length,u,0,t,l.meterBorder);for(let e=0;e<b.length;e++){let i=b[e];if(null!==i&&e>h&&e<d){if(a.beginPath(),0==u&&l.meterBorder>0&&(a.setStrokeStyle(s.color),a.setLineWidth(l.meterBorder*t.pix)),0==u?a.setFillStyle(l.meterFillColor):a.setFillStyle(i.color||s.color),S=i.x-i.width/2,w=t.height-i.y-t.area[2],l.barBorderRadius&&4===l.barBorderRadius.length||!0===l.barBorderCircle){const e=S,t=i.y,n=i.width,s=x-i.y;l.barBorderCircle&&(l.barBorderRadius=[n/2,n/2,0,0]);let[o,r,c,h]=l.barBorderRadius,d=Math.min(n/2,s/2);o=o>d?d:o,r=r>d?d:r,c=c>d?d:c,h=h>d?d:h,o=o<0?0:o,r=r<0?0:r,c=c<0?0:c,h=h<0?0:h,a.arc(e+o,t+o,o,-Math.PI,-Math.PI/2),a.arc(e+n-r,t+r,r,-Math.PI/2,0),a.arc(e+n-c,t+s-c,c,0,Math.PI/2),a.arc(e+h,t+s-h,h,Math.PI/2,Math.PI),a.fill()}else a.moveTo(S,i.y),a.lineTo(S+i.width,i.y),a.lineTo(S+i.width,x),a.lineTo(S,x),a.lineTo(S,i.y),a.fill();0==u&&l.meterBorder>0&&(a.closePath(),a.stroke())}}}})),!1!==t.dataLabel&&1===n&&e.forEach((function(s,c){let h,d,u;h=[].concat(t.chartData.yAxisData.ranges[s.index]),d=h.pop(),u=h.shift();var p=s.data;switch(l.type){case"group":As(os(gs(p,d,u,o,r,t,i,n),r,e.length,c,0,t),s,i,a,t);break;case"stack":As(ys(p,d,u,o,r,t,i,c,e,n),s,i,a,t);break;case"meter":As(ps(p,d,u,o,r,t,i,n),s,i,a,t)}})),a.restore(),{xAxisPoints:o,calPoints:c,eachSpacing:r}}(s,t,i,a,e),r=n.xAxisPoints,l=n.calPoints,c=n.eachSpacing;t.chartData.xAxisPoints=r,t.chartData.calPoints=l,t.chartData.eachSpacing=c,Ws(0,t,i,a),!1!==t.enableMarkLine&&1===e&&Ls(t,0,a),$s(t.series,t,i,a,t.chartData),Bs(t,i,a,e),Zs(0,a)},onAnimationFinish:function(){n.uevent.trigger("renderComplete")}});break;case"mount":this.animationInstance=new to({timing:t.timing,duration:r,onProcess:function(e){a.clearRect(0,0,t.width,t.height),t.rotate&&ws(a,t),Us(0,t,0,a),zs(o,t,i,a);var n=function(e,t,i,a){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=t.chartData.xAxisData,o=s.xAxisPoints,r=s.eachSpacing,l=kn({},{type:"mount",widthRatio:1,borderWidth:1,barBorderCircle:!1,barBorderRadius:[],linearType:"none",linearOpacity:1,customColor:[],colorStop:0},t.extra.mount);l.widthRatio=l.widthRatio<=0?0:l.widthRatio,l.widthRatio=l.widthRatio>=2?2:l.widthRatio,a.save();let c,h,d,u=-2,p=o.length+2;t._scrollDistance_&&0!==t._scrollDistance_&&!0===t.enableScroll&&(a.translate(t._scrollDistance_,0),u=Math.floor(-t._scrollDistance_/r)-2,p=u+t.xAxis.itemCount+4),l.customColor=On(l.linearType,l.customColor,e,i),c=[].concat(t.chartData.yAxisData.ranges[0]),h=c.pop(),d=c.shift();let f=(t.height-t.area[0]-t.area[2])*(0-h)/(d-h),g=t.height-Math.round(f)-t.area[2];var m=ms(e,h,d,o,r,t,l,g,n);switch(l.type){case"bar":for(let i=0;i<m.length;i++){let n=m[i];if(null!==n&&i>u&&i<p){var x=n.x-r*l.widthRatio/2,y=t.height-n.y-t.area[2];a.beginPath();var b=n.color||e[i].color,_=n.color||e[i].color;if("none"!==l.linearType){var S=a.createLinearGradient(x,n.y,x,g);"opacity"==l.linearType?(S.addColorStop(0,An(b,l.linearOpacity)),S.addColorStop(1,An(b,1))):(S.addColorStop(0,An(l.customColor[e[i].linearIndex],l.linearOpacity)),S.addColorStop(l.colorStop,An(l.customColor[e[i].linearIndex],l.linearOpacity)),S.addColorStop(1,An(b,1))),b=S}if(l.barBorderRadius&&4===l.barBorderRadius.length||!0===l.barBorderCircle){const e=x,t=n.y>g?g:n.y,i=n.width,s=Math.abs(g-n.y);l.barBorderCircle&&(l.barBorderRadius=[i/2,i/2,0,0]),n.y>g&&(l.barBorderRadius=[0,0,i/2,i/2]);let[o,r,c,h]=l.barBorderRadius,d=Math.min(i/2,s/2);o=o>d?d:o,r=r>d?d:r,c=c>d?d:c,h=h>d?d:h,o=o<0?0:o,r=r<0?0:r,c=c<0?0:c,h=h<0?0:h,a.arc(e+o,t+o,o,-Math.PI,-Math.PI/2),a.arc(e+i-r,t+r,r,-Math.PI/2,0),a.arc(e+i-c,t+s-c,c,0,Math.PI/2),a.arc(e+h,t+s-h,h,Math.PI/2,Math.PI)}else a.moveTo(x,n.y),a.lineTo(x+n.width,n.y),a.lineTo(x+n.width,g),a.lineTo(x,g),a.lineTo(x,n.y);a.setStrokeStyle(_),a.setFillStyle(b),l.borderWidth>0&&(a.setLineWidth(l.borderWidth*t.pix),a.closePath(),a.stroke()),a.fill()}}break;case"triangle":for(let i=0;i<m.length;i++){let n=m[i];null!==n&&i>u&&i<p&&(x=n.x-r*l.widthRatio/2,y=t.height-n.y-t.area[2],a.beginPath(),b=n.color||e[i].color,_=n.color||e[i].color,"none"!==l.linearType&&(S=a.createLinearGradient(x,n.y,x,g),"opacity"==l.linearType?(S.addColorStop(0,An(b,l.linearOpacity)),S.addColorStop(1,An(b,1))):(S.addColorStop(0,An(l.customColor[e[i].linearIndex],l.linearOpacity)),S.addColorStop(l.colorStop,An(l.customColor[e[i].linearIndex],l.linearOpacity)),S.addColorStop(1,An(b,1))),b=S),a.moveTo(x,g),a.lineTo(n.x,n.y),a.lineTo(x+n.width,g),a.setStrokeStyle(_),a.setFillStyle(b),l.borderWidth>0&&(a.setLineWidth(l.borderWidth*t.pix),a.stroke()),a.fill())}break;case"mount":for(let i=0;i<m.length;i++){let n=m[i];null!==n&&i>u&&i<p&&(x=n.x-r*l.widthRatio/2,y=t.height-n.y-t.area[2],a.beginPath(),b=n.color||e[i].color,_=n.color||e[i].color,"none"!==l.linearType&&(S=a.createLinearGradient(x,n.y,x,g),"opacity"==l.linearType?(S.addColorStop(0,An(b,l.linearOpacity)),S.addColorStop(1,An(b,1))):(S.addColorStop(0,An(l.customColor[e[i].linearIndex],l.linearOpacity)),S.addColorStop(l.colorStop,An(l.customColor[e[i].linearIndex],l.linearOpacity)),S.addColorStop(1,An(b,1))),b=S),a.moveTo(x,g),a.bezierCurveTo(n.x-n.width/4,g,n.x-n.width/4,n.y,n.x,n.y),a.bezierCurveTo(n.x+n.width/4,n.y,n.x+n.width/4,g,x+n.width,g),a.setStrokeStyle(_),a.setFillStyle(b),l.borderWidth>0&&(a.setLineWidth(l.borderWidth*t.pix),a.stroke()),a.fill())}break;case"sharp":for(let i=0;i<m.length;i++){let n=m[i];null!==n&&i>u&&i<p&&(x=n.x-r*l.widthRatio/2,y=t.height-n.y-t.area[2],a.beginPath(),b=n.color||e[i].color,_=n.color||e[i].color,"none"!==l.linearType&&(S=a.createLinearGradient(x,n.y,x,g),"opacity"==l.linearType?(S.addColorStop(0,An(b,l.linearOpacity)),S.addColorStop(1,An(b,1))):(S.addColorStop(0,An(l.customColor[e[i].linearIndex],l.linearOpacity)),S.addColorStop(l.colorStop,An(l.customColor[e[i].linearIndex],l.linearOpacity)),S.addColorStop(1,An(b,1))),b=S),a.moveTo(x,g),a.quadraticCurveTo(n.x-0,g-y/4,n.x,n.y),a.quadraticCurveTo(n.x+0,g-y/4,x+n.width,g),a.setStrokeStyle(_),a.setFillStyle(b),l.borderWidth>0&&(a.setLineWidth(l.borderWidth*t.pix),a.stroke()),a.fill())}}if(!1!==t.dataLabel&&1===n){let s,c,h;s=[].concat(t.chartData.yAxisData.ranges[0]),c=s.pop(),h=s.shift(),Cs(m=ms(e,c,h,o,r,t,l,g,n),e,i,a,t,g)}return a.restore(),{xAxisPoints:o,calPoints:m,eachSpacing:r}}(s,t,i,a,e),r=n.xAxisPoints,l=n.calPoints,c=n.eachSpacing;t.chartData.xAxisPoints=r,t.chartData.calPoints=l,t.chartData.eachSpacing=c,Ws(0,t,i,a),!1!==t.enableMarkLine&&1===e&&Ls(t,0,a),$s(t.series,t,i,a,t.chartData),Bs(t,i,a,e),Zs(0,a)},onAnimationFinish:function(){n.uevent.trigger("renderComplete")}});break;case"bar":this.animationInstance=new to({timing:t.timing,duration:r,onProcess:function(e){a.clearRect(0,0,t.width,t.height),t.rotate&&ws(a,t),zs(o,t,i,a);var n=function(e,t,i,a){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=[],o=(t.height-t.area[0]-t.area[2])/t.categories.length;for(let d=0;d<t.categories.length;d++)s.push(t.area[0]+o/2+o*d);let r=kn({},{type:"group",width:o/2,meterBorder:4,meterFillColor:"#FFFFFF",barBorderCircle:!1,barBorderRadius:[],seriesGap:2,linearType:"none",linearOpacity:1,customColor:[],colorStop:0},t.extra.bar),l=[];a.save();let c=-2,h=s.length+2;return t.tooltip&&t.tooltip.textList&&t.tooltip.textList.length&&1===n&&Es(t.tooltip.offset.y,t,0,a,o),r.customColor=On(r.linearType,r.customColor,e,i),e.forEach((function(d,u){let p,f,g;p=[].concat(t.chartData.xAxisData.ranges),g=p.pop(),f=p.shift();var m=d.data;switch(r.type){case"group":var x=xs(m,f,g,s,o,t,i,n),y=bs(m,f,g,s,o,t,i,u,e,n);l.push(y),x=rs(x,o,e.length,u,0,t);for(let e=0;e<x.length;e++){let i=x[e];if(null!==i&&e>c&&e<h){var b=t.area[3],_=i.y-i.width/2;i.height,a.beginPath();var S=i.color||d.color,w=i.color||d.color;if("none"!==r.linearType){var T=a.createLinearGradient(b,i.y,i.x,i.y);"opacity"==r.linearType?(T.addColorStop(0,An(S,r.linearOpacity)),T.addColorStop(1,An(S,1))):(T.addColorStop(0,An(r.customColor[d.linearIndex],r.linearOpacity)),T.addColorStop(r.colorStop,An(r.customColor[d.linearIndex],r.linearOpacity)),T.addColorStop(1,An(S,1))),S=T}if(r.barBorderRadius&&4===r.barBorderRadius.length||!0===r.barBorderCircle){const e=b,t=i.width,n=i.y-i.width/2,s=i.height;r.barBorderCircle&&(r.barBorderRadius=[t/2,t/2,0,0]);let[o,l,c,h]=r.barBorderRadius,d=Math.min(t/2,s/2);o=o>d?d:o,l=l>d?d:l,c=c>d?d:c,h=h>d?d:h,o=o<0?0:o,l=l<0?0:l,c=c<0?0:c,h=h<0?0:h,a.arc(e+h,n+h,h,-Math.PI,-Math.PI/2),a.arc(i.x-o,n+o,o,-Math.PI/2,0),a.arc(i.x-l,n+t-l,l,0,Math.PI/2),a.arc(e+c,n+t-c,c,Math.PI/2,Math.PI)}else a.moveTo(b,_),a.lineTo(i.x,_),a.lineTo(i.x,_+i.width),a.lineTo(b,_+i.width),a.lineTo(b,_),a.setLineWidth(1),a.setStrokeStyle(w);a.setFillStyle(S),a.closePath(),a.fill()}}break;case"stack":x=bs(m,f,g,s,o,t,i,u,e,n),l.push(x),x=hs(x,o,e.length,0,0,t);for(let e=0;e<x.length;e++){let t=x[e];null!==t&&e>c&&e<h&&(a.beginPath(),S=t.color||d.color,b=t.x0,a.setFillStyle(S),a.moveTo(b,t.y-t.width/2),a.fillRect(b,t.y-t.width/2,t.height,t.width),a.closePath(),a.fill())}}})),!1!==t.dataLabel&&1===n&&e.forEach((function(l,c){let h,d,u;h=[].concat(t.chartData.xAxisData.ranges),u=h.pop(),d=h.shift();var p=l.data;switch(r.type){case"group":Ps(rs(xs(p,d,u,s,o,t,i,n),o,e.length,c,0,t),l,i,a,t);break;case"stack":Ps(bs(p,d,u,s,o,t,i,c,e,n),l,i,a,t)}})),{yAxisPoints:s,calPoints:l,eachSpacing:o}}(s,t,i,a,e),r=n.yAxisPoints,l=n.calPoints,c=n.eachSpacing;t.chartData.yAxisPoints=r,t.chartData.xAxisPoints=t.chartData.xAxisData.xAxisPoints,t.chartData.calPoints=l,t.chartData.eachSpacing=c,Ws(0,t,i,a),!1!==t.enableMarkLine&&1===e&&Ls(t,0,a),$s(t.series,t,i,a,t.chartData),Bs(t,i,a,e),Zs(0,a)},onAnimationFinish:function(){n.uevent.trigger("renderComplete")}});break;case"area":this.animationInstance=new to({timing:t.timing,duration:r,onProcess:function(e){a.clearRect(0,0,t.width,t.height),t.rotate&&ws(a,t),Us(0,t,0,a),zs(o,t,i,a);var n=function(e,t,i,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=kn({},{type:"straight",opacity:.2,addLine:!1,width:2,gradient:!1,activeType:"none"},t.extra.area);let o=t.chartData.xAxisData,r=o.xAxisPoints,l=o.eachSpacing,c=t.height-t.area[2],h=[];a.save();let d=0,u=t.width+l;return t._scrollDistance_&&0!==t._scrollDistance_&&!0===t.enableScroll&&(a.translate(t._scrollDistance_,0),d=-t._scrollDistance_-2*l+t.area[3],u=d+(t.xAxis.itemCount+4)*l),e.forEach((function(e,o){let p,f,g;p=[].concat(t.chartData.yAxisData.ranges[e.index]),f=p.pop(),g=p.shift();let m=ps(e.data,f,g,r,l,t,i,n);h.push(m);let x=Jn(m,e);for(let i=0;i<x.length;i++){let n=x[i];if(a.beginPath(),a.setStrokeStyle(An(e.color,s.opacity)),s.gradient){let i=a.createLinearGradient(0,t.area[0],0,t.height-t.area[2]);i.addColorStop("0",An(e.color,s.opacity)),i.addColorStop("1.0",An("#FFFFFF",.1)),a.setFillStyle(i)}else a.setFillStyle(An(e.color,s.opacity));if(a.setLineWidth(s.width*t.pix),n.length>1){let e=n[0],t=n[n.length-1];a.moveTo(e.x,e.y);let i=0;if("curve"===s.type)for(let s=0;s<n.length;s++){let e=n[s];if(0==i&&e.x>d&&(a.moveTo(e.x,e.y),i=1),s>0&&e.x>d&&e.x<u){let t=In(n,s-1);a.bezierCurveTo(t.ctrA.x,t.ctrA.y,t.ctrB.x,t.ctrB.y,e.x,e.y)}}if("straight"===s.type)for(let s=0;s<n.length;s++){let e=n[s];0==i&&e.x>d&&(a.moveTo(e.x,e.y),i=1),s>0&&e.x>d&&e.x<u&&a.lineTo(e.x,e.y)}if("step"===s.type)for(let s=0;s<n.length;s++){let e=n[s];0==i&&e.x>d&&(a.moveTo(e.x,e.y),i=1),s>0&&e.x>d&&e.x<u&&(a.lineTo(e.x,n[s-1].y),a.lineTo(e.x,e.y))}a.lineTo(t.x,c),a.lineTo(e.x,c),a.lineTo(e.x,e.y)}else{let e=n[0];a.moveTo(e.x-l/2,e.y)}if(a.closePath(),a.fill(),s.addLine){if("dash"==e.lineType){let i=e.dashLength?e.dashLength:8;i*=t.pix,a.setLineDash([i,i])}if(a.beginPath(),a.setStrokeStyle(e.color),a.setLineWidth(s.width*t.pix),1===n.length)a.moveTo(n[0].x,n[0].y);else{a.moveTo(n[0].x,n[0].y);let e=0;if("curve"===s.type)for(let t=0;t<n.length;t++){let i=n[t];if(0==e&&i.x>d&&(a.moveTo(i.x,i.y),e=1),t>0&&i.x>d&&i.x<u){let e=In(n,t-1);a.bezierCurveTo(e.ctrA.x,e.ctrA.y,e.ctrB.x,e.ctrB.y,i.x,i.y)}}if("straight"===s.type)for(let t=0;t<n.length;t++){let i=n[t];0==e&&i.x>d&&(a.moveTo(i.x,i.y),e=1),t>0&&i.x>d&&i.x<u&&a.lineTo(i.x,i.y)}if("step"===s.type)for(let t=0;t<n.length;t++){let i=n[t];0==e&&i.x>d&&(a.moveTo(i.x,i.y),e=1),t>0&&i.x>d&&i.x<u&&(a.lineTo(i.x,n[t-1].y),a.lineTo(i.x,i.y))}a.moveTo(n[0].x,n[0].y)}a.stroke(),a.setLineDash([])}}!1!==t.dataPointShape&&Ts(m,e.color,e.pointShape,a,t),vs(m,e.color,e.pointShape,a,t,s,o)})),!1!==t.dataLabel&&1===n&&e.forEach((function(e,s){let o,c,h;o=[].concat(t.chartData.yAxisData.ranges[e.index]),c=o.pop(),h=o.shift(),Ds(ps(e.data,c,h,r,l,t,i,n),e,i,a,t)})),a.restore(),{xAxisPoints:r,calPoints:h,eachSpacing:l}}(s,t,i,a,e),r=n.xAxisPoints,l=n.calPoints,c=n.eachSpacing;t.chartData.xAxisPoints=r,t.chartData.calPoints=l,t.chartData.eachSpacing=c,Ws(0,t,i,a),!1!==t.enableMarkLine&&1===e&&Ls(t,0,a),$s(t.series,t,i,a,t.chartData),Bs(t,i,a,e),Zs(0,a)},onAnimationFinish:function(){n.uevent.trigger("renderComplete")}});break;case"ring":case"pie":this.animationInstance=new to({timing:t.timing,duration:r,onProcess:function(e){a.clearRect(0,0,t.width,t.height),t.rotate&&ws(a,t),t.chartData.pieData=Vs(s,t,i,a,e),$s(t.series,t,i,a,t.chartData),Bs(t,i,a,e),Zs(0,a)},onAnimationFinish:function(){n.uevent.trigger("renderComplete")}});break;case"rose":this.animationInstance=new to({timing:t.timing,duration:r,onProcess:function(e){a.clearRect(0,0,t.width,t.height),t.rotate&&ws(a,t),t.chartData.pieData=function(e,t,i,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=kn({},{type:"area",activeOpacity:.5,activeRadius:10,offsetAngle:0,labelWidth:15,border:!1,borderWidth:2,borderColor:"#FFFFFF",linearType:"none",customColor:[]},t.extra.rose);0==i.pieChartLinePadding&&(i.pieChartLinePadding=s.activeRadius*t.pix);var o={x:t.area[3]+(t.width-t.area[1]-t.area[3])/2,y:t.area[0]+(t.height-t.area[0]-t.area[2])/2},r=Math.min((t.width-t.area[1]-t.area[3])/2-i.pieChartLinePadding-i.pieChartTextPadding-i._pieTextMaxLength_,(t.height-t.area[0]-t.area[2])/2-i.pieChartLinePadding-i.pieChartTextPadding);r=r<10?10:r;var l=s.minRadius||.5*r;r<l&&(r=l+10),e=ts(e,s.type,l,r,n);var c=s.activeRadius*t.pix;return s.customColor=On(s.linearType,s.customColor,e,i),(e=e.map((function(e){return e._start_+=(s.offsetAngle||0)*Math.PI/180,e}))).forEach((function(e,i){t.tooltip&&t.tooltip.index==i&&(a.beginPath(),a.setFillStyle(An(e.color,s.activeOpacity||.5)),a.moveTo(o.x,o.y),a.arc(o.x,o.y,c+e._radius_,e._start_,e._start_+2*e._rose_proportion_*Math.PI),a.closePath(),a.fill()),a.beginPath(),a.setLineWidth(s.borderWidth*t.pix),a.lineJoin="round",a.setStrokeStyle(s.borderColor);var n,r=e.color;"custom"==s.linearType&&((n=a.createCircularGradient?a.createCircularGradient(o.x,o.y,e._radius_):a.createRadialGradient(o.x,o.y,0,o.x,o.y,e._radius_)).addColorStop(0,An(s.customColor[e.linearIndex],1)),n.addColorStop(1,An(e.color,1)),r=n),a.setFillStyle(r),a.moveTo(o.x,o.y),a.arc(o.x,o.y,e._radius_,e._start_,e._start_+2*e._rose_proportion_*Math.PI),a.closePath(),a.fill(),1==s.border&&a.stroke()})),!1!==t.dataLabel&&1===n&&Fs(e,t,i,a,0,o),{center:o,radius:r,series:e}}(s,t,i,a,e),$s(t.series,t,i,a,t.chartData),Bs(t,i,a,e),Zs(0,a)},onAnimationFinish:function(){n.uevent.trigger("renderComplete")}});break;case"radar":this.animationInstance=new to({timing:t.timing,duration:r,onProcess:function(e){a.clearRect(0,0,t.width,t.height),t.rotate&&ws(a,t),t.chartData.radarData=function(e,t,i,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=kn({},{gridColor:"#cccccc",gridType:"radar",gridEval:1,axisLabel:!1,axisLabelTofix:0,labelShow:!0,labelColor:"#666666",labelPointShow:!1,labelPointRadius:3,labelPointColor:"#cccccc",opacity:.2,gridCount:3,border:!1,borderWidth:2,linearType:"none",customColor:[]},t.extra.radar),o=$n(t.categories.length),r={x:t.area[3]+(t.width-t.area[1]-t.area[3])/2,y:t.area[0]+(t.height-t.area[0]-t.area[2])/2},l=(t.width-t.area[1]-t.area[3])/2,c=(t.height-t.area[0]-t.area[2])/2,h=Math.min(l-(Wn(t.categories,i.fontSize,a)+i.radarLabelTextMargin),c-i.radarLabelTextMargin);h=(h-=i.radarLabelTextMargin*t.pix)<10?10:h,h=s.radius?s.radius:h,a.beginPath(),a.setLineWidth(1*t.pix),a.setStrokeStyle(s.gridColor),o.forEach((function(e,t){var i=Fn(h*Math.cos(e),h*Math.sin(e),r);a.moveTo(r.x,r.y),t%s.gridEval==0&&a.lineTo(i.x,i.y)})),a.stroke(),a.closePath();for(var d=function(e){var i={};if(a.beginPath(),a.setLineWidth(1*t.pix),a.setStrokeStyle(s.gridColor),"radar"==s.gridType)o.forEach((function(t,n){var o=Fn(h/s.gridCount*e*Math.cos(t),h/s.gridCount*e*Math.sin(t),r);0===n?(i=o,a.moveTo(o.x,o.y)):a.lineTo(o.x,o.y)})),a.lineTo(i.x,i.y);else{var n=Fn(h/s.gridCount*e*Math.cos(1.5),h/s.gridCount*e*Math.sin(1.5),r);a.arc(r.x,r.y,r.y-n.y,0,2*Math.PI,!1)}a.stroke(),a.closePath()},u=1;u<=s.gridCount;u++)d(u);s.customColor=On(s.linearType,s.customColor,e,i);var p=Qn(o,r,h,e,t,n);if(p.forEach((function(i,n){a.beginPath(),a.setLineWidth(s.borderWidth*t.pix),a.setStrokeStyle(i.color);var o,l=An(i.color,s.opacity);"custom"==s.linearType&&((o=a.createCircularGradient?a.createCircularGradient(r.x,r.y,h):a.createRadialGradient(r.x,r.y,0,r.x,r.y,h)).addColorStop(0,An(s.customColor[e[n].linearIndex],s.opacity)),o.addColorStop(1,An(i.color,s.opacity)),l=o),a.setFillStyle(l),i.data.forEach((function(e,t){0===t?a.moveTo(e.position.x,e.position.y):a.lineTo(e.position.x,e.position.y)})),a.closePath(),a.fill(),!0===s.border&&a.stroke(),a.closePath(),!1!==t.dataPointShape&&Ts(i.data.map((function(e){return e.position})),i.color,i.pointShape,a,t)})),!0===s.axisLabel){const i=Math.max(s.max,Math.max.apply(null,Nn(e))),n=h/s.gridCount,o=t.fontSize*t.pix;for(a.setFontSize(o),a.setFillStyle(t.fontColor),a.setTextAlign("left"),u=0;u<s.gridCount+1;u++){let e=u*i/s.gridCount;e=e.toFixed(s.axisLabelTofix),a.fillText(String(e),r.x+3*t.pix,r.y-u*n+o/2)}}return Is(o,h,r,t,i,a),!1!==t.dataLabel&&1===n&&(p.forEach((function(e,n){a.beginPath();var s=e.textSize*t.pix||i.fontSize;a.setFontSize(s),a.setFillStyle(e.textColor||t.fontColor),e.data.forEach((function(e,t){Math.abs(e.position.x-r.x)<2?e.position.y<r.y?(a.setTextAlign("center"),a.fillText(e.value,e.position.x,e.position.y-4)):(a.setTextAlign("center"),a.fillText(e.value,e.position.x,e.position.y+s+2)):e.position.x<r.x?(a.setTextAlign("right"),a.fillText(e.value,e.position.x-4,e.position.y+s/2-2)):(a.setTextAlign("left"),a.fillText(e.value,e.position.x+4,e.position.y+s/2-2))})),a.closePath(),a.stroke()})),a.setTextAlign("left")),{center:r,radius:h,angleList:o}}(s,t,i,a,e),$s(t.series,t,i,a,t.chartData),Bs(t,i,a,e),Zs(0,a)},onAnimationFinish:function(){n.uevent.trigger("renderComplete")}});break;case"arcbar":this.animationInstance=new to({timing:t.timing,duration:r,onProcess:function(e){a.clearRect(0,0,t.width,t.height),t.rotate&&ws(a,t),t.chartData.arcbarData=function(e,t,i,a){var n,s,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=kn({},{startAngle:.75,endAngle:.25,type:"default",direction:"cw",lineCap:"round",width:12,gap:2,linearType:"none",customColor:[]},t.extra.arcbar);e=is(e,r,o),n=r.centerX||r.centerY?{x:r.centerX?r.centerX:t.width/2,y:r.centerY?r.centerY:t.height/2}:{x:t.width/2,y:t.height/2},r.radius?s=r.radius:(s=Math.min(n.x,n.y),s-=5*t.pix,s-=r.width/2),s=s<10?10:s,r.customColor=On(r.linearType,r.customColor,e,i);for(let h=0;h<e.length;h++){let i=e[h];a.setLineWidth(r.width*t.pix),a.setStrokeStyle(r.backgroundColor||"#E9E9E9"),a.setLineCap(r.lineCap),a.beginPath(),"default"==r.type?a.arc(n.x,n.y,s-(r.width*t.pix+r.gap*t.pix)*h,r.startAngle*Math.PI,r.endAngle*Math.PI,"ccw"==r.direction):a.arc(n.x,n.y,s-(r.width*t.pix+r.gap*t.pix)*h,0,2*Math.PI,"ccw"==r.direction),a.stroke();var l=i.color;if("custom"==r.linearType){var c=a.createLinearGradient(n.x-s,n.y,n.x+s,n.y);c.addColorStop(1,An(r.customColor[i.linearIndex],1)),c.addColorStop(0,An(i.color,1)),l=c}a.setLineWidth(r.width*t.pix),a.setStrokeStyle(l),a.setLineCap(r.lineCap),a.beginPath(),a.arc(n.x,n.y,s-(r.width*t.pix+r.gap*t.pix)*h,r.startAngle*Math.PI,i._proportion_*Math.PI,"ccw"==r.direction),a.stroke()}return ks(t,i,a,n),{center:n,radius:s,series:e}}(s,t,i,a,e),Zs(0,a)},onAnimationFinish:function(){n.uevent.trigger("renderComplete")}});break;case"gauge":this.animationInstance=new to({timing:t.timing,duration:r,onProcess:function(e){a.clearRect(0,0,t.width,t.height),t.rotate&&ws(a,t),t.chartData.gaugeData=function(e,t,i,a,n){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=kn({},{type:"default",startAngle:.75,endAngle:.25,width:15,labelOffset:13,splitLine:{fixRadius:0,splitNumber:10,width:15,color:"#FFFFFF",childNumber:5,childWidth:5},pointer:{width:15,color:"auto"}},i.extra.gauge);null==o.oldAngle&&(o.oldAngle=o.startAngle),null==o.oldData&&(o.oldData=0),e=ns(e,o.startAngle,o.endAngle);var r={x:i.width/2,y:i.height/2},l=Math.min(r.x,r.y);l-=5*i.pix;var c=(l=(l-=o.width/2)<10?10:l)-o.width,h=0;if("progress"==o.type){var d=l-3*o.width;n.beginPath();let e=n.createLinearGradient(r.x,r.y-d,r.x,r.y+d);e.addColorStop("0",An(t[0].color,.3)),e.addColorStop("1.0",An("#FFFFFF",.1)),n.setFillStyle(e),n.arc(r.x,r.y,d,0,2*Math.PI,!1),n.fill(),n.setLineWidth(o.width),n.setStrokeStyle(An(t[0].color,.3)),n.setLineCap("round"),n.beginPath(),n.arc(r.x,r.y,c,o.startAngle*Math.PI,o.endAngle*Math.PI,!1),n.stroke(),h=o.endAngle<o.startAngle?2+o.endAngle-o.startAngle:o.startAngle-o.endAngle,o.splitLine.splitNumber;let a=h/o.splitLine.splitNumber/o.splitLine.childNumber,u=-l-.5*o.width-o.splitLine.fixRadius,p=-l-o.width-o.splitLine.fixRadius+o.splitLine.width;n.save(),n.translate(r.x,r.y),n.rotate((o.startAngle-1)*Math.PI);let f=o.splitLine.splitNumber*o.splitLine.childNumber+1,g=t[0].data*s;for(let s=0;s<f;s++)n.beginPath(),g>s/f?n.setStrokeStyle(An(t[0].color,1)):n.setStrokeStyle(An(t[0].color,.3)),n.setLineWidth(3*i.pix),n.moveTo(u,0),n.lineTo(p,0),n.stroke(),n.rotate(a*Math.PI);n.restore(),t=as(t,o,s),n.setLineWidth(o.width),n.setStrokeStyle(t[0].color),n.setLineCap("round"),n.beginPath(),n.arc(r.x,r.y,c,o.startAngle*Math.PI,t[0]._proportion_*Math.PI,!1),n.stroke();let m=l-2.5*o.width;n.save(),n.translate(r.x,r.y),n.rotate((t[0]._proportion_-1)*Math.PI),n.beginPath(),n.setLineWidth(o.width/3);let x=n.createLinearGradient(0,.6*-m,0,.6*m);x.addColorStop("0",An("#FFFFFF",0)),x.addColorStop("0.5",An(t[0].color,1)),x.addColorStop("1.0",An("#FFFFFF",0)),n.setStrokeStyle(x),n.arc(0,0,m,.85*Math.PI,1.15*Math.PI,!1),n.stroke(),n.beginPath(),n.setLineWidth(1),n.setStrokeStyle(t[0].color),n.setFillStyle(t[0].color),n.moveTo(-m-o.width/3/2,-4),n.lineTo(-m-o.width/3/2-4,0),n.lineTo(-m-o.width/3/2,4),n.lineTo(-m-o.width/3/2,-4),n.stroke(),n.fill(),n.restore()}else{n.setLineWidth(o.width),n.setLineCap("butt");for(let t=0;t<e.length;t++){let i=e[t];n.beginPath(),n.setStrokeStyle(i.color),n.arc(r.x,r.y,l,i._startAngle_*Math.PI,i._endAngle_*Math.PI,!1),n.stroke()}n.save();let d=(h=o.endAngle<o.startAngle?2+o.endAngle-o.startAngle:o.startAngle-o.endAngle)/o.splitLine.splitNumber,u=h/o.splitLine.splitNumber/o.splitLine.childNumber,p=-l-.5*o.width-o.splitLine.fixRadius,f=-l-.5*o.width-o.splitLine.fixRadius+o.splitLine.width,g=-l-.5*o.width-o.splitLine.fixRadius+o.splitLine.childWidth;n.translate(r.x,r.y),n.rotate((o.startAngle-1)*Math.PI);for(let e=0;e<o.splitLine.splitNumber+1;e++)n.beginPath(),n.setStrokeStyle(o.splitLine.color),n.setLineWidth(2*i.pix),n.moveTo(p,0),n.lineTo(f,0),n.stroke(),n.rotate(d*Math.PI);n.restore(),n.save(),n.translate(r.x,r.y),n.rotate((o.startAngle-1)*Math.PI);for(let e=0;e<o.splitLine.splitNumber*o.splitLine.childNumber+1;e++)n.beginPath(),n.setStrokeStyle(o.splitLine.color),n.setLineWidth(1*i.pix),n.moveTo(p,0),n.lineTo(g,0),n.stroke(),n.rotate(u*Math.PI);n.restore(),t=ss(t,e,o,s);for(let e=0;e<t.length;e++){let i=t[e];n.save(),n.translate(r.x,r.y),n.rotate((i._proportion_-1)*Math.PI),n.beginPath(),n.setFillStyle(i.color),n.moveTo(o.pointer.width,0),n.lineTo(0,-o.pointer.width/2),n.lineTo(-c,0),n.lineTo(0,o.pointer.width/2),n.lineTo(o.pointer.width,0),n.closePath(),n.fill(),n.beginPath(),n.setFillStyle("#FFFFFF"),n.arc(0,0,o.pointer.width/6,0,2*Math.PI,!1),n.fill(),n.restore()}!1!==i.dataLabel&&Ms(o,l,r,i,a,n)}return ks(i,a,n,r),1===s&&"gauge"===i.type&&(i.extra.gauge.oldAngle=t[0]._proportion_,i.extra.gauge.oldData=t[0].data),{center:r,radius:l,innerRadius:c,categories:e,totalAngle:h}}(o,s,t,i,a,e),Zs(0,a)},onAnimationFinish:function(){n.uevent.trigger("renderComplete")}});break;case"candle":this.animationInstance=new to({timing:t.timing,duration:r,onProcess:function(e){a.clearRect(0,0,t.width,t.height),t.rotate&&ws(a,t),Us(0,t,0,a),zs(o,t,i,a);var n=function(e,t,i,a,n){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=kn({},{color:{},average:{}},i.extra.candle);o.color=kn({},{upLine:"#f04864",upFill:"#f04864",downLine:"#2fc25b",downFill:"#2fc25b"},o.color),o.average=kn({},{show:!1,name:[],day:[],color:a.color},o.average),i.extra.candle=o;let r=i.chartData.xAxisData,l=r.xAxisPoints,c=r.eachSpacing,h=[];n.save();let d=-2,u=l.length+2,p=0,f=i.width+c;return i._scrollDistance_&&0!==i._scrollDistance_&&!0===i.enableScroll&&(n.translate(i._scrollDistance_,0),d=Math.floor(-i._scrollDistance_/c)-2,u=d+i.xAxis.itemCount+4,p=-i._scrollDistance_-2*c+i.area[3],f=p+(i.xAxis.itemCount+4)*c),(o.average.show||t)&&t.forEach((function(e,t){let o,r,h;o=[].concat(i.chartData.yAxisData.ranges[e.index]),r=o.pop(),h=o.shift();var d=Jn(ps(e.data,r,h,l,c,i,a,s),e);for(let i=0;i<d.length;i++){let t=d[i];if(n.beginPath(),n.setStrokeStyle(e.color),n.setLineWidth(1),1===t.length)n.moveTo(t[0].x,t[0].y),n.arc(t[0].x,t[0].y,1,0,2*Math.PI);else{n.moveTo(t[0].x,t[0].y);let e=0;for(let i=0;i<t.length;i++){let a=t[i];if(0==e&&a.x>p&&(n.moveTo(a.x,a.y),e=1),i>0&&a.x>p&&a.x<f){var u=In(t,i-1);n.bezierCurveTo(u.ctrA.x,u.ctrA.y,u.ctrB.x,u.ctrB.y,a.x,a.y)}}n.moveTo(t[0].x,t[0].y)}n.closePath(),n.stroke()}})),e.forEach((function(e,t){let r,p,f;r=[].concat(i.chartData.yAxisData.ranges[e.index]),p=r.pop(),f=r.shift();var g=e.data,m=us(g,p,f,l,c,i,a,s);h.push(m);var x=Jn(m,e);for(let a=0;a<x[0].length;a++)if(a>d&&a<u){let e=x[0][a];n.beginPath(),g[a][1]-g[a][0]>0?(n.setStrokeStyle(o.color.upLine),n.setFillStyle(o.color.upFill),n.setLineWidth(1*i.pix),n.moveTo(e[3].x,e[3].y),n.lineTo(e[1].x,e[1].y),n.lineTo(e[1].x-c/4,e[1].y),n.lineTo(e[0].x-c/4,e[0].y),n.lineTo(e[0].x,e[0].y),n.lineTo(e[2].x,e[2].y),n.lineTo(e[0].x,e[0].y),n.lineTo(e[0].x+c/4,e[0].y),n.lineTo(e[1].x+c/4,e[1].y),n.lineTo(e[1].x,e[1].y),n.moveTo(e[3].x,e[3].y)):(n.setStrokeStyle(o.color.downLine),n.setFillStyle(o.color.downFill),n.setLineWidth(1*i.pix),n.moveTo(e[3].x,e[3].y),n.lineTo(e[0].x,e[0].y),n.lineTo(e[0].x-c/4,e[0].y),n.lineTo(e[1].x-c/4,e[1].y),n.lineTo(e[1].x,e[1].y),n.lineTo(e[2].x,e[2].y),n.lineTo(e[1].x,e[1].y),n.lineTo(e[1].x+c/4,e[1].y),n.lineTo(e[0].x+c/4,e[0].y),n.lineTo(e[0].x,e[0].y),n.moveTo(e[3].x,e[3].y)),n.closePath(),n.fill(),n.stroke()}})),n.restore(),{xAxisPoints:l,calPoints:h,eachSpacing:c}}(s,l,t,i,a,e),r=n.xAxisPoints,c=n.calPoints,h=n.eachSpacing;t.chartData.xAxisPoints=r,t.chartData.calPoints=c,t.chartData.eachSpacing=h,Ws(0,t,i,a),!1!==t.enableMarkLine&&1===e&&Ls(t,0,a),$s(l?0:t.series,t,i,a,t.chartData),Bs(t,i,a,e),Zs(0,a)},onAnimationFinish:function(){n.uevent.trigger("renderComplete")}})}}function ao(){this.events={}}to.prototype.stop=function(){this.isStop=!0},ao.prototype.addEventListener=function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},ao.prototype.delEventListener=function(e){this.events[e]=[]},ao.prototype.trigger=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var a=t[0],n=t.slice(1);this.events[a]&&this.events[a].forEach((function(e){try{e.apply(null,n)}catch(Xt){}}))};var no=function(e){e.pix=e.pixelRatio?e.pixelRatio:1,e.fontSize=e.fontSize?e.fontSize:13,e.fontColor=e.fontColor?e.fontColor:vn.fontColor,""!=e.background&&"none"!=e.background||(e.background="#FFFFFF"),e.title=kn({},e.title),e.subtitle=kn({},e.subtitle),e.duration=e.duration?e.duration:1e3,e.yAxis=kn({},{data:[],showTitle:!1,disabled:!1,disableGrid:!1,gridSet:"number",splitNumber:5,gridType:"solid",dashLength:4*e.pix,gridColor:"#cccccc",padding:10,fontColor:"#666666"},e.yAxis),e.xAxis=kn({},{rotateLabel:!1,rotateAngle:45,disabled:!1,disableGrid:!1,splitNumber:5,calibration:!1,fontColor:"#666666",fontSize:13,lineHeight:20,marginTop:0,gridType:"solid",dashLength:4,scrollAlign:"left",boundaryGap:"center",axisLine:!0,axisLineColor:"#cccccc",titleFontSize:13,titleOffsetY:0,titleOffsetX:0,titleFontColor:"#666666"},e.xAxis),e.xAxis.scrollPosition=e.xAxis.scrollAlign,e.legend=kn({},{show:!0,position:"bottom",float:"center",backgroundColor:"rgba(0,0,0,0)",borderColor:"rgba(0,0,0,0)",borderWidth:0,padding:5,margin:5,itemGap:10,fontSize:e.fontSize,lineHeight:e.fontSize,fontColor:e.fontColor,formatter:{},hiddenColor:"#CECECE"},e.legend),e.extra=kn({tooltip:{legendShape:"auto"}},e.extra),e.rotate=!!e.rotate,e.animation=!!e.animation,e.rotate=!!e.rotate,e.canvas2d=!!e.canvas2d;let t=kn({},vn);if(t.color=e.color?e.color:t.color,"pie"==e.type&&(t.pieChartLinePadding=!1===e.dataLabel?0:e.extra.pie.labelWidth*e.pix||t.pieChartLinePadding*e.pix),"ring"==e.type&&(t.pieChartLinePadding=!1===e.dataLabel?0:e.extra.ring.labelWidth*e.pix||t.pieChartLinePadding*e.pix),"rose"==e.type&&(t.pieChartLinePadding=!1===e.dataLabel?0:e.extra.rose.labelWidth*e.pix||t.pieChartLinePadding*e.pix),t.pieChartTextPadding=!1===e.dataLabel?0:t.pieChartTextPadding*e.pix,t.rotate=e.rotate,e.rotate){let t=e.width,i=e.height;e.width=i,e.height=t}if(e.padding=e.padding?e.padding:t.padding,t.yAxisWidth=vn.yAxisWidth*e.pix,t.fontSize=e.fontSize*e.pix,t.titleFontSize=vn.titleFontSize*e.pix,t.subtitleFontSize=vn.subtitleFontSize*e.pix,!e.context)throw new Error("[uCharts] 未获取到context！注意：v2.0版本后，需要自行获取canvas的绘图上下文并传入opts.context！");this.context=e.context,this.context.setTextAlign||(this.context.setStrokeStyle=function(e){return this.strokeStyle=e},this.context.setLineWidth=function(e){return this.lineWidth=e},this.context.setLineCap=function(e){return this.lineCap=e},this.context.setFontSize=function(e){return this.font=e+"px sans-serif"},this.context.setFillStyle=function(e){return this.fillStyle=e},this.context.setTextAlign=function(e){return this.textAlign=e},this.context.setTextBaseline=function(e){return this.textBaseline=e},this.context.setShadow=function(e,t,i,a){this.shadowColor=a,this.shadowOffsetX=e,this.shadowOffsetY=t,this.shadowBlur=i},this.context.draw=function(){}),this.context.setLineDash||(this.context.setLineDash=function(e){}),e.chartData={},this.uevent=new ao,this.scrollOption={currentOffset:0,startTouchX:0,distance:0,lastMoveTime:0},this.opts=e,this.config=t,io.call(this,e.type,e,t,this.context)};no.prototype.updateData=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opts=kn({},this.opts,e),this.opts.updateData=!0;let t=e.scrollPosition||"current";switch(t){case"current":this.opts._scrollDistance_=this.scrollOption.currentOffset;break;case"left":this.opts._scrollDistance_=0,this.scrollOption={currentOffset:0,startTouchX:0,distance:0,lastMoveTime:0};break;case"right":let e=Ss(this.opts.series,this.opts,this.config,this.context).yAxisWidth;this.config.yAxisWidth=e;let t=0,i=ds(this.opts.categories,this.opts,this.config),a=i.xAxisPoints,n=i.startX;t=i.endX-n-i.eachSpacing*(a.length-1),this.scrollOption={currentOffset:t,startTouchX:t,distance:0,lastMoveTime:0},this.opts._scrollDistance_=t}io.call(this,this.opts.type,this.opts,this.config,this.context)},no.prototype.zoom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.opts.xAxis.itemCount;if(!0!==this.opts.enableScroll)return void console.log("[uCharts] 请启用滚动条后使用");let t=Math.round(Math.abs(this.scrollOption.currentOffset)/this.opts.chartData.eachSpacing)+Math.round(this.opts.xAxis.itemCount/2);this.opts.animation=!1,this.opts.xAxis.itemCount=e.itemCount;let i=Ss(this.opts.series,this.opts,this.config,this.context),a=i.yAxisWidth;this.config.yAxisWidth=a;let n=0,s=ds(this.opts.categories,this.opts,this.config),o=s.xAxisPoints,r=s.startX,l=s.endX,c=s.eachSpacing,h=c*t,d=l-r,u=d-c*(o.length-1);n=d/2-h,n>0&&(n=0),n<u&&(n=u),this.scrollOption={currentOffset:n,startTouchX:0,distance:0,lastMoveTime:0},Pn(this,n,this.opts.chartData,this.config,this.opts),this.opts._scrollDistance_=n,io.call(this,this.opts.type,this.opts,this.config,this.context)},no.prototype.dobuleZoom=function(e){if(!0!==this.opts.enableScroll)return void console.log("[uCharts] 请启用滚动条后使用");const t=e.changedTouches;if(t.length<2)return;for(var i=0;i<t.length;i++)t[i].x=t[i].x?t[i].x:t[i].clientX,t[i].y=t[i].y?t[i].y:t[i].clientY;const a=[zn(t[0],this.opts,e),zn(t[1],this.opts,e)],n=Math.abs(a[0].x-a[1].x);if(!this.scrollOption.moveCount){let e={changedTouches:[{x:t[0].x,y:this.opts.area[0]/this.opts.pix+2}]},i={changedTouches:[{x:t[1].x,y:this.opts.area[0]/this.opts.pix+2}]};this.opts.rotate&&(e={changedTouches:[{x:this.opts.height/this.opts.pix-this.opts.area[0]/this.opts.pix-2,y:t[0].y}]},i={changedTouches:[{x:this.opts.height/this.opts.pix-this.opts.area[0]/this.opts.pix-2,y:t[1].y}]});const a=this.getCurrentDataIndex(e).index,n=this.getCurrentDataIndex(i).index,s=Math.abs(a-n);return this.scrollOption.moveCount=s,this.scrollOption.moveCurrent1=Math.min(a,n),void(this.scrollOption.moveCurrent2=Math.max(a,n))}let s=n/this.scrollOption.moveCount,o=(this.opts.width-this.opts.area[1]-this.opts.area[3])/s;o=o<=2?2:o,o=o>=this.opts.categories.length?this.opts.categories.length:o,this.opts.animation=!1,this.opts.xAxis.itemCount=o;let r=0,l=ds(this.opts.categories,this.opts,this.config),c=l.xAxisPoints,h=l.startX,d=l.endX,u=l.eachSpacing,p=u*this.scrollOption.moveCurrent1,f=d-h-u*(c.length-1);r=-p+Math.min(a[0].x,a[1].x)-this.opts.area[3]-u,r>0&&(r=0),r<f&&(r=f),this.scrollOption.currentOffset=r,this.scrollOption.startTouchX=0,this.scrollOption.distance=0,Pn(this,r,this.opts.chartData,this.config,this.opts),this.opts._scrollDistance_=r,io.call(this,this.opts.type,this.opts,this.config,this.context)},no.prototype.stopAnimation=function(){this.animationInstance&&this.animationInstance.stop()},no.prototype.addEventListener=function(e,t){this.uevent.addEventListener(e,t)},no.prototype.delEventListener=function(e){this.uevent.delEventListener(e)},no.prototype.getCurrentDataIndex=function(e){var t=null;if(t=e.changedTouches?e.changedTouches[0]:e.mp.changedTouches[0]){let i=zn(t,this.opts,e);return"pie"===this.opts.type||"ring"===this.opts.type?function(e,t,i){var a=-1,n=Zn(t.series);if(t&&t.center&&Kn(e,t.center,t.radius)){var s=Math.atan2(t.center.y-e.y,e.x-t.center.x);s=-s,i.extra.pie&&i.extra.pie.offsetAngle&&(s-=i.extra.pie.offsetAngle*Math.PI/180),i.extra.ring&&i.extra.ring.offsetAngle&&(s-=i.extra.ring.offsetAngle*Math.PI/180);for(var o=0,r=n.length;o<r;o++)if(Mn(s,n[o]._start_,n[o]._start_+2*n[o]._proportion_*Math.PI)){a=o;break}}return a}({x:i.x,y:i.y},this.opts.chartData.pieData,this.opts):"rose"===this.opts.type?function(e,t,i){var a=-1,n=ts(i._series_,i.extra.rose.type,t.radius,t.radius);if(t&&t.center&&Kn(e,t.center,t.radius)){var s=Math.atan2(t.center.y-e.y,e.x-t.center.x);s=-s,i.extra.rose&&i.extra.rose.offsetAngle&&(s-=i.extra.rose.offsetAngle*Math.PI/180);for(var o=0,r=n.length;o<r;o++)if(Mn(s,n[o]._start_,n[o]._start_+2*n[o]._rose_proportion_*Math.PI)){a=o;break}}return a}({x:i.x,y:i.y},this.opts.chartData.pieData,this.opts):"radar"===this.opts.type?function(e,t,i){var a=2*Math.PI/i,n=-1;if(Kn(e,t.center,t.radius)){var s=function(e){return e<0&&(e+=2*Math.PI),e>2*Math.PI&&(e-=2*Math.PI),e},o=Math.atan2(t.center.y-e.y,e.x-t.center.x);(o*=-1)<0&&(o+=2*Math.PI),t.angleList.map((function(e){return s(-1*e)})).forEach((function(e,t){var i=s(e-a/2),r=s(e+a/2);r<i&&(r+=2*Math.PI),(o>=i&&o<=r||o+2*Math.PI>=i&&o+2*Math.PI<=r)&&(n=t)}))}return n}({x:i.x,y:i.y},this.opts.chartData.radarData,this.opts.categories.length):"funnel"===this.opts.type?function(e,t){for(var i=-1,a=0,n=t.series.length;a<n;a++){var s=t.series[a];if(e.x>s.funnelArea[0]&&e.x<s.funnelArea[2]&&e.y>s.funnelArea[1]&&e.y<s.funnelArea[3]){i=a;break}}return i}({x:i.x,y:i.y},this.opts.chartData.funnelData):"map"===this.opts.type?function(e,t){for(var i,a,n,s,o,r,l=-1,c=t.chartData.mapData,h=t.series,d=(i=e.y,a=e.x,n=c.bounds,s=c.scale,o=c.xoffset,r=c.yoffset,{x:(a-o)/s+n.xMin,y:n.yMax-(i-r)/s}),u=[d.x,d.y],p=0,f=h.length;p<f;p++)if(Gs(u,h[p].geometry.coordinates,t.chartData.mapData.mercator)){l=p;break}return l}({x:i.x,y:i.y},this.opts):"word"===this.opts.type?function(e,t){for(var i=-1,a=0,n=t.length;a<n;a++){var s=t[a];if(e.x>s.area[0]&&e.x<s.area[2]&&e.y>s.area[1]&&e.y<s.area[3]){i=a;break}}return i}({x:i.x,y:i.y},this.opts.chartData.wordCloudData):"bar"===this.opts.type?function(e,t,i,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s={index:-1,group:[]},o=i.chartData.eachSpacing/2;let r=i.chartData.yAxisPoints;return t&&t.length>0&&Gn(e,i)&&r.forEach((function(t,i){e.y+n+o>t&&(s.index=i)})),s}({x:i.x,y:i.y},this.opts.chartData.calPoints,this.opts,this.config,Math.abs(this.scrollOption.currentOffset)):function(e,t,i,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s={index:-1,group:[]},o=i.chartData.eachSpacing/2;let r=[];if(t&&t.length>0){if(i.categories){for(let e=1;e<i.chartData.xAxisPoints.length;e++)r.push(i.chartData.xAxisPoints[e]-o);"line"!=i.type&&"area"!=i.type||"justify"!=i.xAxis.boundaryGap||(r=i.chartData.xAxisPoints)}else o=0;if(Gn(e,i))if(i.categories)r.forEach((function(t,i){e.x+n+o>t&&(s.index=i)}));else{let i=Array(t.length);for(let s=0;s<t.length;s++){i[s]=Array(t[s].length);for(let a=0;a<t[s].length;a++)i[s][a]=Math.abs(t[s][a].x-e.x)}let a=Array(i.length),n=Array(i.length);for(let e=0;e<i.length;e++)a[e]=Math.min.apply(null,i[e]),n[e]=i[e].indexOf(a[e]);let o=Math.min.apply(null,a);s.index=[];for(let e=0;e<a.length;e++)a[e]==o&&(s.group.push(e),s.index.push(n[e]))}}return s}({x:i.x,y:i.y},this.opts.chartData.calPoints,this.opts,this.config,Math.abs(this.scrollOption.currentOffset))}return-1},no.prototype.getLegendDataIndex=function(e){var t=null;if(t=e.changedTouches?e.changedTouches[0]:e.mp.changedTouches[0]){let i=zn(t,this.opts,e);return function(e,t,i){let a=-1;if(function(e,t){return e.x>t.start.x&&e.x<t.end.x&&e.y>t.start.y&&e.y<t.end.y}(e,t.area)){let i=t.points,n=-1;for(let t=0,s=i.length;t<s;t++){let s=i[t];for(let t=0;t<s.length;t++){n+=1;let i=s[t].area;if(i&&e.x>i[0]-0&&e.x<i[2]+0&&e.y>i[1]-0&&e.y<i[3]+0){a=n;break}}}return a}return a}({x:i.x,y:i.y},this.opts.chartData.legendData)}return-1},no.prototype.touchLegend=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null;if(i=e.changedTouches?e.changedTouches[0]:e.mp.changedTouches[0]){zn(i,this.opts,e);var a=this.getLegendDataIndex(e);a>=0&&("candle"==this.opts.type?this.opts.seriesMA[a].show=!this.opts.seriesMA[a].show:this.opts.series[a].show=!this.opts.series[a].show,this.opts.animation=!!t.animation,this.opts._scrollDistance_=this.scrollOption.currentOffset,io.call(this,this.opts.type,this.opts,this.config,this.context))}},no.prototype.showToolTip=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null;(i=e.changedTouches?e.changedTouches[0]:e.mp.changedTouches[0])||console.log("[uCharts] 未获取到event坐标信息");var a=zn(i,this.opts,e),n=this.scrollOption.currentOffset,s=kn({},this.opts,{_scrollDistance_:n,animation:!1});if("line"===this.opts.type||"area"===this.opts.type||"column"===this.opts.type||"scatter"===this.opts.type||"bubble"===this.opts.type){var o=this.getCurrentDataIndex(e);if((u=null==t.index?o.index:t.index)>-1||u.length>0)if(0!==(l=Un(this.opts.series,u,o.group)).length){var r=(d=Vn(l,this.opts,u,o.group,this.opts.categories,t)).textList;(c=d.offset).y=a.y,s.tooltip={textList:void 0!==t.textList?t.textList:r,offset:void 0!==t.offset?t.offset:c,option:t,index:u,group:o.group}}io.call(this,s.type,s,this.config,this.context)}if("mount"===this.opts.type){if((u=null==t.index?this.getCurrentDataIndex(e).index:t.index)>-1){s=kn({},this.opts,{animation:!1});var l=kn({},s._series_[u]),c=(r=[{text:t.formatter?t.formatter(l,void 0,u,s):l.name+": "+l.data,color:l.color,legendShape:"auto"==this.opts.extra.tooltip.legendShape?l.legendShape:this.opts.extra.tooltip.legendShape}],{x:s.chartData.calPoints[u].x,y:a.y});s.tooltip={textList:t.textList?t.textList:r,offset:void 0!==t.offset?t.offset:c,option:t,index:u}}io.call(this,s.type,s,this.config,this.context)}if("bar"===this.opts.type){o=this.getCurrentDataIndex(e);if((u=null==t.index?o.index:t.index)>-1||u.length>0)if(0!==(l=Un(this.opts.series,u,o.group)).length){r=(d=Vn(l,this.opts,u,o.group,this.opts.categories,t)).textList;(c=d.offset).x=a.x,s.tooltip={textList:void 0!==t.textList?t.textList:r,offset:void 0!==t.offset?t.offset:c,option:t,index:u}}io.call(this,s.type,s,this.config,this.context)}if("mix"===this.opts.type){o=this.getCurrentDataIndex(e);if((u=null==t.index?o.index:t.index)>-1){n=this.scrollOption.currentOffset,s=kn({},this.opts,{_scrollDistance_:n,animation:!1});if(0!==(l=Un(this.opts.series,u)).length){var h=jn(l,this.opts,u,this.opts.categories,t);r=h.textList;(c=h.offset).y=a.y,s.tooltip={textList:t.textList?t.textList:r,offset:void 0!==t.offset?t.offset:c,option:t,index:u}}}io.call(this,s.type,s,this.config,this.context)}if("candle"===this.opts.type){o=this.getCurrentDataIndex(e);if((u=null==t.index?o.index:t.index)>-1){n=this.scrollOption.currentOffset,s=kn({},this.opts,{_scrollDistance_:n,animation:!1});if(0!==(l=Un(this.opts.series,u)).length){var d;r=(d=Hn(this.opts.series[0].data,l,this.opts,u,this.opts.categories,this.opts.extra.candle)).textList;(c=d.offset).y=a.y,s.tooltip={textList:t.textList?t.textList:r,offset:void 0!==t.offset?t.offset:c,option:t,index:u}}}io.call(this,s.type,s,this.config,this.context)}if("pie"===this.opts.type||"ring"===this.opts.type||"rose"===this.opts.type||"funnel"===this.opts.type){if((u=null==t.index?this.getCurrentDataIndex(e):t.index)>-1){s=kn({},this.opts,{animation:!1}),l=kn({},s._series_[u]),r=[{text:t.formatter?t.formatter(l,void 0,u,s):l.name+": "+l.data,color:l.color,legendShape:"auto"==this.opts.extra.tooltip.legendShape?l.legendShape:this.opts.extra.tooltip.legendShape}],c={x:a.x,y:a.y};s.tooltip={textList:t.textList?t.textList:r,offset:void 0!==t.offset?t.offset:c,option:t,index:u}}io.call(this,s.type,s,this.config,this.context)}if("map"===this.opts.type){if((u=null==t.index?this.getCurrentDataIndex(e):t.index)>-1){s=kn({},this.opts,{animation:!1});(l=kn({},this.opts.series[u])).name=l.properties.name;r=[{text:t.formatter?t.formatter(l,void 0,u,this.opts):l.name,color:l.color,legendShape:"auto"==this.opts.extra.tooltip.legendShape?l.legendShape:this.opts.extra.tooltip.legendShape}],c={x:a.x,y:a.y};s.tooltip={textList:t.textList?t.textList:r,offset:void 0!==t.offset?t.offset:c,option:t,index:u}}s.updateData=!1,io.call(this,s.type,s,this.config,this.context)}if("word"===this.opts.type){if((u=null==t.index?this.getCurrentDataIndex(e):t.index)>-1){s=kn({},this.opts,{animation:!1}),l=kn({},this.opts.series[u]),r=[{text:t.formatter?t.formatter(l,void 0,u,this.opts):l.name,color:l.color,legendShape:"auto"==this.opts.extra.tooltip.legendShape?l.legendShape:this.opts.extra.tooltip.legendShape}],c={x:a.x,y:a.y};s.tooltip={textList:t.textList?t.textList:r,offset:void 0!==t.offset?t.offset:c,option:t,index:u}}s.updateData=!1,io.call(this,s.type,s,this.config,this.context)}if("radar"===this.opts.type){var u;if((u=null==t.index?this.getCurrentDataIndex(e):t.index)>-1){s=kn({},this.opts,{animation:!1});if(0!==(l=Un(this.opts.series,u)).length){r=l.map((e=>({text:t.formatter?t.formatter(e,this.opts.categories[u],u,this.opts):e.name+": "+e.data,color:e.color,legendShape:"auto"==this.opts.extra.tooltip.legendShape?e.legendShape:this.opts.extra.tooltip.legendShape}))),c={x:a.x,y:a.y};s.tooltip={textList:t.textList?t.textList:r,offset:void 0!==t.offset?t.offset:c,option:t,index:u}}}io.call(this,s.type,s,this.config,this.context)}},no.prototype.translate=function(e){this.scrollOption={currentOffset:e,startTouchX:e,distance:0,lastMoveTime:0};let t=kn({},this.opts,{_scrollDistance_:e,animation:!1});io.call(this,this.opts.type,t,this.config,this.context)},no.prototype.scrollStart=function(e){var t=null,i=zn(t=e.changedTouches?e.changedTouches[0]:e.mp.changedTouches[0],this.opts,e);t&&!0===this.opts.enableScroll&&(this.scrollOption.startTouchX=i.x)},no.prototype.scroll=function(e){0===this.scrollOption.lastMoveTime&&(this.scrollOption.lastMoveTime=Date.now());let t=this.opts.touchMoveLimit||60,i=Date.now();if(!(i-this.scrollOption.lastMoveTime<Math.floor(1e3/t))&&0!=this.scrollOption.startTouchX){this.scrollOption.lastMoveTime=i;var a=null;if((a=e.changedTouches?e.changedTouches[0]:e.mp.changedTouches[0])&&!0===this.opts.enableScroll){var n;n=zn(a,this.opts,e).x-this.scrollOption.startTouchX;var s=this.scrollOption.currentOffset,o=Pn(this,s+n,this.opts.chartData,this.config,this.opts);this.scrollOption.distance=n=o-s;var r=kn({},this.opts,{_scrollDistance_:s+n,animation:!1});return this.opts=r,io.call(this,r.type,r,this.config,this.context),s+n}}},no.prototype.scrollEnd=function(e){if(!0===this.opts.enableScroll){var t=this.scrollOption,i=t.currentOffset,a=t.distance;this.scrollOption.currentOffset=i+a,this.scrollOption.distance=0,this.scrollOption.moveCount=0}};const so=["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],oo={type:["pie","ring","rose","word","funnel","map","arcbar","line","column","mount","bar","area","radar","gauge","candle","mix","tline","tarea","scatter","bubble","demotype"],range:["饼状图","圆环图","玫瑰图","词云图","漏斗图","地图","圆弧进度条","折线图","柱状图","山峰图","条状图","区域图","雷达图","仪表盘","K线图","混合图","时间轴折线","时间轴区域","散点图","气泡图","自定义类型"],categories:["line","column","mount","bar","area","radar","gauge","candle","mix","demotype"],instance:{},option:{},formatter:{yAxisDemo1:function(e,t,i){return e+"元"},yAxisDemo2:function(e,t,i){return e.toFixed(2)},xAxisDemo1:function(e,t,i){return e+"年"},xAxisDemo2:function(e,t,i){return((e,t)=>{var i=new Date;i.setTime(1e3*e);var a=i.getFullYear(),n=i.getMonth()+1;n=n<10?"0"+n:n;var s=i.getDate();s=s<10?"0"+s:s;var o=i.getHours();o=o<10?"0"+o:o;var r=i.getMinutes(),l=i.getSeconds();return r=r<10?"0"+r:r,l=l<10?"0"+l:l,"full"==t?a+"-"+n+"-"+s+" "+o+":"+r+":"+l:"y-m-d"==t?a+"-"+n+"-"+s:"h:m"==t?o+":"+r:"h:m:s"==t?o+":"+r+":"+l:[a,n,s,o,r,l]})(e,"h:m")},seriesDemo1:function(e,t,i,a){return e+"元"},tooltipDemo1:function(e,t,i,a){return 0==i?"随便用"+e.data+"年":"其他我没改"+e.data+"天"},pieDemo:function(e,t,i,a){if(void 0!==t)return i[t].name+"："+i[t].data+"元"}},demotype:{type:"line",color:so,padding:[15,10,0,15],xAxis:{disableGrid:!0},yAxis:{gridType:"dash",dashLength:2},legend:{},extra:{line:{type:"curve",width:2}}},pie:{type:"pie",color:so,padding:[5,5,5,5],extra:{pie:{activeOpacity:.5,activeRadius:10,offsetAngle:0,labelWidth:15,border:!0,borderWidth:3,borderColor:"#FFFFFF"}}},ring:{type:"ring",color:so,padding:[5,5,5,5],rotate:!1,dataLabel:!0,legend:{show:!0,position:"right",lineHeight:25},title:{name:"收益率",fontSize:15,color:"#666666"},subtitle:{name:"70%",fontSize:25,color:"#7cb5ec"},extra:{ring:{ringWidth:30,activeOpacity:.5,activeRadius:10,offsetAngle:0,labelWidth:15,border:!0,borderWidth:3,borderColor:"#FFFFFF"}}},rose:{type:"rose",color:so,padding:[5,5,5,5],legend:{show:!0,position:"left",lineHeight:25},extra:{rose:{type:"area",minRadius:50,activeOpacity:.5,activeRadius:10,offsetAngle:0,labelWidth:15,border:!1,borderWidth:2,borderColor:"#FFFFFF"}}},word:{type:"word",color:so,extra:{word:{type:"normal",autoColors:!1}}},funnel:{type:"funnel",color:so,padding:[15,15,0,15],extra:{funnel:{activeOpacity:.3,activeWidth:10,border:!0,borderWidth:2,borderColor:"#FFFFFF",fillOpacity:1,labelAlign:"right"}}},map:{type:"map",color:so,padding:[0,0,0,0],dataLabel:!0,extra:{map:{border:!0,borderWidth:1,borderColor:"#666666",fillOpacity:.6,activeBorderColor:"#F04864",activeFillColor:"#FACC14",activeFillOpacity:1}}},arcbar:{type:"arcbar",color:so,title:{name:"百分比",fontSize:25,color:"#00FF00"},subtitle:{name:"默认标题",fontSize:15,color:"#666666"},extra:{arcbar:{type:"default",width:12,backgroundColor:"#E9E9E9",startAngle:.75,endAngle:.25,gap:2}}},line:{type:"line",color:so,padding:[15,10,0,15],xAxis:{disableGrid:!0},yAxis:{gridType:"dash",dashLength:2},legend:{},extra:{line:{type:"straight",width:2,activeType:"hollow"}}},tline:{type:"line",color:so,padding:[15,10,0,15],xAxis:{disableGrid:!1,boundaryGap:"justify"},yAxis:{gridType:"dash",dashLength:2,data:[{min:0,max:80}]},legend:{},extra:{line:{type:"curve",width:2,activeType:"hollow"}}},tarea:{type:"area",color:so,padding:[15,10,0,15],xAxis:{disableGrid:!0,boundaryGap:"justify"},yAxis:{gridType:"dash",dashLength:2,data:[{min:0,max:80}]},legend:{},extra:{area:{type:"curve",opacity:.2,addLine:!0,width:2,gradient:!0,activeType:"hollow"}}},column:{type:"column",color:so,padding:[15,15,0,5],xAxis:{disableGrid:!0},yAxis:{data:[{min:0}]},legend:{},extra:{column:{type:"group",width:30,activeBgColor:"#000000",activeBgOpacity:.08}}},mount:{type:"mount",color:so,padding:[15,15,0,5],xAxis:{disableGrid:!0},yAxis:{data:[{min:0}]},legend:{},extra:{mount:{type:"mount",widthRatio:1.5}}},bar:{type:"bar",color:so,padding:[15,30,0,5],xAxis:{boundaryGap:"justify",disableGrid:!1,min:0,axisLine:!1},yAxis:{},legend:{},extra:{bar:{type:"group",width:30,meterBorde:1,meterFillColor:"#FFFFFF",activeBgColor:"#000000",activeBgOpacity:.08}}},area:{type:"area",color:so,padding:[15,15,0,15],xAxis:{disableGrid:!0},yAxis:{gridType:"dash",dashLength:2},legend:{},extra:{area:{type:"straight",opacity:.2,addLine:!0,width:2,gradient:!1,activeType:"hollow"}}},radar:{type:"radar",color:so,padding:[5,5,5,5],dataLabel:!1,legend:{show:!0,position:"right",lineHeight:25},extra:{radar:{gridType:"radar",gridColor:"#CCCCCC",gridCount:3,opacity:.2,max:200,labelShow:!0}}},gauge:{type:"gauge",color:so,title:{name:"66Km/H",fontSize:25,color:"#2fc25b",offsetY:50},subtitle:{name:"实时速度",fontSize:15,color:"#1890ff",offsetY:-50},extra:{gauge:{type:"default",width:30,labelColor:"#666666",startAngle:.75,endAngle:.25,startNumber:0,endNumber:100,labelFormat:"",splitLine:{fixRadius:0,splitNumber:10,width:30,color:"#FFFFFF",childNumber:5,childWidth:12},pointer:{width:24,color:"auto"}}}},candle:{type:"candle",color:so,padding:[15,15,0,15],enableScroll:!0,enableMarkLine:!0,dataLabel:!1,xAxis:{labelCount:4,itemCount:40,disableGrid:!0,gridColor:"#CCCCCC",gridType:"solid",dashLength:4,scrollShow:!0,scrollAlign:"left",scrollColor:"#A6A6A6",scrollBackgroundColor:"#EFEBEF"},yAxis:{},legend:{},extra:{candle:{color:{upLine:"#f04864",upFill:"#f04864",downLine:"#2fc25b",downFill:"#2fc25b"},average:{show:!0,name:["MA5","MA10","MA30"],day:[5,10,20],color:["#1890ff","#2fc25b","#facc14"]}},markLine:{type:"dash",dashLength:5,data:[{value:2150,lineColor:"#f04864",showLabel:!0},{value:2350,lineColor:"#f04864",showLabel:!0}]}}},mix:{type:"mix",color:so,padding:[15,15,0,15],xAxis:{disableGrid:!0},yAxis:{disabled:!1,disableGrid:!1,splitNumber:5,gridType:"dash",dashLength:4,gridColor:"#CCCCCC",padding:10,showTitle:!0,data:[]},legend:{},extra:{mix:{column:{width:20}}}},scatter:{type:"scatter",color:so,padding:[15,15,0,15],dataLabel:!1,xAxis:{disableGrid:!1,gridType:"dash",splitNumber:5,boundaryGap:"justify",min:0},yAxis:{disableGrid:!1,gridType:"dash"},legend:{},extra:{scatter:{}}},bubble:{type:"bubble",color:so,padding:[15,15,0,15],xAxis:{disableGrid:!1,gridType:"dash",splitNumber:5,boundaryGap:"justify",min:0,max:250},yAxis:{disableGrid:!1,gridType:"dash",data:[{min:0,max:150}]},legend:{},extra:{bubble:{border:2,opacity:.5}}}},ro=["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],lo={type:["pie","ring","rose","funnel","line","column","area","radar","gauge","candle","demotype"],categories:["line","column","area","radar","gauge","candle","demotype"],instance:{},option:{},formatter:{tooltipDemo1:function(e){let t="";for(let i in e){0==i&&(t+=e[i].axisValueLabel+"年销售额");let a="--";null!==e[i].data&&(a=e[i].data),t+="\n"+e[i].seriesName+"："+a+" 万元"}return t},legendFormat:function(e){return"自定义图例+"+e},yAxisFormatDemo:function(e,t){return e+"元"},seriesFormatDemo:function(e){return e.name+"年"+e.value+"元"}},demotype:{color:ro},column:{color:ro,title:{text:""},tooltip:{trigger:"axis"},grid:{top:30,bottom:50,right:15,left:40},legend:{bottom:"left"},toolbox:{show:!1},xAxis:{type:"category",axisLabel:{color:"#666666"},axisLine:{lineStyle:{color:"#CCCCCC"}},boundaryGap:!0,data:[]},yAxis:{type:"value",axisTick:{show:!1},axisLabel:{color:"#666666"},axisLine:{lineStyle:{color:"#CCCCCC"}}},seriesTemplate:{name:"",type:"bar",data:[],barwidth:20,label:{show:!0,color:"#666666",position:"top"}}},line:{color:ro,title:{text:""},tooltip:{trigger:"axis"},grid:{top:30,bottom:50,right:15,left:40},legend:{bottom:"left"},toolbox:{show:!1},xAxis:{type:"category",axisLabel:{color:"#666666"},axisLine:{lineStyle:{color:"#CCCCCC"}},boundaryGap:!0,data:[]},yAxis:{type:"value",axisTick:{show:!1},axisLabel:{color:"#666666"},axisLine:{lineStyle:{color:"#CCCCCC"}}},seriesTemplate:{name:"",type:"line",data:[],barwidth:20,label:{show:!0,color:"#666666",position:"top"}}},area:{color:ro,title:{text:""},tooltip:{trigger:"axis"},grid:{top:30,bottom:50,right:15,left:40},legend:{bottom:"left"},toolbox:{show:!1},xAxis:{type:"category",axisLabel:{color:"#666666"},axisLine:{lineStyle:{color:"#CCCCCC"}},boundaryGap:!0,data:[]},yAxis:{type:"value",axisTick:{show:!1},axisLabel:{color:"#666666"},axisLine:{lineStyle:{color:"#CCCCCC"}}},seriesTemplate:{name:"",type:"line",data:[],areaStyle:{},label:{show:!0,color:"#666666",position:"top"}}},pie:{color:ro,title:{text:""},tooltip:{trigger:"item"},grid:{top:40,bottom:30,right:15,left:15},legend:{bottom:"left"},seriesTemplate:{name:"",type:"pie",data:[],radius:"50%",label:{show:!0,color:"#666666",position:"top"}}},ring:{color:ro,title:{text:""},tooltip:{trigger:"item"},grid:{top:40,bottom:30,right:15,left:15},legend:{bottom:"left"},seriesTemplate:{name:"",type:"pie",data:[],radius:["40%","70%"],avoidLabelOverlap:!1,label:{show:!0,color:"#666666",position:"top"},labelLine:{show:!0}}},rose:{color:ro,title:{text:""},tooltip:{trigger:"item"},legend:{top:"bottom"},seriesTemplate:{name:"",type:"pie",data:[],radius:"55%",center:["50%","50%"],roseType:"area"}},funnel:{color:ro,title:{text:""},tooltip:{trigger:"item",formatter:"{b} : {c}%"},legend:{top:"bottom"},seriesTemplate:{name:"",type:"funnel",left:"10%",top:60,bottom:60,width:"80%",min:0,max:100,minSize:"0%",maxSize:"100%",sort:"descending",gap:2,label:{show:!0,position:"inside"},labelLine:{length:10,lineStyle:{width:1,type:"solid"}},itemStyle:{bordercolor:"#fff",borderwidth:1},emphasis:{label:{fontSize:20}},data:[]}},gauge:{color:ro,tooltip:{formatter:"{a} <br/>{b} : {c}%"},seriesTemplate:{name:"业务指标",type:"gauge",detail:{formatter:"{value}%"},data:[{value:50,name:"完成率"}]}},candle:{xAxis:{data:[]},yAxis:{},color:ro,title:{text:""},dataZoom:[{type:"inside",xAxisIndex:[0,1],start:10,end:100},{show:!0,xAxisIndex:[0,1],type:"slider",bottom:10,start:10,end:100}],seriesTemplate:{name:"",type:"k",data:[]}}};var co={},ho=null;function uo(e={},...t){for(let i in t)for(let a in t[i])t[i].hasOwnProperty(a)&&(e[a]=t[i][a]&&"object"==typeof t[i][a]?uo(Array.isArray(t[i][a])?[]:{},e[a],t[i][a]):t[i][a]);return e}function po(e,t){for(let i in e)e.hasOwnProperty(i)&&null!==e[i]&&"object"==typeof e[i]?po(e[i],t):"format"===i&&"string"==typeof e[i]&&(e.formatter=t[e[i]]?t[e[i]]:void 0);return e}const fo={data:()=>({rid:null}),mounted(){ho={top:0,left:0};let e=document.querySelectorAll("uni-main")[0];void 0===e&&(e=document.querySelectorAll("uni-page-wrapper")[0]),ho={top:e.offsetTop,left:e.offsetLeft},setTimeout((()=>{null===this.rid&&this.$ownerInstance&&this.$ownerInstance.callMethod("getRenderType")}),200)},destroyed(){delete oo.option[this.rid],delete oo.instance[this.rid],delete lo.option[this.rid],delete lo.instance[this.rid]},methods:{ecinit(e,t,i,a){let n=JSON.stringify(e.id);this.rid=n,co[n]=this.$ownerInstance||a;let s=JSON.parse(JSON.stringify(e)),o=s.type;o&&lo.type.includes(o)?lo.option[n]=uo({},lo[o],s):lo.option[n]=uo({},s);let r=s.chartData;if(r){lo.option[n].xAxis&&lo.option[n].xAxis.type&&"category"===lo.option[n].xAxis.type&&(lo.option[n].xAxis.data=r.categories),lo.option[n].yAxis&&lo.option[n].yAxis.type&&"category"===lo.option[n].yAxis.type&&(lo.option[n].yAxis.data=r.categories),lo.option[n].series=[];for(var l=0;l<r.series.length;l++){lo.option[n].seriesTemplate=lo.option[n].seriesTemplate?lo.option[n].seriesTemplate:{};let e=uo({},lo.option[n].seriesTemplate,r.series[l]);lo.option[n].series.push(e)}}if("object"==typeof window.echarts)this.newEChart();else{const e=document.createElement("script"),t=window.location.origin,i=a.getDataset().directory;e.src=t+i+"uni_modules/qiun-data-charts/static/h5/echarts.min.js",e.onload=this.newEChart,document.head.appendChild(e)}},ecresize(e,t,i,a){lo.instance[this.rid]&&lo.instance[this.rid].resize()},newEChart(){let e=this.rid;void 0===lo.instance[e]?(lo.instance[e]=echarts.init(co[e].$el.children[0]),!0===lo.option[e].ontap&&(lo.instance[e].on("click",(t=>{let i=JSON.parse(JSON.stringify({x:t.event.offsetX,y:t.event.offsetY}));co[e].callMethod("emitMsg",{name:"getIndex",params:{type:"getIndex",event:i,currentIndex:t.dataIndex,value:t.data,seriesName:t.seriesName,id:e}})})),lo.instance[e].on("highlight",(t=>{co[e].callMethod("emitMsg",{name:"getHighlight",params:{type:"highlight",res:t,id:e}})}))),this.updataEChart(e,lo.option[e])):this.updataEChart(e,lo.option[e])},updataEChart(e,t){if((t=po(t,lo.formatter)).tooltip&&(t.tooltip.show=!!t.tooltipShow,t.tooltip.position=this.tooltipPosition(),"string"==typeof t.tooltipFormat&&lo.formatter[t.tooltipFormat]&&(t.tooltip.formatter=t.tooltip.formatter?t.tooltip.formatter:lo.formatter[t.tooltipFormat])),t.series)for(let i in t.series){let e=t.series[i].linearGradient;e&&(t.series[i].color=new echarts.graphic.LinearGradient(e[0],e[1],e[2],e[3],e[4]))}lo.instance[e].setOption(t,t.notMerge),lo.instance[e].on("finished",(function(){co[e].callMethod("emitMsg",{name:"complete",params:{type:"complete",complete:!0,id:e}}),lo.instance[e]&&lo.instance[e].off("finished")})),void 0!==co[e].$el.children[0].clientWidth&&(Math.abs(co[e].$el.children[0].clientWidth-lo.instance[e].getWidth())>3||Math.abs(co[e].$el.children[0].clientHeight-lo.instance[e].getHeight())>3)&&this.ecresize()},tooltipPosition:()=>(e,t,i,a,n)=>{let s=e[0],o=e[1],r=n.viewSize[0],l=n.viewSize[1],c=n.contentSize[0],h=n.contentSize[1],d=s+30,u=o+30;return d+c>r&&(d=s-c-30),u+h>l&&(u=o-h-30),[d,u]},ucinit(e,t,i,a){if(JSON.stringify(e)==JSON.stringify(t))return;if(!e.canvasId)return;let n=JSON.parse(JSON.stringify(e.canvasId));this.rid=n,co[n]=this.$ownerInstance||a,oo.option[n]=JSON.parse(JSON.stringify(e)),oo.option[n]=po(oo.option[n],oo.formatter);let s=document.getElementById(n);s&&s.children[0]&&(oo.option[n].context=s.children[0].getContext("2d"),oo.instance[n]&&oo.option[n]&&!0===oo.option[n].update?this.updataUChart():setTimeout((()=>{oo.option[n].context.restore(),oo.option[n].context.save(),this.newUChart()}),100))},newUChart(){let e=this.rid;oo.instance[e]=new no(oo.option[e]),oo.instance[e].addEventListener("renderComplete",(()=>{co[e].callMethod("emitMsg",{name:"complete",params:{type:"complete",complete:!0,id:e,opts:oo.instance[e].opts}}),oo.instance[e].delEventListener("renderComplete")})),oo.instance[e].addEventListener("scrollLeft",(()=>{co[e].callMethod("emitMsg",{name:"scrollLeft",params:{type:"scrollLeft",scrollLeft:!0,id:e,opts:oo.instance[e].opts}})})),oo.instance[e].addEventListener("scrollRight",(()=>{co[e].callMethod("emitMsg",{name:"scrollRight",params:{type:"scrollRight",scrollRight:!0,id:e,opts:oo.instance[e].opts}})}))},updataUChart(){let e=this.rid;oo.instance[e].updateData(oo.option[e])},tooltipDefault(e,t,i,a){if(t){let i=e.data;return"object"==typeof e.data&&(i=e.data.value),t+" "+e.name+":"+i}return e.properties&&e.properties.name?e.properties.name:e.name+":"+e.data},showTooltip(e,t){let i=oo.option[t].tooltipCustom;if(i&&null!=i){let a;i.x>=0&&i.y>=0&&(a={x:i.x,y:i.y+10}),oo.instance[t].showToolTip(e,{index:i.index,offset:a,textList:i.textList,formatter:(e,i,a,n)=>"string"==typeof oo.option[t].tooltipFormat&&oo.formatter[oo.option[t].tooltipFormat]?oo.formatter[oo.option[t].tooltipFormat](e,i,a,n):this.tooltipDefault(e,i,a,n)})}else oo.instance[t].showToolTip(e,{formatter:(e,i,a,n)=>"string"==typeof oo.option[t].tooltipFormat&&oo.formatter[oo.option[t].tooltipFormat]?oo.formatter[oo.option[t].tooltipFormat](e,i,a,n):this.tooltipDefault(e,i,a,n)})},tap(e){let t=this.rid,i=oo.option[t].ontap,a=oo.option[t].tooltipShow,n=oo.option[t].tapLegend;if(0==i)return;let s=null,o=null,r=document.getElementById("UC"+t).getBoundingClientRect(),l={};l=e.detail.x?{x:e.detail.x-r.left,y:e.detail.y-r.top+ho.top}:{x:e.clientX-r.left,y:e.clientY-r.top+ho.top},e.changedTouches=[],e.changedTouches.unshift(l),s=oo.instance[t].getCurrentDataIndex(e),o=oo.instance[t].getLegendDataIndex(e),!0===n&&oo.instance[t].touchLegend(e),1==a&&this.showTooltip(e,t),co[t].callMethod("emitMsg",{name:"getIndex",params:{type:"getIndex",event:l,currentIndex:s,legendIndex:o,id:t,opts:oo.instance[t].opts}})},touchStart(e){let t=this.rid;0!=oo.option[t].ontouch&&(!0===oo.option[t].enableScroll&&1==e.touches.length&&oo.instance[t].scrollStart(e),co[t].callMethod("emitMsg",{name:"getTouchStart",params:{type:"touchStart",event:e.changedTouches[0],id:t,opts:oo.instance[t].opts}}))},touchMove(e){let t=this.rid,i=oo.option[t].ontouch;if(0!=i){if(!0===oo.option[t].enableScroll&&1==e.changedTouches.length&&oo.instance[t].scroll(e),!0===oo.option[t].ontap&&!1===oo.option[t].enableScroll&&!0===oo.option[t].onmovetip){let i=document.getElementById("UC"+t).getBoundingClientRect(),a={x:e.changedTouches[0].clientX-i.left,y:e.changedTouches[0].clientY-i.top+ho.top};e.changedTouches.unshift(a),!0===oo.option[t].tooltipShow&&this.showTooltip(e,t)}!0===i&&!0===oo.option[t].enableScroll&&!0===oo.option[t].onzoom&&2==e.changedTouches.length&&oo.instance[t].dobuleZoom(e),co[t].callMethod("emitMsg",{name:"getTouchMove",params:{type:"touchMove",event:e.changedTouches[0],id:t,opts:oo.instance[t].opts}})}},touchEnd(e){let t=this.rid;0!=oo.option[t].ontouch&&(!0===oo.option[t].enableScroll&&0==e.touches.length&&oo.instance[t].scrollEnd(e),co[t].callMethod("emitMsg",{name:"getTouchEnd",params:{type:"touchEnd",event:e.changedTouches[0],id:t,opts:oo.instance[t].opts}}))},mouseDown(e){let t=this.rid;if(0==oo.option[t].onmouse)return;let i=document.getElementById("UC"+t).getBoundingClientRect(),a={};a={x:e.clientX-i.left,y:e.clientY-i.top+ho.top},e.changedTouches=[],e.changedTouches.unshift(a),oo.instance[t].scrollStart(e),oo.option[t].mousedown=!0,co[t].callMethod("emitMsg",{name:"getTouchStart",params:{type:"mouseDown",event:a,id:t,opts:oo.instance[t].opts}})},mouseMove(e){let t=this.rid,i=oo.option[t].onmouse,a=oo.option[t].tooltipShow;if(0==i)return;let n=document.getElementById("UC"+t).getBoundingClientRect(),s={};s={x:e.clientX-n.left,y:e.clientY-n.top+ho.top},e.changedTouches=[],e.changedTouches.unshift(s),oo.option[t].mousedown?(oo.instance[t].scroll(e),co[t].callMethod("emitMsg",{name:"getTouchMove",params:{type:"mouseMove",event:s,id:t,opts:oo.instance[t].opts}})):oo.instance[t]&&1==a&&this.showTooltip(e,t)},mouseUp(e){let t=this.rid;if(0==oo.option[t].onmouse)return;let i=document.getElementById("UC"+t).getBoundingClientRect(),a={};a={x:e.clientX-i.left,y:e.clientY-i.top+ho.top},e.changedTouches=[],e.changedTouches.unshift(a),oo.instance[t].scrollEnd(e),oo.option[t].mousedown=!1,co[t].callMethod("emitMsg",{name:"getTouchEnd",params:{type:"mouseUp",event:a,id:t,opts:oo.instance[t].opts}})}}},go=e=>{e.$renderjs||(e.$renderjs=[]),e.$renderjs.push("rdcharts"),e.mixins||(e.mixins=[]),e.mixins.push({beforeCreate(){this.rdcharts=this},mounted(){this.$ownerInstance=this.$gcd(this,!0)}}),e.mixins.push(fo)};function mo(e={},...t){for(let i in t)for(let a in t[i])t[i].hasOwnProperty(a)&&(e[a]=t[i][a]&&"object"==typeof t[i][a]?mo(Array.isArray(t[i][a])?[]:{},e[a],t[i][a]):t[i][a]);return e}function xo(e,t){for(let i in e)e.hasOwnProperty(i)&&null!==e[i]&&"object"==typeof e[i]?xo(e[i],t):"format"===i&&"string"==typeof e[i]&&(e.formatter=t[e[i]]?t[e[i]]:void 0);return e}const yo={name:"qiun-data-charts",mixins:[Sn.mixinDatacom],props:{type:{type:String,default:null},canvasId:{type:String,default:"uchartsid"},canvas2d:{type:Boolean,default:!1},background:{type:String,default:"rgba(0,0,0,0)"},animation:{type:Boolean,default:!0},chartData:{type:Object,default:()=>({categories:[],series:[]})},opts:{type:Object,default:()=>({})},eopts:{type:Object,default:()=>({})},loadingType:{type:Number,default:2},errorShow:{type:Boolean,default:!0},errorReload:{type:Boolean,default:!0},errorMessage:{type:String,default:null},inScrollView:{type:Boolean,default:!1},reshow:{type:Boolean,default:!1},reload:{type:Boolean,default:!1},disableScroll:{type:Boolean,default:!1},optsWatch:{type:Boolean,default:!0},onzoom:{type:Boolean,default:!1},ontap:{type:Boolean,default:!0},ontouch:{type:Boolean,default:!1},onmouse:{type:Boolean,default:!0},onmovetip:{type:Boolean,default:!1},echartsH5:{type:Boolean,default:!1},echartsApp:{type:Boolean,default:!1},tooltipShow:{type:Boolean,default:!0},tooltipFormat:{type:String,default:void 0},tooltipCustom:{type:Object,default:void 0},startDate:{type:String,default:void 0},endDate:{type:String,default:void 0},textEnum:{type:Array,default:()=>[]},groupEnum:{type:Array,default:()=>[]},pageScrollTop:{type:Number,default:0},directory:{type:String,default:"/"},tapLegend:{type:Boolean,default:!0},menus:{type:Array,default:()=>[]}},data:()=>({cid:"uchartsid",inWx:!1,inAli:!1,inTt:!1,inBd:!1,inH5:!1,inApp:!1,inWin:!1,type2d:!0,disScroll:!1,openmouse:!1,pixel:1,cWidth:375,cHeight:250,showchart:!1,echarts:!1,echartsResize:{state:!1},uchartsOpts:{},echartsOpts:{},drawData:{},lastDrawTime:null}),created(){if(this.cid=this.canvasId,"uchartsid"==this.canvasId||""==this.canvasId){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",t=e.length,i="";for(let a=0;a<32;a++)i+=e.charAt(Math.floor(Math.random()*t));this.cid=i}const e=T();"windows"!==e.platform&&"mac"!==e.platform||(this.inWin=!0),this.type2d=!1,this.disScroll=this.disableScroll},mounted(){this.inH5=!0,!0===this.inWin&&(this.openmouse=this.onmouse),!0===this.echartsH5&&(this.echarts=!0),this.$nextTick((()=>{this.beforeInit()}));const e=this.inH5?500:200,t=this;te(function(e,t){let i=!1;return function(){clearTimeout(i),i&&clearTimeout(i),i=setTimeout((()=>{i=!1,e.apply(this,arguments)}),t)}}((function(e){if(1==t.mixinDatacomLoading)return;let i=t.mixinDatacomErrorMessage;null!==i&&"null"!==i&&""!==i||(t.echarts?t.echartsResize.state=!t.echartsResize.state:t.resizeHandler())}),e))},destroyed(){!0===this.echarts?(delete lo.option[this.cid],delete lo.instance[this.cid]):(delete oo.option[this.cid],delete oo.instance[this.cid]),ie((()=>{}))},watch:{chartDataProps:{handler(e,t){"object"==typeof e?JSON.stringify(e)!==JSON.stringify(t)&&(this._clearChart(),e.series&&e.series.length>0?this.beforeInit():(this.mixinDatacomLoading=!0,this.showchart=!1,this.mixinDatacomErrorMessage=null)):(this.mixinDatacomLoading=!1,this._clearChart(),this.showchart=!1,this.mixinDatacomErrorMessage="参数错误：chartData数据类型错误")},immediate:!1,deep:!0},localdata:{handler(e,t){JSON.stringify(e)!==JSON.stringify(t)&&(e.length>0?this.beforeInit():(this.mixinDatacomLoading=!0,this._clearChart(),this.showchart=!1,this.mixinDatacomErrorMessage=null))},immediate:!1,deep:!0},optsProps:{handler(e,t){"object"==typeof e?JSON.stringify(e)!==JSON.stringify(t)&&!1===this.echarts&&1==this.optsWatch&&this.checkData(this.drawData):(this.mixinDatacomLoading=!1,this._clearChart(),this.showchart=!1,this.mixinDatacomErrorMessage="参数错误：opts数据类型错误")},immediate:!1,deep:!0},eoptsProps:{handler(e,t){"object"==typeof e?JSON.stringify(e)!==JSON.stringify(t)&&!0===this.echarts&&this.checkData(this.drawData):(this.mixinDatacomLoading=!1,this.showchart=!1,this.mixinDatacomErrorMessage="参数错误：eopts数据类型错误")},immediate:!1,deep:!0},reshow(e,t){!0===e&&!1===this.mixinDatacomLoading&&setTimeout((()=>{this.mixinDatacomErrorMessage=null,this.echartsResize.state=!this.echartsResize.state,this.checkData(this.drawData)}),200)},reload(e,t){!0===e&&(this.showchart=!1,this.mixinDatacomErrorMessage=null,this.reloading())},mixinDatacomErrorMessage(e,t){e&&(this.emitMsg({name:"error",params:{type:"error",errorShow:this.errorShow,msg:e,id:this.cid}}),this.errorShow&&console.log("[秋云图表组件]"+e))},errorMessage(e,t){e&&this.errorShow&&null!==e&&"null"!==e&&""!==e?(this.showchart=!1,this.mixinDatacomLoading=!1,this.mixinDatacomErrorMessage=e):(this.showchart=!1,this.mixinDatacomErrorMessage=null,this.reloading())}},computed:{optsProps(){return JSON.parse(JSON.stringify(this.opts))},eoptsProps(){return JSON.parse(JSON.stringify(this.eopts))},chartDataProps(){return JSON.parse(JSON.stringify(this.chartData))}},methods:{beforeInit(){this.mixinDatacomErrorMessage=null,"object"==typeof this.chartData&&null!=this.chartData&&void 0!==this.chartData.series&&this.chartData.series.length>0?(this.drawData=mo({},this.chartData),this.mixinDatacomLoading=!1,this.showchart=!0,this.checkData(this.chartData)):this.localdata.length>0?(this.mixinDatacomLoading=!1,this.showchart=!0,this.localdataInit(this.localdata)):""!==this.collection?(this.mixinDatacomLoading=!1,this.getCloudData()):this.mixinDatacomLoading=!0},localdataInit(e){if(this.groupEnum.length>0)for(let h=0;h<e.length;h++)for(let t=0;t<this.groupEnum.length;t++)e[h].group===this.groupEnum[t].value&&(e[h].group=this.groupEnum[t].text);if(this.textEnum.length>0)for(let h=0;h<e.length;h++)for(let t=0;t<this.textEnum.length;t++)e[h].text===this.textEnum[t].value&&(e[h].text=this.textEnum[t].text);let t=!1,i={categories:[],series:[]},a=[],n=[];if(t=!0===this.echarts?lo.categories.includes(this.type):oo.categories.includes(this.type),!0===t){if(this.chartData&&this.chartData.categories&&this.chartData.categories.length>0)a=this.chartData.categories;else if(this.startDate&&this.endDate){let e=new Date(this.startDate),t=new Date(this.endDate);for(;e<=t;)a.push((o=void 0,r=void 0,l=void 0,o=(s=e).getFullYear(),r=s.getMonth()+1,l=s.getDate(),r>=1&&r<=9&&(r="0"+r),l>=0&&l<=9&&(l="0"+l),o+"-"+r+"-"+l)),e=e.setDate(e.getDate()+1),e=new Date(e)}else{let t={};e.map((function(e,i){null==e.text||t[e.text]||(a.push(e.text),t[e.text]=!0)}))}i.categories=a}var s,o,r,l;let c={};if(e.map((function(e,t){null==e.group||c[e.group]||(n.push({name:e.group,data:[]}),c[e.group]=!0)})),0==n.length)if(n=[{name:"默认分组",data:[]}],!0===t)for(let h=0;h<a.length;h++){let t=0;for(let i=0;i<e.length;i++)e[i].text==a[h]&&(t=e[i].value);n[0].data.push(t)}else for(let h=0;h<e.length;h++)n[0].data.push({name:e[h].text,value:e[h].value});else for(let h=0;h<n.length;h++)if(a.length>0)for(let t=0;t<a.length;t++){let i=0;for(let s=0;s<e.length;s++)n[h].name==e[s].group&&e[s].text==a[t]&&(i=e[s].value);n[h].data.push(i)}else for(let t=0;t<e.length;t++)n[h].name==e[t].group&&n[h].data.push(e[t].value);i.series=n,this.drawData=mo({},i),this.checkData(i)},reloading(){!1!==this.errorReload&&(this.showchart=!1,this.mixinDatacomErrorMessage=null,""!==this.collection?(this.mixinDatacomLoading=!1,this.onMixinDatacomPropsChange(!0)):this.beforeInit())},checkData(e){let t=this.cid;!0===this.echarts?(lo.option[t]=mo({},this.eopts),lo.option[t].id=t,lo.option[t].type=this.type):this.type&&oo.type.includes(this.type)?(oo.option[t]=mo({},oo[this.type],this.opts),oo.option[t].canvasId=t):(this.mixinDatacomLoading=!1,this.showchart=!1,this.mixinDatacomErrorMessage="参数错误：props参数中type类型不正确");let i=mo({},e);void 0!==i.series&&i.series.length>0&&(this.mixinDatacomErrorMessage=null,!0===this.echarts?(lo.option[t].chartData=i,this.$nextTick((()=>{this.init()}))):(oo.option[t].categories=i.categories,oo.option[t].series=i.series,this.$nextTick((()=>{this.init()}))))},resizeHandler(){let e=Date.now();e-(this.lastDrawTime?this.lastDrawTime:e-3e3)<1e3||v().in(this).select("#ChartBoxId"+this.cid).boundingClientRect((e=>{this.showchart=!0,e.width>0&&e.height>0&&(e.width===this.cWidth&&e.height===this.cHeight||this.checkData(this.drawData))})).exec()},getCloudData(){1!=this.mixinDatacomLoading&&(this.mixinDatacomLoading=!0,this.mixinDatacomGet().then((e=>{this.mixinDatacomResData=e.result.data,this.localdataInit(this.mixinDatacomResData)})).catch((e=>{this.mixinDatacomLoading=!1,this.showchart=!1,this.mixinDatacomErrorMessage="请求错误："+e})))},onMixinDatacomPropsChange(e,t){1==e&&""!==this.collection&&(this.showchart=!1,this.mixinDatacomErrorMessage=null,this._clearChart(),this.getCloudData())},_clearChart(){let e=this.cid;if(!0!==this.echarts&&oo.option[e]&&oo.option[e].context){const t=oo.option[e].context;"object"!=typeof t||oo.option[e].update||(t.clearRect(0,0,this.cWidth*this.pixel,this.cHeight*this.pixel),t.draw())}},init(){let e=this.cid;v().in(this).select("#ChartBoxId"+e).boundingClientRect((t=>{t.width>0&&t.height>0?(this.mixinDatacomLoading=!1,this.showchart=!0,this.lastDrawTime=Date.now(),this.cWidth=t.width,this.cHeight=t.height,!0!==this.echarts&&(oo.option[e].background="rgba(0,0,0,0)"==this.background?"#FFFFFF":this.background,oo.option[e].canvas2d=this.type2d,oo.option[e].pixelRatio=this.pixel,oo.option[e].animation=this.animation,oo.option[e].width=t.width*this.pixel,oo.option[e].height=t.height*this.pixel,oo.option[e].onzoom=this.onzoom,oo.option[e].ontap=this.ontap,oo.option[e].ontouch=this.ontouch,oo.option[e].onmouse=this.openmouse,oo.option[e].onmovetip=this.onmovetip,oo.option[e].tooltipShow=this.tooltipShow,oo.option[e].tooltipFormat=this.tooltipFormat,oo.option[e].tooltipCustom=this.tooltipCustom,oo.option[e].inScrollView=this.inScrollView,oo.option[e].lastDrawTime=this.lastDrawTime,oo.option[e].tapLegend=this.tapLegend),this.inH5||this.inApp?1==this.echarts?(lo.option[e].ontap=this.ontap,lo.option[e].onmouse=this.openmouse,lo.option[e].tooltipShow=this.tooltipShow,lo.option[e].tooltipFormat=this.tooltipFormat,lo.option[e].tooltipCustom=this.tooltipCustom,lo.option[e].lastDrawTime=this.lastDrawTime,this.echartsOpts=mo({},lo.option[e])):(oo.option[e].rotateLock=oo.option[e].rotate,this.uchartsOpts=mo({},oo.option[e])):(oo.option[e]=xo(oo.option[e],oo.formatter),this.mixinDatacomErrorMessage=null,this.mixinDatacomLoading=!1,this.showchart=!0,this.$nextTick((()=>{if(!0===this.type2d){v().in(this).select("#"+e).fields({node:!0,size:!0}).exec((i=>{if(i[0]){const a=i[0].node,n=a.getContext("2d");oo.option[e].context=n,oo.option[e].rotateLock=oo.option[e].rotate,oo.instance[e]&&oo.option[e]&&!0===oo.option[e].update?this._updataUChart(e):(a.width=t.width*this.pixel,a.height=t.height*this.pixel,a._width=t.width*this.pixel,a._height=t.height*this.pixel,setTimeout((()=>{oo.option[e].context.restore(),oo.option[e].context.save(),this._newChart(e)}),100))}else this.showchart=!1,this.mixinDatacomErrorMessage="参数错误：开启2d模式后，未获取到dom节点，canvas-id:"+e}))}else this.inAli&&(oo.option[e].rotateLock=oo.option[e].rotate),oo.option[e].context=ae(e,this),oo.instance[e]&&oo.option[e]&&!0===oo.option[e].update?this._updataUChart(e):setTimeout((()=>{oo.option[e].context.restore(),oo.option[e].context.save(),this._newChart(e)}),100)})))):(this.mixinDatacomLoading=!1,this.showchart=!1,1==this.reshow&&(this.mixinDatacomErrorMessage="布局错误：未获取到父元素宽高尺寸！canvas-id:"+e))})).exec()},saveImage(){ne({canvasId:this.cid,success:e=>{var t=document.createElement("a");t.href=e.tempFilePath,t.download=this.cid,t.target="_blank",t.click()}},this)},getImage(){if(0==this.type2d)ne({canvasId:this.cid,success:e=>{this.emitMsg({name:"getImage",params:{type:"getImage",base64:e.tempFilePath}})}},this);else{v().in(this).select("#"+this.cid).fields({node:!0,size:!0}).exec((e=>{if(e[0]){const t=e[0].node;this.emitMsg({name:"getImage",params:{type:"getImage",base64:t.toDataURL("image/png")}})}}))}},_error(e){this.mixinDatacomErrorMessage=e.detail.errMsg},emitMsg(e){this.$emit(e.name,e.params)},getRenderType(){!0===this.echarts&&!1===this.mixinDatacomLoading&&this.beforeInit()},toJSON(){return this}}};go(yo);const bo=oe(yo,[["render",function(a,o,r,c,h,u){const p=le(_("qiun-loading"),wn),f=d,g=le(_("qiun-error"),Tn),m=se;return e(),t(f,{class:"chartsview",id:"ChartBoxId"+h.cid},{default:i((()=>[a.mixinDatacomLoading?(e(),t(f,{key:0},{default:i((()=>[n(p,{loadingType:r.loadingType},null,8,["loadingType"])])),_:1})):s("",!0),a.mixinDatacomErrorMessage&&r.errorShow?(e(),t(f,{key:1,onClick:u.reloading},{default:i((()=>[n(g,{errorMessage:r.errorMessage},null,8,["errorMessage"])])),_:1},8,["onClick"])):s("",!0),h.echarts?k((e(),t(f,{key:2,style:l([{background:r.background},{width:"100%",height:"100%"}]),"data-directory":r.directory,id:"EC"+h.cid,prop:h.echartsOpts,"change:prop":a.rdcharts.ecinit,resize:h.echartsResize,"change:resize":a.rdcharts.ecresize},null,8,["style","data-directory","id","prop","change:prop","resize","change:resize"])),[[D,h.showchart]]):(e(),t(f,{key:3,onClick:a.rdcharts.tap,onMousemove:a.rdcharts.mouseMove,onMousedown:a.rdcharts.mouseDown,onMouseup:a.rdcharts.mouseUp,onTouchstart:a.rdcharts.touchStart,onTouchmove:a.rdcharts.touchMove,onTouchend:a.rdcharts.touchEnd,id:"UC"+h.cid,prop:h.uchartsOpts,"change:prop":a.rdcharts.ucinit},{default:i((()=>[k(n(m,{id:h.cid,canvasId:h.cid,style:l({width:h.cWidth+"px",height:h.cHeight+"px",background:r.background}),"disable-scroll":r.disableScroll,onError:u._error},null,8,["id","canvasId","style","disable-scroll","onError"]),[[D,h.showchart]])])),_:1},8,["onClick","onMousemove","onMousedown","onMouseup","onTouchstart","onTouchmove","onTouchend","id","prop","change:prop"]))])),_:1},8,["id"])}],["__scopeId","data-v-d3533eac"]]);const _o=oe({data:()=>({chartData_unit3:{},opts_unit3:{color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc","#0624ea","#fff700"],padding:[15,15,0,5],enableScroll:!1,legend:{show:!1,position:"bottom",lineHeight:25},xAxis:{disableGrid:!0,fontSize:11},yAxis:{showTitle:!0,data:[{title:"预计排队等待时间(分钟)",min:0,titleOffsetY:-8,titleOffsetX:50}]},extra:{column:{type:"group",width:30,meterBorde:1,meterFillColor:"#FFFFFF",activeBgColor:"#000000",activeBgOpacity:.08,barBorderCircle:!0,seriesGap:2,categoryGap:2,labelPosition:"outside"}}},chartData_unit4_1:{},opts_unit4_1:{color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc","#0624ea","#fff700"],padding:[15,5,5,5],enableScroll:!1,legend:{show:!0,position:"bottom",lineHeight:25},extra:{rose:{type:"radius",minRadius:50,activeOpacity:.5,activeRadius:10,offsetAngle:0,labelWidth:15,border:!0,borderWidth:2,borderColor:"#FFFFFF",linearType:"custom"}}},chartData_unit4_2:{},opts_unit4_2:{color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc","#0624ea","#fff700"],padding:[10,5,5,5],enableScroll:!1,extra:{pie:{activeOpacity:.5,activeRadius:10,offsetAngle:0,labelWidth:15,border:!0,borderWidth:3,borderColor:"#FFFFFF",linearType:"custom"}}},chartData_unit5:{},opts_unit5:{color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc","#0624ea","#fff700"],padding:[15,10,0,15],dataLabel:!1,enableScroll:!1,update:!0,legend:{},xAxis:{disableGrid:!0,showTitle:!0,title:"时间(小时)",titleOffsetY:-20,titleOffsetX:-50},yAxis:{gridType:"dash",dashLength:3,showTitle:!0,data:[{title:"预计排队等待时间(分钟)",min:0,max:null,titleOffsetY:-8,titleOffsetX:50}]},extra:{line:{type:"curve",width:2,activeType:"hollow",linearType:"custom"}}},totUserCount:0,style_window:"",facilityRank:[{name:"none",count:0},{name:"none",count:0},{name:"none",count:0},{name:"none",count:0},{name:"none",count:0},{name:"none",count:0},{name:"none",count:0},{name:"none",count:0},{name:"none",count:0}],map:"/static/map3.png",API:"http://120.46.211.213:8888",timeofnow:"",table_line_height:""}),onReady(){this.flush_time(),this.unit5_swiper(),this.unit1_unit2_refresh(),this.refresh(),setInterval((()=>{this.refresh(!0)}),1e3)},methods:{unit1_unit2_refresh(){const e=this.API;W({url:e+"/statistics/headCount/total",method:"GET",success:e=>{let t=e.data;200==t.code?this.totUserCount=t.data:console.log("获取数据失败")}}),W({url:e+"/statistics/headCount/facility",method:"GET",success:e=>{let t=e.data;if(200==t.code){let e=t.data;this.facilityRank=[],e.forEach((e=>{this.facilityRank.push({name:e.facilityName,count:e.headCount})})),this.facilityRank.sort(((e,t)=>t.count-e.count))}else console.log("获取数据失败")}}),setTimeout(this.unit1_unit2_refresh,500)},unit5_repack(){if(this.chartData_unit5.series){const e=["8","9","10","11","12","13","14","15","16","17","18","19","20"];let t=this.chartData_unit5.series.length,i=null,a=null;for(let n=0;n<t;n++)if(this.chartData_unit5.series[n].show){let t=0,s=this.chartData_unit5.series[n].data.length;if(s<e.length){let t=[];for(let i=s;i<e.length;i++)t.push(null);this.chartData_unit5.series[n].data=t.concat(this.chartData_unit5.series[n].data),s=e.length}for(let e=0;e<s;e++)null!=this.chartData_unit5.series[n].data[e]&&(null==i&&(i=e),a=e,t=Math.max(t,this.chartData_unit5.series[n].data[e]));for(t=Math.round(t+10);t%10!=0;)t++;this.opts_unit5.yAxis.data[0].max=t,this.chartData_unit5.series[n].data=this.chartData_unit5.series[n].data.slice(i,s);break}if(null==i)return void this.unit5_swiper(!0);this.chartData_unit5.categories=e.slice(i,a+1)}},unit5_swiper(e){if(this.chartData_unit5.series){let e=this.chartData_unit5.series.length;for(let t=0;t<e;t++)if(this.chartData_unit5.series[t].show){if(this.chartData_unit5.series[t].show=!1,this.chartData_unit5.series[(t+1)%e].show=!0,t==e-1){this.refresh(!1);break}this.unit5_repack();break}}e||setTimeout(this.unit5_swiper,5e3)},refresh(e){this.style_window="",X({success:e=>{this.style_window+="height:"+e.windowHeight+"px;",this.style_window+="width:"+e.windowWidth+"px;",this.table_line_height="line-height:"+.83*e.windowHeight*.837/110+"px;"}}),this.getServerData(e)},getServerData(e){const t=this.API;W({url:t+"/filter/amusement",method:"POST",data:{},success:e=>{let t=e.data;if(200==t.code){let e=t.data,i={categories:[],series:[{name:"设施名称",data:[]}]};e.forEach((e=>{if(0==e.expectWaitTime)return;i.categories.push(e.name);let t={value:e.expectWaitTime,color:["#06cb13","#fabb56","#fd4625"][Math.min(2,Math.floor(e.expectWaitTime/30))]};i.series[0].data.push(t)})),this.chartData_unit3=JSON.parse(JSON.stringify(i)),this.unit5_repack()}else console.log("获取数据失败")}}),W({url:t+"/statistics/route/useCount",method:"GET",success:e=>{let t=e.data;if(200==t.code){let e=t.data,i={series:[{data:[]}]};e.forEach((e=>{i.series[0].data.push({name:e.name,value:e.useCount})})),this.chartData_unit4_1=JSON.parse(JSON.stringify(i))}else console.log("获取数据失败")}}),W({url:t+"/statistics/visit/count",method:"GET",success:e=>{let t=e.data;if(200==t.code){let e=t.data,i={series:[{data:[]}]};e.forEach((e=>{i.series[0].data.push({name:e.facilityName,value:e.visitCount})})),this.chartData_unit4_2=JSON.parse(JSON.stringify(i))}else console.log("获取数据失败")}}),e||W({url:t+"/statistics/crowingTimeCount",method:"GET",success:e=>{let t=e.data;if(200==t.code){let e=t.data,i={categories:["8","9","10","11","12","13","14","15","16","17","18","19","20"],series:[]};e.forEach(((e,t)=>{let a=[],n=e.crowingTimeItemVOList.length;for(let i=0,s=8;i<n;i++){for(;s<e.crowingTimeItemVOList[i].time;)a.push(null),s++;a.push(e.crowingTimeItemVOList[i].expectWaitTime),s++}for(;a.length<i.categories.length;)a.push(null);i.series.push({name:e.facilityName,lineType:"solid",show:!1,data:a})})),i.series[0].show=!0,this.chartData_unit5=JSON.parse(JSON.stringify(i)),this.unit5_repack()}else console.log("获取数据失败")}})},flush_time(){var e=new Date,t=e.getHours();t=t<10?"0"+t:t;var i=e.getMinutes();i=i<10?"0"+i:i;var a=e.getSeconds();a=a<10?"0"+a:a,this.timeofnow=t+":"+i+":"+a,setTimeout(this.flush_time,900)}}},[["render",function(a,s,c,u,p,x){const y=d,b=le(_("uni-card"),re),S=le(_("uni-th"),Be),w=le(_("uni-tr"),Ue),T=le(_("uni-td"),We),v=le(_("uni-table"),$e),k=le(_("qiun-data-charts"),bo),D=h;return e(),t(y,{style:l(p.style_window)},{default:i((()=>[n(y,{class:"bg",style:l(p.style_window)},null,8,["style"]),n(y,{style:{height:"5%","text-align":"center","padding-top":"5px","padding-bottom":"10px","margin-bottom":"10px","background-color":"rgba(8,159,255, 0.9)",color:"white"}},{default:i((()=>[P("h1",{style:{display:"inline-block"}},"今日游园情况"),P("div",{style:{right:"10px",position:"absolute",display:"inline-block",height:"inherit","vertical-align":"middle"}},[n(y,{style:{display:"inline-block","line-height":"43px","font-size":"1.2em","font-weight":"bold"}},{default:i((()=>[o(r((new Date).getFullYear()+" 年 "+((new Date).getMonth()+1)+" 月 "+(new Date).getDate()+" 日 ")+"  "+r(["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][(new Date).getDay()]+" ")+"  "+r(p.timeofnow),1)])),_:1})])])),_:1}),n(y,{style:{height:"83%"}},{default:i((()=>[n(y,{class:"left"},{default:i((()=>[n(y,{class:"unit1"},{default:i((()=>[n(b,{class:"card-wrapper"}),n(y,{class:"unit1-1"},{default:i((()=>[o("今日游玩人数")])),_:1}),n(y,{class:"unit1-2"},{default:i((()=>[o(r(p.totUserCount),1)])),_:1})])),_:1}),n(y,{class:"unit2"},{default:i((()=>[n(b,{class:"card-wrapper"}),n(y,{class:"unit2-1"},{default:i((()=>[o("今日游乐设施排行榜")])),_:1}),n(y,{class:"unit2-2"},{default:i((()=>[n(v,{border:"",emptyText:"暂无"},{default:i((()=>[n(w,{class:"unit-2-2-1"},{default:i((()=>[n(S,{style:l(p.table_line_height),class:"unit-2-2-1-left",width:"5",align:"center"},{default:i((()=>[o("排名")])),_:1},8,["style"]),n(S,{width:"50",align:"center"},{default:i((()=>[o("设施名称")])),_:1}),n(S,{class:"unit-2-2-1-right",width:"50",align:"center"},{default:i((()=>[o("游玩人数")])),_:1})])),_:1}),(e(!0),f(g,null,m(p.facilityRank,((a,s)=>(e(),t(w,{class:"unit-2-2-1"},{default:i((()=>[n(T,{style:l(p.table_line_height),class:"unit-2-2-1-left",align:"center"},{default:i((()=>[o(r(s+1),1)])),_:2},1032,["style"]),n(T,{align:"center"},{default:i((()=>[o(r(a.name),1)])),_:2},1024),n(T,{class:"unit-2-2-1-right",align:"center"},{default:i((()=>[o(r(a.count),1)])),_:2},1024)])),_:2},1024)))),256))])),_:1})])),_:1})])),_:1})])),_:1}),n(y,{class:"middle"},{default:i((()=>[n(y,{class:"unit3"},{default:i((()=>[n(b,{class:"card-wrapper"}),n(y,{class:"unit3-1"},{default:i((()=>[o(" 今日游乐设施实时拥挤度 ")])),_:1}),n(y,{class:"unit3-2"},{default:i((()=>[n(k,{type:"column",opts:p.opts_unit3,chartData:p.chartData_unit3},null,8,["opts","chartData"])])),_:1})])),_:1}),n(y,{class:"unit4"},{default:i((()=>[n(b,{class:"card-wrapper"}),n(y,{class:"unit4-1"},{default:i((()=>[o(" 推荐路线选择情况 "),n(k,{type:"rose",opts:p.opts_unit4_1,chartData:p.chartData_unit4_1,class:"unit4-1-2"},null,8,["opts","chartData"])])),_:1}),n(y,{class:"unit4-2"},{default:i((()=>[o(" 游乐设施打卡情况 "),n(k,{type:"pie",opts:p.opts_unit4_2,chartData:p.chartData_unit4_2,class:"unit4-2-2"},null,8,["opts","chartData"])])),_:1})])),_:1})])),_:1}),n(y,{class:"right"},{default:i((()=>[n(y,{class:"unit5"},{default:i((()=>[n(b,{class:"card-wrapper"}),n(y,{class:"unit5-1"},{default:i((()=>[o(" 游乐设施拥挤度变化曲线 ")])),_:1}),n(y,{class:"unit5-2"},{default:i((()=>[n(k,{type:"line",opts:p.opts_unit5,chartData:p.chartData_unit5},null,8,["opts","chartData"])])),_:1})])),_:1}),n(y,{class:"unit6"},{default:i((()=>[n(b,{class:"card-wrapper"}),o(" 游乐场地地图及当前位置"),P("br"),n(y,{class:"unit6-1"},{default:i((()=>[n(D,{src:p.map,style:{height:"100%",width:"90%"}},null,8,["src"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["style"])}],["__scopeId","data-v-dcec8ef1"]]);export{_o as default};
